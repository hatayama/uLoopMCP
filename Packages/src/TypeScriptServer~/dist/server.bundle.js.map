{
  "version": 3,
  "sources": ["../node_modules/zod/dist/esm/v3/external.js", "../node_modules/zod/dist/esm/v3/helpers/util.js", "../node_modules/zod/dist/esm/v3/ZodError.js", "../node_modules/zod/dist/esm/v3/locales/en.js", "../node_modules/zod/dist/esm/v3/errors.js", "../node_modules/zod/dist/esm/v3/helpers/parseUtil.js", "../node_modules/zod/dist/esm/v3/helpers/errorUtil.js", "../node_modules/zod/dist/esm/v3/types.js", "../node_modules/@modelcontextprotocol/sdk/src/types.ts", "../node_modules/@modelcontextprotocol/sdk/src/shared/protocol.ts", "../node_modules/@modelcontextprotocol/sdk/src/server/index.ts", "../node_modules/@modelcontextprotocol/sdk/src/server/stdio.ts", "../node_modules/@modelcontextprotocol/sdk/src/shared/stdio.ts", "../src/unity-client.ts", "../src/constants.ts", "../src/utils/safe-timer.ts", "../src/utils/vibe-logger.ts", "../node_modules/uuid/dist/esm/stringify.js", "../node_modules/uuid/dist/esm/rng.js", "../node_modules/uuid/dist/esm/native.js", "../node_modules/uuid/dist/esm/v4.js", "../src/connection-manager.ts", "../src/utils/content-length-framer.ts", "../src/utils/dynamic-buffer.ts", "../src/message-handler.ts", "../src/unity-discovery.ts", "../src/unity-connection-manager.ts", "../src/tools/base-tool.ts", "../src/tools/dynamic-unity-command-tool.ts", "../src/domain/errors.ts", "../src/infrastructure/errors.ts", "../src/application/error-converter.ts", "../src/domain/use-cases/refresh-tools-use-case.ts", "../src/unity-tool-manager.ts", "../src/mcp-client-compatibility.ts", "../src/unity-event-handler.ts", "../src/version.ts", "../src/server.ts"],
  "sourcesContent": ["export * from \"./errors.js\";\nexport * from \"./helpers/parseUtil.js\";\nexport * from \"./helpers/typeAliases.js\";\nexport * from \"./helpers/util.js\";\nexport * from \"./types.js\";\nexport * from \"./ZodError.js\";\n", "export var util;\n(function (util) {\n    util.assertEqual = (_) => { };\n    function assertIs(_arg) { }\n    util.assertIs = assertIs;\n    function assertNever(_x) {\n        throw new Error();\n    }\n    util.assertNever = assertNever;\n    util.arrayToEnum = (items) => {\n        const obj = {};\n        for (const item of items) {\n            obj[item] = item;\n        }\n        return obj;\n    };\n    util.getValidEnumValues = (obj) => {\n        const validKeys = util.objectKeys(obj).filter((k) => typeof obj[obj[k]] !== \"number\");\n        const filtered = {};\n        for (const k of validKeys) {\n            filtered[k] = obj[k];\n        }\n        return util.objectValues(filtered);\n    };\n    util.objectValues = (obj) => {\n        return util.objectKeys(obj).map(function (e) {\n            return obj[e];\n        });\n    };\n    util.objectKeys = typeof Object.keys === \"function\" // eslint-disable-line ban/ban\n        ? (obj) => Object.keys(obj) // eslint-disable-line ban/ban\n        : (object) => {\n            const keys = [];\n            for (const key in object) {\n                if (Object.prototype.hasOwnProperty.call(object, key)) {\n                    keys.push(key);\n                }\n            }\n            return keys;\n        };\n    util.find = (arr, checker) => {\n        for (const item of arr) {\n            if (checker(item))\n                return item;\n        }\n        return undefined;\n    };\n    util.isInteger = typeof Number.isInteger === \"function\"\n        ? (val) => Number.isInteger(val) // eslint-disable-line ban/ban\n        : (val) => typeof val === \"number\" && Number.isFinite(val) && Math.floor(val) === val;\n    function joinValues(array, separator = \" | \") {\n        return array.map((val) => (typeof val === \"string\" ? `'${val}'` : val)).join(separator);\n    }\n    util.joinValues = joinValues;\n    util.jsonStringifyReplacer = (_, value) => {\n        if (typeof value === \"bigint\") {\n            return value.toString();\n        }\n        return value;\n    };\n})(util || (util = {}));\nexport var objectUtil;\n(function (objectUtil) {\n    objectUtil.mergeShapes = (first, second) => {\n        return {\n            ...first,\n            ...second, // second overwrites first\n        };\n    };\n})(objectUtil || (objectUtil = {}));\nexport const ZodParsedType = util.arrayToEnum([\n    \"string\",\n    \"nan\",\n    \"number\",\n    \"integer\",\n    \"float\",\n    \"boolean\",\n    \"date\",\n    \"bigint\",\n    \"symbol\",\n    \"function\",\n    \"undefined\",\n    \"null\",\n    \"array\",\n    \"object\",\n    \"unknown\",\n    \"promise\",\n    \"void\",\n    \"never\",\n    \"map\",\n    \"set\",\n]);\nexport const getParsedType = (data) => {\n    const t = typeof data;\n    switch (t) {\n        case \"undefined\":\n            return ZodParsedType.undefined;\n        case \"string\":\n            return ZodParsedType.string;\n        case \"number\":\n            return Number.isNaN(data) ? ZodParsedType.nan : ZodParsedType.number;\n        case \"boolean\":\n            return ZodParsedType.boolean;\n        case \"function\":\n            return ZodParsedType.function;\n        case \"bigint\":\n            return ZodParsedType.bigint;\n        case \"symbol\":\n            return ZodParsedType.symbol;\n        case \"object\":\n            if (Array.isArray(data)) {\n                return ZodParsedType.array;\n            }\n            if (data === null) {\n                return ZodParsedType.null;\n            }\n            if (data.then && typeof data.then === \"function\" && data.catch && typeof data.catch === \"function\") {\n                return ZodParsedType.promise;\n            }\n            if (typeof Map !== \"undefined\" && data instanceof Map) {\n                return ZodParsedType.map;\n            }\n            if (typeof Set !== \"undefined\" && data instanceof Set) {\n                return ZodParsedType.set;\n            }\n            if (typeof Date !== \"undefined\" && data instanceof Date) {\n                return ZodParsedType.date;\n            }\n            return ZodParsedType.object;\n        default:\n            return ZodParsedType.unknown;\n    }\n};\n", "import { util } from \"./helpers/util.js\";\nexport const ZodIssueCode = util.arrayToEnum([\n    \"invalid_type\",\n    \"invalid_literal\",\n    \"custom\",\n    \"invalid_union\",\n    \"invalid_union_discriminator\",\n    \"invalid_enum_value\",\n    \"unrecognized_keys\",\n    \"invalid_arguments\",\n    \"invalid_return_type\",\n    \"invalid_date\",\n    \"invalid_string\",\n    \"too_small\",\n    \"too_big\",\n    \"invalid_intersection_types\",\n    \"not_multiple_of\",\n    \"not_finite\",\n]);\nexport const quotelessJson = (obj) => {\n    const json = JSON.stringify(obj, null, 2);\n    return json.replace(/\"([^\"]+)\":/g, \"$1:\");\n};\nexport class ZodError extends Error {\n    get errors() {\n        return this.issues;\n    }\n    constructor(issues) {\n        super();\n        this.issues = [];\n        this.addIssue = (sub) => {\n            this.issues = [...this.issues, sub];\n        };\n        this.addIssues = (subs = []) => {\n            this.issues = [...this.issues, ...subs];\n        };\n        const actualProto = new.target.prototype;\n        if (Object.setPrototypeOf) {\n            // eslint-disable-next-line ban/ban\n            Object.setPrototypeOf(this, actualProto);\n        }\n        else {\n            this.__proto__ = actualProto;\n        }\n        this.name = \"ZodError\";\n        this.issues = issues;\n    }\n    format(_mapper) {\n        const mapper = _mapper ||\n            function (issue) {\n                return issue.message;\n            };\n        const fieldErrors = { _errors: [] };\n        const processError = (error) => {\n            for (const issue of error.issues) {\n                if (issue.code === \"invalid_union\") {\n                    issue.unionErrors.map(processError);\n                }\n                else if (issue.code === \"invalid_return_type\") {\n                    processError(issue.returnTypeError);\n                }\n                else if (issue.code === \"invalid_arguments\") {\n                    processError(issue.argumentsError);\n                }\n                else if (issue.path.length === 0) {\n                    fieldErrors._errors.push(mapper(issue));\n                }\n                else {\n                    let curr = fieldErrors;\n                    let i = 0;\n                    while (i < issue.path.length) {\n                        const el = issue.path[i];\n                        const terminal = i === issue.path.length - 1;\n                        if (!terminal) {\n                            curr[el] = curr[el] || { _errors: [] };\n                            // if (typeof el === \"string\") {\n                            //   curr[el] = curr[el] || { _errors: [] };\n                            // } else if (typeof el === \"number\") {\n                            //   const errorArray: any = [];\n                            //   errorArray._errors = [];\n                            //   curr[el] = curr[el] || errorArray;\n                            // }\n                        }\n                        else {\n                            curr[el] = curr[el] || { _errors: [] };\n                            curr[el]._errors.push(mapper(issue));\n                        }\n                        curr = curr[el];\n                        i++;\n                    }\n                }\n            }\n        };\n        processError(this);\n        return fieldErrors;\n    }\n    static assert(value) {\n        if (!(value instanceof ZodError)) {\n            throw new Error(`Not a ZodError: ${value}`);\n        }\n    }\n    toString() {\n        return this.message;\n    }\n    get message() {\n        return JSON.stringify(this.issues, util.jsonStringifyReplacer, 2);\n    }\n    get isEmpty() {\n        return this.issues.length === 0;\n    }\n    flatten(mapper = (issue) => issue.message) {\n        const fieldErrors = {};\n        const formErrors = [];\n        for (const sub of this.issues) {\n            if (sub.path.length > 0) {\n                fieldErrors[sub.path[0]] = fieldErrors[sub.path[0]] || [];\n                fieldErrors[sub.path[0]].push(mapper(sub));\n            }\n            else {\n                formErrors.push(mapper(sub));\n            }\n        }\n        return { formErrors, fieldErrors };\n    }\n    get formErrors() {\n        return this.flatten();\n    }\n}\nZodError.create = (issues) => {\n    const error = new ZodError(issues);\n    return error;\n};\n", "import { ZodIssueCode } from \"../ZodError.js\";\nimport { util, ZodParsedType } from \"../helpers/util.js\";\nconst errorMap = (issue, _ctx) => {\n    let message;\n    switch (issue.code) {\n        case ZodIssueCode.invalid_type:\n            if (issue.received === ZodParsedType.undefined) {\n                message = \"Required\";\n            }\n            else {\n                message = `Expected ${issue.expected}, received ${issue.received}`;\n            }\n            break;\n        case ZodIssueCode.invalid_literal:\n            message = `Invalid literal value, expected ${JSON.stringify(issue.expected, util.jsonStringifyReplacer)}`;\n            break;\n        case ZodIssueCode.unrecognized_keys:\n            message = `Unrecognized key(s) in object: ${util.joinValues(issue.keys, \", \")}`;\n            break;\n        case ZodIssueCode.invalid_union:\n            message = `Invalid input`;\n            break;\n        case ZodIssueCode.invalid_union_discriminator:\n            message = `Invalid discriminator value. Expected ${util.joinValues(issue.options)}`;\n            break;\n        case ZodIssueCode.invalid_enum_value:\n            message = `Invalid enum value. Expected ${util.joinValues(issue.options)}, received '${issue.received}'`;\n            break;\n        case ZodIssueCode.invalid_arguments:\n            message = `Invalid function arguments`;\n            break;\n        case ZodIssueCode.invalid_return_type:\n            message = `Invalid function return type`;\n            break;\n        case ZodIssueCode.invalid_date:\n            message = `Invalid date`;\n            break;\n        case ZodIssueCode.invalid_string:\n            if (typeof issue.validation === \"object\") {\n                if (\"includes\" in issue.validation) {\n                    message = `Invalid input: must include \"${issue.validation.includes}\"`;\n                    if (typeof issue.validation.position === \"number\") {\n                        message = `${message} at one or more positions greater than or equal to ${issue.validation.position}`;\n                    }\n                }\n                else if (\"startsWith\" in issue.validation) {\n                    message = `Invalid input: must start with \"${issue.validation.startsWith}\"`;\n                }\n                else if (\"endsWith\" in issue.validation) {\n                    message = `Invalid input: must end with \"${issue.validation.endsWith}\"`;\n                }\n                else {\n                    util.assertNever(issue.validation);\n                }\n            }\n            else if (issue.validation !== \"regex\") {\n                message = `Invalid ${issue.validation}`;\n            }\n            else {\n                message = \"Invalid\";\n            }\n            break;\n        case ZodIssueCode.too_small:\n            if (issue.type === \"array\")\n                message = `Array must contain ${issue.exact ? \"exactly\" : issue.inclusive ? `at least` : `more than`} ${issue.minimum} element(s)`;\n            else if (issue.type === \"string\")\n                message = `String must contain ${issue.exact ? \"exactly\" : issue.inclusive ? `at least` : `over`} ${issue.minimum} character(s)`;\n            else if (issue.type === \"number\")\n                message = `Number must be ${issue.exact ? `exactly equal to ` : issue.inclusive ? `greater than or equal to ` : `greater than `}${issue.minimum}`;\n            else if (issue.type === \"date\")\n                message = `Date must be ${issue.exact ? `exactly equal to ` : issue.inclusive ? `greater than or equal to ` : `greater than `}${new Date(Number(issue.minimum))}`;\n            else\n                message = \"Invalid input\";\n            break;\n        case ZodIssueCode.too_big:\n            if (issue.type === \"array\")\n                message = `Array must contain ${issue.exact ? `exactly` : issue.inclusive ? `at most` : `less than`} ${issue.maximum} element(s)`;\n            else if (issue.type === \"string\")\n                message = `String must contain ${issue.exact ? `exactly` : issue.inclusive ? `at most` : `under`} ${issue.maximum} character(s)`;\n            else if (issue.type === \"number\")\n                message = `Number must be ${issue.exact ? `exactly` : issue.inclusive ? `less than or equal to` : `less than`} ${issue.maximum}`;\n            else if (issue.type === \"bigint\")\n                message = `BigInt must be ${issue.exact ? `exactly` : issue.inclusive ? `less than or equal to` : `less than`} ${issue.maximum}`;\n            else if (issue.type === \"date\")\n                message = `Date must be ${issue.exact ? `exactly` : issue.inclusive ? `smaller than or equal to` : `smaller than`} ${new Date(Number(issue.maximum))}`;\n            else\n                message = \"Invalid input\";\n            break;\n        case ZodIssueCode.custom:\n            message = `Invalid input`;\n            break;\n        case ZodIssueCode.invalid_intersection_types:\n            message = `Intersection results could not be merged`;\n            break;\n        case ZodIssueCode.not_multiple_of:\n            message = `Number must be a multiple of ${issue.multipleOf}`;\n            break;\n        case ZodIssueCode.not_finite:\n            message = \"Number must be finite\";\n            break;\n        default:\n            message = _ctx.defaultError;\n            util.assertNever(issue);\n    }\n    return { message };\n};\nexport default errorMap;\n", "import defaultErrorMap from \"./locales/en.js\";\nlet overrideErrorMap = defaultErrorMap;\nexport { defaultErrorMap };\nexport function setErrorMap(map) {\n    overrideErrorMap = map;\n}\nexport function getErrorMap() {\n    return overrideErrorMap;\n}\n", "import { getErrorMap } from \"../errors.js\";\nimport defaultErrorMap from \"../locales/en.js\";\nexport const makeIssue = (params) => {\n    const { data, path, errorMaps, issueData } = params;\n    const fullPath = [...path, ...(issueData.path || [])];\n    const fullIssue = {\n        ...issueData,\n        path: fullPath,\n    };\n    if (issueData.message !== undefined) {\n        return {\n            ...issueData,\n            path: fullPath,\n            message: issueData.message,\n        };\n    }\n    let errorMessage = \"\";\n    const maps = errorMaps\n        .filter((m) => !!m)\n        .slice()\n        .reverse();\n    for (const map of maps) {\n        errorMessage = map(fullIssue, { data, defaultError: errorMessage }).message;\n    }\n    return {\n        ...issueData,\n        path: fullPath,\n        message: errorMessage,\n    };\n};\nexport const EMPTY_PATH = [];\nexport function addIssueToContext(ctx, issueData) {\n    const overrideMap = getErrorMap();\n    const issue = makeIssue({\n        issueData: issueData,\n        data: ctx.data,\n        path: ctx.path,\n        errorMaps: [\n            ctx.common.contextualErrorMap, // contextual error map is first priority\n            ctx.schemaErrorMap, // then schema-bound map if available\n            overrideMap, // then global override map\n            overrideMap === defaultErrorMap ? undefined : defaultErrorMap, // then global default map\n        ].filter((x) => !!x),\n    });\n    ctx.common.issues.push(issue);\n}\nexport class ParseStatus {\n    constructor() {\n        this.value = \"valid\";\n    }\n    dirty() {\n        if (this.value === \"valid\")\n            this.value = \"dirty\";\n    }\n    abort() {\n        if (this.value !== \"aborted\")\n            this.value = \"aborted\";\n    }\n    static mergeArray(status, results) {\n        const arrayValue = [];\n        for (const s of results) {\n            if (s.status === \"aborted\")\n                return INVALID;\n            if (s.status === \"dirty\")\n                status.dirty();\n            arrayValue.push(s.value);\n        }\n        return { status: status.value, value: arrayValue };\n    }\n    static async mergeObjectAsync(status, pairs) {\n        const syncPairs = [];\n        for (const pair of pairs) {\n            const key = await pair.key;\n            const value = await pair.value;\n            syncPairs.push({\n                key,\n                value,\n            });\n        }\n        return ParseStatus.mergeObjectSync(status, syncPairs);\n    }\n    static mergeObjectSync(status, pairs) {\n        const finalObject = {};\n        for (const pair of pairs) {\n            const { key, value } = pair;\n            if (key.status === \"aborted\")\n                return INVALID;\n            if (value.status === \"aborted\")\n                return INVALID;\n            if (key.status === \"dirty\")\n                status.dirty();\n            if (value.status === \"dirty\")\n                status.dirty();\n            if (key.value !== \"__proto__\" && (typeof value.value !== \"undefined\" || pair.alwaysSet)) {\n                finalObject[key.value] = value.value;\n            }\n        }\n        return { status: status.value, value: finalObject };\n    }\n}\nexport const INVALID = Object.freeze({\n    status: \"aborted\",\n});\nexport const DIRTY = (value) => ({ status: \"dirty\", value });\nexport const OK = (value) => ({ status: \"valid\", value });\nexport const isAborted = (x) => x.status === \"aborted\";\nexport const isDirty = (x) => x.status === \"dirty\";\nexport const isValid = (x) => x.status === \"valid\";\nexport const isAsync = (x) => typeof Promise !== \"undefined\" && x instanceof Promise;\n", "export var errorUtil;\n(function (errorUtil) {\n    errorUtil.errToObj = (message) => typeof message === \"string\" ? { message } : message || {};\n    // biome-ignore lint:\n    errorUtil.toString = (message) => typeof message === \"string\" ? message : message?.message;\n})(errorUtil || (errorUtil = {}));\n", "import { ZodError, ZodIssueCode, } from \"./ZodError.js\";\nimport { defaultErrorMap, getErrorMap } from \"./errors.js\";\nimport { errorUtil } from \"./helpers/errorUtil.js\";\nimport { DIRTY, INVALID, OK, ParseStatus, addIssueToContext, isAborted, isAsync, isDirty, isValid, makeIssue, } from \"./helpers/parseUtil.js\";\nimport { util, ZodParsedType, getParsedType } from \"./helpers/util.js\";\nclass ParseInputLazyPath {\n    constructor(parent, value, path, key) {\n        this._cachedPath = [];\n        this.parent = parent;\n        this.data = value;\n        this._path = path;\n        this._key = key;\n    }\n    get path() {\n        if (!this._cachedPath.length) {\n            if (Array.isArray(this._key)) {\n                this._cachedPath.push(...this._path, ...this._key);\n            }\n            else {\n                this._cachedPath.push(...this._path, this._key);\n            }\n        }\n        return this._cachedPath;\n    }\n}\nconst handleResult = (ctx, result) => {\n    if (isValid(result)) {\n        return { success: true, data: result.value };\n    }\n    else {\n        if (!ctx.common.issues.length) {\n            throw new Error(\"Validation failed but no issues detected.\");\n        }\n        return {\n            success: false,\n            get error() {\n                if (this._error)\n                    return this._error;\n                const error = new ZodError(ctx.common.issues);\n                this._error = error;\n                return this._error;\n            },\n        };\n    }\n};\nfunction processCreateParams(params) {\n    if (!params)\n        return {};\n    const { errorMap, invalid_type_error, required_error, description } = params;\n    if (errorMap && (invalid_type_error || required_error)) {\n        throw new Error(`Can't use \"invalid_type_error\" or \"required_error\" in conjunction with custom error map.`);\n    }\n    if (errorMap)\n        return { errorMap: errorMap, description };\n    const customMap = (iss, ctx) => {\n        const { message } = params;\n        if (iss.code === \"invalid_enum_value\") {\n            return { message: message ?? ctx.defaultError };\n        }\n        if (typeof ctx.data === \"undefined\") {\n            return { message: message ?? required_error ?? ctx.defaultError };\n        }\n        if (iss.code !== \"invalid_type\")\n            return { message: ctx.defaultError };\n        return { message: message ?? invalid_type_error ?? ctx.defaultError };\n    };\n    return { errorMap: customMap, description };\n}\nexport class ZodType {\n    get description() {\n        return this._def.description;\n    }\n    _getType(input) {\n        return getParsedType(input.data);\n    }\n    _getOrReturnCtx(input, ctx) {\n        return (ctx || {\n            common: input.parent.common,\n            data: input.data,\n            parsedType: getParsedType(input.data),\n            schemaErrorMap: this._def.errorMap,\n            path: input.path,\n            parent: input.parent,\n        });\n    }\n    _processInputParams(input) {\n        return {\n            status: new ParseStatus(),\n            ctx: {\n                common: input.parent.common,\n                data: input.data,\n                parsedType: getParsedType(input.data),\n                schemaErrorMap: this._def.errorMap,\n                path: input.path,\n                parent: input.parent,\n            },\n        };\n    }\n    _parseSync(input) {\n        const result = this._parse(input);\n        if (isAsync(result)) {\n            throw new Error(\"Synchronous parse encountered promise.\");\n        }\n        return result;\n    }\n    _parseAsync(input) {\n        const result = this._parse(input);\n        return Promise.resolve(result);\n    }\n    parse(data, params) {\n        const result = this.safeParse(data, params);\n        if (result.success)\n            return result.data;\n        throw result.error;\n    }\n    safeParse(data, params) {\n        const ctx = {\n            common: {\n                issues: [],\n                async: params?.async ?? false,\n                contextualErrorMap: params?.errorMap,\n            },\n            path: params?.path || [],\n            schemaErrorMap: this._def.errorMap,\n            parent: null,\n            data,\n            parsedType: getParsedType(data),\n        };\n        const result = this._parseSync({ data, path: ctx.path, parent: ctx });\n        return handleResult(ctx, result);\n    }\n    \"~validate\"(data) {\n        const ctx = {\n            common: {\n                issues: [],\n                async: !!this[\"~standard\"].async,\n            },\n            path: [],\n            schemaErrorMap: this._def.errorMap,\n            parent: null,\n            data,\n            parsedType: getParsedType(data),\n        };\n        if (!this[\"~standard\"].async) {\n            try {\n                const result = this._parseSync({ data, path: [], parent: ctx });\n                return isValid(result)\n                    ? {\n                        value: result.value,\n                    }\n                    : {\n                        issues: ctx.common.issues,\n                    };\n            }\n            catch (err) {\n                if (err?.message?.toLowerCase()?.includes(\"encountered\")) {\n                    this[\"~standard\"].async = true;\n                }\n                ctx.common = {\n                    issues: [],\n                    async: true,\n                };\n            }\n        }\n        return this._parseAsync({ data, path: [], parent: ctx }).then((result) => isValid(result)\n            ? {\n                value: result.value,\n            }\n            : {\n                issues: ctx.common.issues,\n            });\n    }\n    async parseAsync(data, params) {\n        const result = await this.safeParseAsync(data, params);\n        if (result.success)\n            return result.data;\n        throw result.error;\n    }\n    async safeParseAsync(data, params) {\n        const ctx = {\n            common: {\n                issues: [],\n                contextualErrorMap: params?.errorMap,\n                async: true,\n            },\n            path: params?.path || [],\n            schemaErrorMap: this._def.errorMap,\n            parent: null,\n            data,\n            parsedType: getParsedType(data),\n        };\n        const maybeAsyncResult = this._parse({ data, path: ctx.path, parent: ctx });\n        const result = await (isAsync(maybeAsyncResult) ? maybeAsyncResult : Promise.resolve(maybeAsyncResult));\n        return handleResult(ctx, result);\n    }\n    refine(check, message) {\n        const getIssueProperties = (val) => {\n            if (typeof message === \"string\" || typeof message === \"undefined\") {\n                return { message };\n            }\n            else if (typeof message === \"function\") {\n                return message(val);\n            }\n            else {\n                return message;\n            }\n        };\n        return this._refinement((val, ctx) => {\n            const result = check(val);\n            const setError = () => ctx.addIssue({\n                code: ZodIssueCode.custom,\n                ...getIssueProperties(val),\n            });\n            if (typeof Promise !== \"undefined\" && result instanceof Promise) {\n                return result.then((data) => {\n                    if (!data) {\n                        setError();\n                        return false;\n                    }\n                    else {\n                        return true;\n                    }\n                });\n            }\n            if (!result) {\n                setError();\n                return false;\n            }\n            else {\n                return true;\n            }\n        });\n    }\n    refinement(check, refinementData) {\n        return this._refinement((val, ctx) => {\n            if (!check(val)) {\n                ctx.addIssue(typeof refinementData === \"function\" ? refinementData(val, ctx) : refinementData);\n                return false;\n            }\n            else {\n                return true;\n            }\n        });\n    }\n    _refinement(refinement) {\n        return new ZodEffects({\n            schema: this,\n            typeName: ZodFirstPartyTypeKind.ZodEffects,\n            effect: { type: \"refinement\", refinement },\n        });\n    }\n    superRefine(refinement) {\n        return this._refinement(refinement);\n    }\n    constructor(def) {\n        /** Alias of safeParseAsync */\n        this.spa = this.safeParseAsync;\n        this._def = def;\n        this.parse = this.parse.bind(this);\n        this.safeParse = this.safeParse.bind(this);\n        this.parseAsync = this.parseAsync.bind(this);\n        this.safeParseAsync = this.safeParseAsync.bind(this);\n        this.spa = this.spa.bind(this);\n        this.refine = this.refine.bind(this);\n        this.refinement = this.refinement.bind(this);\n        this.superRefine = this.superRefine.bind(this);\n        this.optional = this.optional.bind(this);\n        this.nullable = this.nullable.bind(this);\n        this.nullish = this.nullish.bind(this);\n        this.array = this.array.bind(this);\n        this.promise = this.promise.bind(this);\n        this.or = this.or.bind(this);\n        this.and = this.and.bind(this);\n        this.transform = this.transform.bind(this);\n        this.brand = this.brand.bind(this);\n        this.default = this.default.bind(this);\n        this.catch = this.catch.bind(this);\n        this.describe = this.describe.bind(this);\n        this.pipe = this.pipe.bind(this);\n        this.readonly = this.readonly.bind(this);\n        this.isNullable = this.isNullable.bind(this);\n        this.isOptional = this.isOptional.bind(this);\n        this[\"~standard\"] = {\n            version: 1,\n            vendor: \"zod\",\n            validate: (data) => this[\"~validate\"](data),\n        };\n    }\n    optional() {\n        return ZodOptional.create(this, this._def);\n    }\n    nullable() {\n        return ZodNullable.create(this, this._def);\n    }\n    nullish() {\n        return this.nullable().optional();\n    }\n    array() {\n        return ZodArray.create(this);\n    }\n    promise() {\n        return ZodPromise.create(this, this._def);\n    }\n    or(option) {\n        return ZodUnion.create([this, option], this._def);\n    }\n    and(incoming) {\n        return ZodIntersection.create(this, incoming, this._def);\n    }\n    transform(transform) {\n        return new ZodEffects({\n            ...processCreateParams(this._def),\n            schema: this,\n            typeName: ZodFirstPartyTypeKind.ZodEffects,\n            effect: { type: \"transform\", transform },\n        });\n    }\n    default(def) {\n        const defaultValueFunc = typeof def === \"function\" ? def : () => def;\n        return new ZodDefault({\n            ...processCreateParams(this._def),\n            innerType: this,\n            defaultValue: defaultValueFunc,\n            typeName: ZodFirstPartyTypeKind.ZodDefault,\n        });\n    }\n    brand() {\n        return new ZodBranded({\n            typeName: ZodFirstPartyTypeKind.ZodBranded,\n            type: this,\n            ...processCreateParams(this._def),\n        });\n    }\n    catch(def) {\n        const catchValueFunc = typeof def === \"function\" ? def : () => def;\n        return new ZodCatch({\n            ...processCreateParams(this._def),\n            innerType: this,\n            catchValue: catchValueFunc,\n            typeName: ZodFirstPartyTypeKind.ZodCatch,\n        });\n    }\n    describe(description) {\n        const This = this.constructor;\n        return new This({\n            ...this._def,\n            description,\n        });\n    }\n    pipe(target) {\n        return ZodPipeline.create(this, target);\n    }\n    readonly() {\n        return ZodReadonly.create(this);\n    }\n    isOptional() {\n        return this.safeParse(undefined).success;\n    }\n    isNullable() {\n        return this.safeParse(null).success;\n    }\n}\nconst cuidRegex = /^c[^\\s-]{8,}$/i;\nconst cuid2Regex = /^[0-9a-z]+$/;\nconst ulidRegex = /^[0-9A-HJKMNP-TV-Z]{26}$/i;\n// const uuidRegex =\n//   /^([a-f0-9]{8}-[a-f0-9]{4}-[1-5][a-f0-9]{3}-[a-f0-9]{4}-[a-f0-9]{12}|00000000-0000-0000-0000-000000000000)$/i;\nconst uuidRegex = /^[0-9a-fA-F]{8}\\b-[0-9a-fA-F]{4}\\b-[0-9a-fA-F]{4}\\b-[0-9a-fA-F]{4}\\b-[0-9a-fA-F]{12}$/i;\nconst nanoidRegex = /^[a-z0-9_-]{21}$/i;\nconst jwtRegex = /^[A-Za-z0-9-_]+\\.[A-Za-z0-9-_]+\\.[A-Za-z0-9-_]*$/;\nconst durationRegex = /^[-+]?P(?!$)(?:(?:[-+]?\\d+Y)|(?:[-+]?\\d+[.,]\\d+Y$))?(?:(?:[-+]?\\d+M)|(?:[-+]?\\d+[.,]\\d+M$))?(?:(?:[-+]?\\d+W)|(?:[-+]?\\d+[.,]\\d+W$))?(?:(?:[-+]?\\d+D)|(?:[-+]?\\d+[.,]\\d+D$))?(?:T(?=[\\d+-])(?:(?:[-+]?\\d+H)|(?:[-+]?\\d+[.,]\\d+H$))?(?:(?:[-+]?\\d+M)|(?:[-+]?\\d+[.,]\\d+M$))?(?:[-+]?\\d+(?:[.,]\\d+)?S)?)??$/;\n// from https://stackoverflow.com/a/46181/1550155\n// old version: too slow, didn't support unicode\n// const emailRegex = /^((([a-z]|\\d|[!#\\$%&'\\*\\+\\-\\/=\\?\\^_`{\\|}~]|[\\u00A0-\\uD7FF\\uF900-\\uFDCF\\uFDF0-\\uFFEF])+(\\.([a-z]|\\d|[!#\\$%&'\\*\\+\\-\\/=\\?\\^_`{\\|}~]|[\\u00A0-\\uD7FF\\uF900-\\uFDCF\\uFDF0-\\uFFEF])+)*)|((\\x22)((((\\x20|\\x09)*(\\x0d\\x0a))?(\\x20|\\x09)+)?(([\\x01-\\x08\\x0b\\x0c\\x0e-\\x1f\\x7f]|\\x21|[\\x23-\\x5b]|[\\x5d-\\x7e]|[\\u00A0-\\uD7FF\\uF900-\\uFDCF\\uFDF0-\\uFFEF])|(\\\\([\\x01-\\x09\\x0b\\x0c\\x0d-\\x7f]|[\\u00A0-\\uD7FF\\uF900-\\uFDCF\\uFDF0-\\uFFEF]))))*(((\\x20|\\x09)*(\\x0d\\x0a))?(\\x20|\\x09)+)?(\\x22)))@((([a-z]|\\d|[\\u00A0-\\uD7FF\\uF900-\\uFDCF\\uFDF0-\\uFFEF])|(([a-z]|\\d|[\\u00A0-\\uD7FF\\uF900-\\uFDCF\\uFDF0-\\uFFEF])([a-z]|\\d|-|\\.|_|~|[\\u00A0-\\uD7FF\\uF900-\\uFDCF\\uFDF0-\\uFFEF])*([a-z]|\\d|[\\u00A0-\\uD7FF\\uF900-\\uFDCF\\uFDF0-\\uFFEF])))\\.)+(([a-z]|[\\u00A0-\\uD7FF\\uF900-\\uFDCF\\uFDF0-\\uFFEF])|(([a-z]|[\\u00A0-\\uD7FF\\uF900-\\uFDCF\\uFDF0-\\uFFEF])([a-z]|\\d|-|\\.|_|~|[\\u00A0-\\uD7FF\\uF900-\\uFDCF\\uFDF0-\\uFFEF])*([a-z]|[\\u00A0-\\uD7FF\\uF900-\\uFDCF\\uFDF0-\\uFFEF])))$/i;\n//old email regex\n// const emailRegex = /^(([^<>()[\\].,;:\\s@\"]+(\\.[^<>()[\\].,;:\\s@\"]+)*)|(\".+\"))@((?!-)([^<>()[\\].,;:\\s@\"]+\\.)+[^<>()[\\].,;:\\s@\"]{1,})[^-<>()[\\].,;:\\s@\"]$/i;\n// eslint-disable-next-line\n// const emailRegex =\n//   /^(([^<>()[\\]\\\\.,;:\\s@\\\"]+(\\.[^<>()[\\]\\\\.,;:\\s@\\\"]+)*)|(\\\".+\\\"))@((\\[(((25[0-5])|(2[0-4][0-9])|(1[0-9]{2})|([0-9]{1,2}))\\.){3}((25[0-5])|(2[0-4][0-9])|(1[0-9]{2})|([0-9]{1,2}))\\])|(\\[IPv6:(([a-f0-9]{1,4}:){7}|::([a-f0-9]{1,4}:){0,6}|([a-f0-9]{1,4}:){1}:([a-f0-9]{1,4}:){0,5}|([a-f0-9]{1,4}:){2}:([a-f0-9]{1,4}:){0,4}|([a-f0-9]{1,4}:){3}:([a-f0-9]{1,4}:){0,3}|([a-f0-9]{1,4}:){4}:([a-f0-9]{1,4}:){0,2}|([a-f0-9]{1,4}:){5}:([a-f0-9]{1,4}:){0,1})([a-f0-9]{1,4}|(((25[0-5])|(2[0-4][0-9])|(1[0-9]{2})|([0-9]{1,2}))\\.){3}((25[0-5])|(2[0-4][0-9])|(1[0-9]{2})|([0-9]{1,2})))\\])|([A-Za-z0-9]([A-Za-z0-9-]*[A-Za-z0-9])*(\\.[A-Za-z]{2,})+))$/;\n// const emailRegex =\n//   /^[a-zA-Z0-9\\.\\!\\#\\$\\%\\&\\'\\*\\+\\/\\=\\?\\^\\_\\`\\{\\|\\}\\~\\-]+@[a-zA-Z0-9](?:[a-zA-Z0-9-]{0,61}[a-zA-Z0-9])?(?:\\.[a-zA-Z0-9](?:[a-zA-Z0-9-]{0,61}[a-zA-Z0-9])?)*$/;\n// const emailRegex =\n//   /^(?:[a-z0-9!#$%&'*+/=?^_`{|}~-]+(?:\\.[a-z0-9!#$%&'*+/=?^_`{|}~-]+)*|\"(?:[\\x01-\\x08\\x0b\\x0c\\x0e-\\x1f\\x21\\x23-\\x5b\\x5d-\\x7f]|\\\\[\\x01-\\x09\\x0b\\x0c\\x0e-\\x7f])*\")@(?:(?:[a-z0-9](?:[a-z0-9-]*[a-z0-9])?\\.)+[a-z0-9](?:[a-z0-9-]*[a-z0-9])?|\\[(?:(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)\\.){3}(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?|[a-z0-9-]*[a-z0-9]:(?:[\\x01-\\x08\\x0b\\x0c\\x0e-\\x1f\\x21-\\x5a\\x53-\\x7f]|\\\\[\\x01-\\x09\\x0b\\x0c\\x0e-\\x7f])+)\\])$/i;\nconst emailRegex = /^(?!\\.)(?!.*\\.\\.)([A-Z0-9_'+\\-\\.]*)[A-Z0-9_+-]@([A-Z0-9][A-Z0-9\\-]*\\.)+[A-Z]{2,}$/i;\n// const emailRegex =\n//   /^[a-z0-9.!#$%&\u2019*+/=?^_`{|}~-]+@[a-z0-9-]+(?:\\.[a-z0-9\\-]+)*$/i;\n// from https://thekevinscott.com/emojis-in-javascript/#writing-a-regular-expression\nconst _emojiRegex = `^(\\\\p{Extended_Pictographic}|\\\\p{Emoji_Component})+$`;\nlet emojiRegex;\n// faster, simpler, safer\nconst ipv4Regex = /^(?:(?:25[0-5]|2[0-4][0-9]|1[0-9][0-9]|[1-9][0-9]|[0-9])\\.){3}(?:25[0-5]|2[0-4][0-9]|1[0-9][0-9]|[1-9][0-9]|[0-9])$/;\nconst ipv4CidrRegex = /^(?:(?:25[0-5]|2[0-4][0-9]|1[0-9][0-9]|[1-9][0-9]|[0-9])\\.){3}(?:25[0-5]|2[0-4][0-9]|1[0-9][0-9]|[1-9][0-9]|[0-9])\\/(3[0-2]|[12]?[0-9])$/;\n// const ipv6Regex =\n// /^(([a-f0-9]{1,4}:){7}|::([a-f0-9]{1,4}:){0,6}|([a-f0-9]{1,4}:){1}:([a-f0-9]{1,4}:){0,5}|([a-f0-9]{1,4}:){2}:([a-f0-9]{1,4}:){0,4}|([a-f0-9]{1,4}:){3}:([a-f0-9]{1,4}:){0,3}|([a-f0-9]{1,4}:){4}:([a-f0-9]{1,4}:){0,2}|([a-f0-9]{1,4}:){5}:([a-f0-9]{1,4}:){0,1})([a-f0-9]{1,4}|(((25[0-5])|(2[0-4][0-9])|(1[0-9]{2})|([0-9]{1,2}))\\.){3}((25[0-5])|(2[0-4][0-9])|(1[0-9]{2})|([0-9]{1,2})))$/;\nconst ipv6Regex = /^(([0-9a-fA-F]{1,4}:){7,7}[0-9a-fA-F]{1,4}|([0-9a-fA-F]{1,4}:){1,7}:|([0-9a-fA-F]{1,4}:){1,6}:[0-9a-fA-F]{1,4}|([0-9a-fA-F]{1,4}:){1,5}(:[0-9a-fA-F]{1,4}){1,2}|([0-9a-fA-F]{1,4}:){1,4}(:[0-9a-fA-F]{1,4}){1,3}|([0-9a-fA-F]{1,4}:){1,3}(:[0-9a-fA-F]{1,4}){1,4}|([0-9a-fA-F]{1,4}:){1,2}(:[0-9a-fA-F]{1,4}){1,5}|[0-9a-fA-F]{1,4}:((:[0-9a-fA-F]{1,4}){1,6})|:((:[0-9a-fA-F]{1,4}){1,7}|:)|fe80:(:[0-9a-fA-F]{0,4}){0,4}%[0-9a-zA-Z]{1,}|::(ffff(:0{1,4}){0,1}:){0,1}((25[0-5]|(2[0-4]|1{0,1}[0-9]){0,1}[0-9])\\.){3,3}(25[0-5]|(2[0-4]|1{0,1}[0-9]){0,1}[0-9])|([0-9a-fA-F]{1,4}:){1,4}:((25[0-5]|(2[0-4]|1{0,1}[0-9]){0,1}[0-9])\\.){3,3}(25[0-5]|(2[0-4]|1{0,1}[0-9]){0,1}[0-9]))$/;\nconst ipv6CidrRegex = /^(([0-9a-fA-F]{1,4}:){7,7}[0-9a-fA-F]{1,4}|([0-9a-fA-F]{1,4}:){1,7}:|([0-9a-fA-F]{1,4}:){1,6}:[0-9a-fA-F]{1,4}|([0-9a-fA-F]{1,4}:){1,5}(:[0-9a-fA-F]{1,4}){1,2}|([0-9a-fA-F]{1,4}:){1,4}(:[0-9a-fA-F]{1,4}){1,3}|([0-9a-fA-F]{1,4}:){1,3}(:[0-9a-fA-F]{1,4}){1,4}|([0-9a-fA-F]{1,4}:){1,2}(:[0-9a-fA-F]{1,4}){1,5}|[0-9a-fA-F]{1,4}:((:[0-9a-fA-F]{1,4}){1,6})|:((:[0-9a-fA-F]{1,4}){1,7}|:)|fe80:(:[0-9a-fA-F]{0,4}){0,4}%[0-9a-zA-Z]{1,}|::(ffff(:0{1,4}){0,1}:){0,1}((25[0-5]|(2[0-4]|1{0,1}[0-9]){0,1}[0-9])\\.){3,3}(25[0-5]|(2[0-4]|1{0,1}[0-9]){0,1}[0-9])|([0-9a-fA-F]{1,4}:){1,4}:((25[0-5]|(2[0-4]|1{0,1}[0-9]){0,1}[0-9])\\.){3,3}(25[0-5]|(2[0-4]|1{0,1}[0-9]){0,1}[0-9]))\\/(12[0-8]|1[01][0-9]|[1-9]?[0-9])$/;\n// https://stackoverflow.com/questions/7860392/determine-if-string-is-in-base64-using-javascript\nconst base64Regex = /^([0-9a-zA-Z+/]{4})*(([0-9a-zA-Z+/]{2}==)|([0-9a-zA-Z+/]{3}=))?$/;\n// https://base64.guru/standards/base64url\nconst base64urlRegex = /^([0-9a-zA-Z-_]{4})*(([0-9a-zA-Z-_]{2}(==)?)|([0-9a-zA-Z-_]{3}(=)?))?$/;\n// simple\n// const dateRegexSource = `\\\\d{4}-\\\\d{2}-\\\\d{2}`;\n// no leap year validation\n// const dateRegexSource = `\\\\d{4}-((0[13578]|10|12)-31|(0[13-9]|1[0-2])-30|(0[1-9]|1[0-2])-(0[1-9]|1\\\\d|2\\\\d))`;\n// with leap year validation\nconst dateRegexSource = `((\\\\d\\\\d[2468][048]|\\\\d\\\\d[13579][26]|\\\\d\\\\d0[48]|[02468][048]00|[13579][26]00)-02-29|\\\\d{4}-((0[13578]|1[02])-(0[1-9]|[12]\\\\d|3[01])|(0[469]|11)-(0[1-9]|[12]\\\\d|30)|(02)-(0[1-9]|1\\\\d|2[0-8])))`;\nconst dateRegex = new RegExp(`^${dateRegexSource}$`);\nfunction timeRegexSource(args) {\n    let secondsRegexSource = `[0-5]\\\\d`;\n    if (args.precision) {\n        secondsRegexSource = `${secondsRegexSource}\\\\.\\\\d{${args.precision}}`;\n    }\n    else if (args.precision == null) {\n        secondsRegexSource = `${secondsRegexSource}(\\\\.\\\\d+)?`;\n    }\n    const secondsQuantifier = args.precision ? \"+\" : \"?\"; // require seconds if precision is nonzero\n    return `([01]\\\\d|2[0-3]):[0-5]\\\\d(:${secondsRegexSource})${secondsQuantifier}`;\n}\nfunction timeRegex(args) {\n    return new RegExp(`^${timeRegexSource(args)}$`);\n}\n// Adapted from https://stackoverflow.com/a/3143231\nexport function datetimeRegex(args) {\n    let regex = `${dateRegexSource}T${timeRegexSource(args)}`;\n    const opts = [];\n    opts.push(args.local ? `Z?` : `Z`);\n    if (args.offset)\n        opts.push(`([+-]\\\\d{2}:?\\\\d{2})`);\n    regex = `${regex}(${opts.join(\"|\")})`;\n    return new RegExp(`^${regex}$`);\n}\nfunction isValidIP(ip, version) {\n    if ((version === \"v4\" || !version) && ipv4Regex.test(ip)) {\n        return true;\n    }\n    if ((version === \"v6\" || !version) && ipv6Regex.test(ip)) {\n        return true;\n    }\n    return false;\n}\nfunction isValidJWT(jwt, alg) {\n    if (!jwtRegex.test(jwt))\n        return false;\n    try {\n        const [header] = jwt.split(\".\");\n        // Convert base64url to base64\n        const base64 = header\n            .replace(/-/g, \"+\")\n            .replace(/_/g, \"/\")\n            .padEnd(header.length + ((4 - (header.length % 4)) % 4), \"=\");\n        const decoded = JSON.parse(atob(base64));\n        if (typeof decoded !== \"object\" || decoded === null)\n            return false;\n        if (\"typ\" in decoded && decoded?.typ !== \"JWT\")\n            return false;\n        if (!decoded.alg)\n            return false;\n        if (alg && decoded.alg !== alg)\n            return false;\n        return true;\n    }\n    catch {\n        return false;\n    }\n}\nfunction isValidCidr(ip, version) {\n    if ((version === \"v4\" || !version) && ipv4CidrRegex.test(ip)) {\n        return true;\n    }\n    if ((version === \"v6\" || !version) && ipv6CidrRegex.test(ip)) {\n        return true;\n    }\n    return false;\n}\nexport class ZodString extends ZodType {\n    _parse(input) {\n        if (this._def.coerce) {\n            input.data = String(input.data);\n        }\n        const parsedType = this._getType(input);\n        if (parsedType !== ZodParsedType.string) {\n            const ctx = this._getOrReturnCtx(input);\n            addIssueToContext(ctx, {\n                code: ZodIssueCode.invalid_type,\n                expected: ZodParsedType.string,\n                received: ctx.parsedType,\n            });\n            return INVALID;\n        }\n        const status = new ParseStatus();\n        let ctx = undefined;\n        for (const check of this._def.checks) {\n            if (check.kind === \"min\") {\n                if (input.data.length < check.value) {\n                    ctx = this._getOrReturnCtx(input, ctx);\n                    addIssueToContext(ctx, {\n                        code: ZodIssueCode.too_small,\n                        minimum: check.value,\n                        type: \"string\",\n                        inclusive: true,\n                        exact: false,\n                        message: check.message,\n                    });\n                    status.dirty();\n                }\n            }\n            else if (check.kind === \"max\") {\n                if (input.data.length > check.value) {\n                    ctx = this._getOrReturnCtx(input, ctx);\n                    addIssueToContext(ctx, {\n                        code: ZodIssueCode.too_big,\n                        maximum: check.value,\n                        type: \"string\",\n                        inclusive: true,\n                        exact: false,\n                        message: check.message,\n                    });\n                    status.dirty();\n                }\n            }\n            else if (check.kind === \"length\") {\n                const tooBig = input.data.length > check.value;\n                const tooSmall = input.data.length < check.value;\n                if (tooBig || tooSmall) {\n                    ctx = this._getOrReturnCtx(input, ctx);\n                    if (tooBig) {\n                        addIssueToContext(ctx, {\n                            code: ZodIssueCode.too_big,\n                            maximum: check.value,\n                            type: \"string\",\n                            inclusive: true,\n                            exact: true,\n                            message: check.message,\n                        });\n                    }\n                    else if (tooSmall) {\n                        addIssueToContext(ctx, {\n                            code: ZodIssueCode.too_small,\n                            minimum: check.value,\n                            type: \"string\",\n                            inclusive: true,\n                            exact: true,\n                            message: check.message,\n                        });\n                    }\n                    status.dirty();\n                }\n            }\n            else if (check.kind === \"email\") {\n                if (!emailRegex.test(input.data)) {\n                    ctx = this._getOrReturnCtx(input, ctx);\n                    addIssueToContext(ctx, {\n                        validation: \"email\",\n                        code: ZodIssueCode.invalid_string,\n                        message: check.message,\n                    });\n                    status.dirty();\n                }\n            }\n            else if (check.kind === \"emoji\") {\n                if (!emojiRegex) {\n                    emojiRegex = new RegExp(_emojiRegex, \"u\");\n                }\n                if (!emojiRegex.test(input.data)) {\n                    ctx = this._getOrReturnCtx(input, ctx);\n                    addIssueToContext(ctx, {\n                        validation: \"emoji\",\n                        code: ZodIssueCode.invalid_string,\n                        message: check.message,\n                    });\n                    status.dirty();\n                }\n            }\n            else if (check.kind === \"uuid\") {\n                if (!uuidRegex.test(input.data)) {\n                    ctx = this._getOrReturnCtx(input, ctx);\n                    addIssueToContext(ctx, {\n                        validation: \"uuid\",\n                        code: ZodIssueCode.invalid_string,\n                        message: check.message,\n                    });\n                    status.dirty();\n                }\n            }\n            else if (check.kind === \"nanoid\") {\n                if (!nanoidRegex.test(input.data)) {\n                    ctx = this._getOrReturnCtx(input, ctx);\n                    addIssueToContext(ctx, {\n                        validation: \"nanoid\",\n                        code: ZodIssueCode.invalid_string,\n                        message: check.message,\n                    });\n                    status.dirty();\n                }\n            }\n            else if (check.kind === \"cuid\") {\n                if (!cuidRegex.test(input.data)) {\n                    ctx = this._getOrReturnCtx(input, ctx);\n                    addIssueToContext(ctx, {\n                        validation: \"cuid\",\n                        code: ZodIssueCode.invalid_string,\n                        message: check.message,\n                    });\n                    status.dirty();\n                }\n            }\n            else if (check.kind === \"cuid2\") {\n                if (!cuid2Regex.test(input.data)) {\n                    ctx = this._getOrReturnCtx(input, ctx);\n                    addIssueToContext(ctx, {\n                        validation: \"cuid2\",\n                        code: ZodIssueCode.invalid_string,\n                        message: check.message,\n                    });\n                    status.dirty();\n                }\n            }\n            else if (check.kind === \"ulid\") {\n                if (!ulidRegex.test(input.data)) {\n                    ctx = this._getOrReturnCtx(input, ctx);\n                    addIssueToContext(ctx, {\n                        validation: \"ulid\",\n                        code: ZodIssueCode.invalid_string,\n                        message: check.message,\n                    });\n                    status.dirty();\n                }\n            }\n            else if (check.kind === \"url\") {\n                try {\n                    new URL(input.data);\n                }\n                catch {\n                    ctx = this._getOrReturnCtx(input, ctx);\n                    addIssueToContext(ctx, {\n                        validation: \"url\",\n                        code: ZodIssueCode.invalid_string,\n                        message: check.message,\n                    });\n                    status.dirty();\n                }\n            }\n            else if (check.kind === \"regex\") {\n                check.regex.lastIndex = 0;\n                const testResult = check.regex.test(input.data);\n                if (!testResult) {\n                    ctx = this._getOrReturnCtx(input, ctx);\n                    addIssueToContext(ctx, {\n                        validation: \"regex\",\n                        code: ZodIssueCode.invalid_string,\n                        message: check.message,\n                    });\n                    status.dirty();\n                }\n            }\n            else if (check.kind === \"trim\") {\n                input.data = input.data.trim();\n            }\n            else if (check.kind === \"includes\") {\n                if (!input.data.includes(check.value, check.position)) {\n                    ctx = this._getOrReturnCtx(input, ctx);\n                    addIssueToContext(ctx, {\n                        code: ZodIssueCode.invalid_string,\n                        validation: { includes: check.value, position: check.position },\n                        message: check.message,\n                    });\n                    status.dirty();\n                }\n            }\n            else if (check.kind === \"toLowerCase\") {\n                input.data = input.data.toLowerCase();\n            }\n            else if (check.kind === \"toUpperCase\") {\n                input.data = input.data.toUpperCase();\n            }\n            else if (check.kind === \"startsWith\") {\n                if (!input.data.startsWith(check.value)) {\n                    ctx = this._getOrReturnCtx(input, ctx);\n                    addIssueToContext(ctx, {\n                        code: ZodIssueCode.invalid_string,\n                        validation: { startsWith: check.value },\n                        message: check.message,\n                    });\n                    status.dirty();\n                }\n            }\n            else if (check.kind === \"endsWith\") {\n                if (!input.data.endsWith(check.value)) {\n                    ctx = this._getOrReturnCtx(input, ctx);\n                    addIssueToContext(ctx, {\n                        code: ZodIssueCode.invalid_string,\n                        validation: { endsWith: check.value },\n                        message: check.message,\n                    });\n                    status.dirty();\n                }\n            }\n            else if (check.kind === \"datetime\") {\n                const regex = datetimeRegex(check);\n                if (!regex.test(input.data)) {\n                    ctx = this._getOrReturnCtx(input, ctx);\n                    addIssueToContext(ctx, {\n                        code: ZodIssueCode.invalid_string,\n                        validation: \"datetime\",\n                        message: check.message,\n                    });\n                    status.dirty();\n                }\n            }\n            else if (check.kind === \"date\") {\n                const regex = dateRegex;\n                if (!regex.test(input.data)) {\n                    ctx = this._getOrReturnCtx(input, ctx);\n                    addIssueToContext(ctx, {\n                        code: ZodIssueCode.invalid_string,\n                        validation: \"date\",\n                        message: check.message,\n                    });\n                    status.dirty();\n                }\n            }\n            else if (check.kind === \"time\") {\n                const regex = timeRegex(check);\n                if (!regex.test(input.data)) {\n                    ctx = this._getOrReturnCtx(input, ctx);\n                    addIssueToContext(ctx, {\n                        code: ZodIssueCode.invalid_string,\n                        validation: \"time\",\n                        message: check.message,\n                    });\n                    status.dirty();\n                }\n            }\n            else if (check.kind === \"duration\") {\n                if (!durationRegex.test(input.data)) {\n                    ctx = this._getOrReturnCtx(input, ctx);\n                    addIssueToContext(ctx, {\n                        validation: \"duration\",\n                        code: ZodIssueCode.invalid_string,\n                        message: check.message,\n                    });\n                    status.dirty();\n                }\n            }\n            else if (check.kind === \"ip\") {\n                if (!isValidIP(input.data, check.version)) {\n                    ctx = this._getOrReturnCtx(input, ctx);\n                    addIssueToContext(ctx, {\n                        validation: \"ip\",\n                        code: ZodIssueCode.invalid_string,\n                        message: check.message,\n                    });\n                    status.dirty();\n                }\n            }\n            else if (check.kind === \"jwt\") {\n                if (!isValidJWT(input.data, check.alg)) {\n                    ctx = this._getOrReturnCtx(input, ctx);\n                    addIssueToContext(ctx, {\n                        validation: \"jwt\",\n                        code: ZodIssueCode.invalid_string,\n                        message: check.message,\n                    });\n                    status.dirty();\n                }\n            }\n            else if (check.kind === \"cidr\") {\n                if (!isValidCidr(input.data, check.version)) {\n                    ctx = this._getOrReturnCtx(input, ctx);\n                    addIssueToContext(ctx, {\n                        validation: \"cidr\",\n                        code: ZodIssueCode.invalid_string,\n                        message: check.message,\n                    });\n                    status.dirty();\n                }\n            }\n            else if (check.kind === \"base64\") {\n                if (!base64Regex.test(input.data)) {\n                    ctx = this._getOrReturnCtx(input, ctx);\n                    addIssueToContext(ctx, {\n                        validation: \"base64\",\n                        code: ZodIssueCode.invalid_string,\n                        message: check.message,\n                    });\n                    status.dirty();\n                }\n            }\n            else if (check.kind === \"base64url\") {\n                if (!base64urlRegex.test(input.data)) {\n                    ctx = this._getOrReturnCtx(input, ctx);\n                    addIssueToContext(ctx, {\n                        validation: \"base64url\",\n                        code: ZodIssueCode.invalid_string,\n                        message: check.message,\n                    });\n                    status.dirty();\n                }\n            }\n            else {\n                util.assertNever(check);\n            }\n        }\n        return { status: status.value, value: input.data };\n    }\n    _regex(regex, validation, message) {\n        return this.refinement((data) => regex.test(data), {\n            validation,\n            code: ZodIssueCode.invalid_string,\n            ...errorUtil.errToObj(message),\n        });\n    }\n    _addCheck(check) {\n        return new ZodString({\n            ...this._def,\n            checks: [...this._def.checks, check],\n        });\n    }\n    email(message) {\n        return this._addCheck({ kind: \"email\", ...errorUtil.errToObj(message) });\n    }\n    url(message) {\n        return this._addCheck({ kind: \"url\", ...errorUtil.errToObj(message) });\n    }\n    emoji(message) {\n        return this._addCheck({ kind: \"emoji\", ...errorUtil.errToObj(message) });\n    }\n    uuid(message) {\n        return this._addCheck({ kind: \"uuid\", ...errorUtil.errToObj(message) });\n    }\n    nanoid(message) {\n        return this._addCheck({ kind: \"nanoid\", ...errorUtil.errToObj(message) });\n    }\n    cuid(message) {\n        return this._addCheck({ kind: \"cuid\", ...errorUtil.errToObj(message) });\n    }\n    cuid2(message) {\n        return this._addCheck({ kind: \"cuid2\", ...errorUtil.errToObj(message) });\n    }\n    ulid(message) {\n        return this._addCheck({ kind: \"ulid\", ...errorUtil.errToObj(message) });\n    }\n    base64(message) {\n        return this._addCheck({ kind: \"base64\", ...errorUtil.errToObj(message) });\n    }\n    base64url(message) {\n        // base64url encoding is a modification of base64 that can safely be used in URLs and filenames\n        return this._addCheck({\n            kind: \"base64url\",\n            ...errorUtil.errToObj(message),\n        });\n    }\n    jwt(options) {\n        return this._addCheck({ kind: \"jwt\", ...errorUtil.errToObj(options) });\n    }\n    ip(options) {\n        return this._addCheck({ kind: \"ip\", ...errorUtil.errToObj(options) });\n    }\n    cidr(options) {\n        return this._addCheck({ kind: \"cidr\", ...errorUtil.errToObj(options) });\n    }\n    datetime(options) {\n        if (typeof options === \"string\") {\n            return this._addCheck({\n                kind: \"datetime\",\n                precision: null,\n                offset: false,\n                local: false,\n                message: options,\n            });\n        }\n        return this._addCheck({\n            kind: \"datetime\",\n            precision: typeof options?.precision === \"undefined\" ? null : options?.precision,\n            offset: options?.offset ?? false,\n            local: options?.local ?? false,\n            ...errorUtil.errToObj(options?.message),\n        });\n    }\n    date(message) {\n        return this._addCheck({ kind: \"date\", message });\n    }\n    time(options) {\n        if (typeof options === \"string\") {\n            return this._addCheck({\n                kind: \"time\",\n                precision: null,\n                message: options,\n            });\n        }\n        return this._addCheck({\n            kind: \"time\",\n            precision: typeof options?.precision === \"undefined\" ? null : options?.precision,\n            ...errorUtil.errToObj(options?.message),\n        });\n    }\n    duration(message) {\n        return this._addCheck({ kind: \"duration\", ...errorUtil.errToObj(message) });\n    }\n    regex(regex, message) {\n        return this._addCheck({\n            kind: \"regex\",\n            regex: regex,\n            ...errorUtil.errToObj(message),\n        });\n    }\n    includes(value, options) {\n        return this._addCheck({\n            kind: \"includes\",\n            value: value,\n            position: options?.position,\n            ...errorUtil.errToObj(options?.message),\n        });\n    }\n    startsWith(value, message) {\n        return this._addCheck({\n            kind: \"startsWith\",\n            value: value,\n            ...errorUtil.errToObj(message),\n        });\n    }\n    endsWith(value, message) {\n        return this._addCheck({\n            kind: \"endsWith\",\n            value: value,\n            ...errorUtil.errToObj(message),\n        });\n    }\n    min(minLength, message) {\n        return this._addCheck({\n            kind: \"min\",\n            value: minLength,\n            ...errorUtil.errToObj(message),\n        });\n    }\n    max(maxLength, message) {\n        return this._addCheck({\n            kind: \"max\",\n            value: maxLength,\n            ...errorUtil.errToObj(message),\n        });\n    }\n    length(len, message) {\n        return this._addCheck({\n            kind: \"length\",\n            value: len,\n            ...errorUtil.errToObj(message),\n        });\n    }\n    /**\n     * Equivalent to `.min(1)`\n     */\n    nonempty(message) {\n        return this.min(1, errorUtil.errToObj(message));\n    }\n    trim() {\n        return new ZodString({\n            ...this._def,\n            checks: [...this._def.checks, { kind: \"trim\" }],\n        });\n    }\n    toLowerCase() {\n        return new ZodString({\n            ...this._def,\n            checks: [...this._def.checks, { kind: \"toLowerCase\" }],\n        });\n    }\n    toUpperCase() {\n        return new ZodString({\n            ...this._def,\n            checks: [...this._def.checks, { kind: \"toUpperCase\" }],\n        });\n    }\n    get isDatetime() {\n        return !!this._def.checks.find((ch) => ch.kind === \"datetime\");\n    }\n    get isDate() {\n        return !!this._def.checks.find((ch) => ch.kind === \"date\");\n    }\n    get isTime() {\n        return !!this._def.checks.find((ch) => ch.kind === \"time\");\n    }\n    get isDuration() {\n        return !!this._def.checks.find((ch) => ch.kind === \"duration\");\n    }\n    get isEmail() {\n        return !!this._def.checks.find((ch) => ch.kind === \"email\");\n    }\n    get isURL() {\n        return !!this._def.checks.find((ch) => ch.kind === \"url\");\n    }\n    get isEmoji() {\n        return !!this._def.checks.find((ch) => ch.kind === \"emoji\");\n    }\n    get isUUID() {\n        return !!this._def.checks.find((ch) => ch.kind === \"uuid\");\n    }\n    get isNANOID() {\n        return !!this._def.checks.find((ch) => ch.kind === \"nanoid\");\n    }\n    get isCUID() {\n        return !!this._def.checks.find((ch) => ch.kind === \"cuid\");\n    }\n    get isCUID2() {\n        return !!this._def.checks.find((ch) => ch.kind === \"cuid2\");\n    }\n    get isULID() {\n        return !!this._def.checks.find((ch) => ch.kind === \"ulid\");\n    }\n    get isIP() {\n        return !!this._def.checks.find((ch) => ch.kind === \"ip\");\n    }\n    get isCIDR() {\n        return !!this._def.checks.find((ch) => ch.kind === \"cidr\");\n    }\n    get isBase64() {\n        return !!this._def.checks.find((ch) => ch.kind === \"base64\");\n    }\n    get isBase64url() {\n        // base64url encoding is a modification of base64 that can safely be used in URLs and filenames\n        return !!this._def.checks.find((ch) => ch.kind === \"base64url\");\n    }\n    get minLength() {\n        let min = null;\n        for (const ch of this._def.checks) {\n            if (ch.kind === \"min\") {\n                if (min === null || ch.value > min)\n                    min = ch.value;\n            }\n        }\n        return min;\n    }\n    get maxLength() {\n        let max = null;\n        for (const ch of this._def.checks) {\n            if (ch.kind === \"max\") {\n                if (max === null || ch.value < max)\n                    max = ch.value;\n            }\n        }\n        return max;\n    }\n}\nZodString.create = (params) => {\n    return new ZodString({\n        checks: [],\n        typeName: ZodFirstPartyTypeKind.ZodString,\n        coerce: params?.coerce ?? false,\n        ...processCreateParams(params),\n    });\n};\n// https://stackoverflow.com/questions/3966484/why-does-modulus-operator-return-fractional-number-in-javascript/31711034#31711034\nfunction floatSafeRemainder(val, step) {\n    const valDecCount = (val.toString().split(\".\")[1] || \"\").length;\n    const stepDecCount = (step.toString().split(\".\")[1] || \"\").length;\n    const decCount = valDecCount > stepDecCount ? valDecCount : stepDecCount;\n    const valInt = Number.parseInt(val.toFixed(decCount).replace(\".\", \"\"));\n    const stepInt = Number.parseInt(step.toFixed(decCount).replace(\".\", \"\"));\n    return (valInt % stepInt) / 10 ** decCount;\n}\nexport class ZodNumber extends ZodType {\n    constructor() {\n        super(...arguments);\n        this.min = this.gte;\n        this.max = this.lte;\n        this.step = this.multipleOf;\n    }\n    _parse(input) {\n        if (this._def.coerce) {\n            input.data = Number(input.data);\n        }\n        const parsedType = this._getType(input);\n        if (parsedType !== ZodParsedType.number) {\n            const ctx = this._getOrReturnCtx(input);\n            addIssueToContext(ctx, {\n                code: ZodIssueCode.invalid_type,\n                expected: ZodParsedType.number,\n                received: ctx.parsedType,\n            });\n            return INVALID;\n        }\n        let ctx = undefined;\n        const status = new ParseStatus();\n        for (const check of this._def.checks) {\n            if (check.kind === \"int\") {\n                if (!util.isInteger(input.data)) {\n                    ctx = this._getOrReturnCtx(input, ctx);\n                    addIssueToContext(ctx, {\n                        code: ZodIssueCode.invalid_type,\n                        expected: \"integer\",\n                        received: \"float\",\n                        message: check.message,\n                    });\n                    status.dirty();\n                }\n            }\n            else if (check.kind === \"min\") {\n                const tooSmall = check.inclusive ? input.data < check.value : input.data <= check.value;\n                if (tooSmall) {\n                    ctx = this._getOrReturnCtx(input, ctx);\n                    addIssueToContext(ctx, {\n                        code: ZodIssueCode.too_small,\n                        minimum: check.value,\n                        type: \"number\",\n                        inclusive: check.inclusive,\n                        exact: false,\n                        message: check.message,\n                    });\n                    status.dirty();\n                }\n            }\n            else if (check.kind === \"max\") {\n                const tooBig = check.inclusive ? input.data > check.value : input.data >= check.value;\n                if (tooBig) {\n                    ctx = this._getOrReturnCtx(input, ctx);\n                    addIssueToContext(ctx, {\n                        code: ZodIssueCode.too_big,\n                        maximum: check.value,\n                        type: \"number\",\n                        inclusive: check.inclusive,\n                        exact: false,\n                        message: check.message,\n                    });\n                    status.dirty();\n                }\n            }\n            else if (check.kind === \"multipleOf\") {\n                if (floatSafeRemainder(input.data, check.value) !== 0) {\n                    ctx = this._getOrReturnCtx(input, ctx);\n                    addIssueToContext(ctx, {\n                        code: ZodIssueCode.not_multiple_of,\n                        multipleOf: check.value,\n                        message: check.message,\n                    });\n                    status.dirty();\n                }\n            }\n            else if (check.kind === \"finite\") {\n                if (!Number.isFinite(input.data)) {\n                    ctx = this._getOrReturnCtx(input, ctx);\n                    addIssueToContext(ctx, {\n                        code: ZodIssueCode.not_finite,\n                        message: check.message,\n                    });\n                    status.dirty();\n                }\n            }\n            else {\n                util.assertNever(check);\n            }\n        }\n        return { status: status.value, value: input.data };\n    }\n    gte(value, message) {\n        return this.setLimit(\"min\", value, true, errorUtil.toString(message));\n    }\n    gt(value, message) {\n        return this.setLimit(\"min\", value, false, errorUtil.toString(message));\n    }\n    lte(value, message) {\n        return this.setLimit(\"max\", value, true, errorUtil.toString(message));\n    }\n    lt(value, message) {\n        return this.setLimit(\"max\", value, false, errorUtil.toString(message));\n    }\n    setLimit(kind, value, inclusive, message) {\n        return new ZodNumber({\n            ...this._def,\n            checks: [\n                ...this._def.checks,\n                {\n                    kind,\n                    value,\n                    inclusive,\n                    message: errorUtil.toString(message),\n                },\n            ],\n        });\n    }\n    _addCheck(check) {\n        return new ZodNumber({\n            ...this._def,\n            checks: [...this._def.checks, check],\n        });\n    }\n    int(message) {\n        return this._addCheck({\n            kind: \"int\",\n            message: errorUtil.toString(message),\n        });\n    }\n    positive(message) {\n        return this._addCheck({\n            kind: \"min\",\n            value: 0,\n            inclusive: false,\n            message: errorUtil.toString(message),\n        });\n    }\n    negative(message) {\n        return this._addCheck({\n            kind: \"max\",\n            value: 0,\n            inclusive: false,\n            message: errorUtil.toString(message),\n        });\n    }\n    nonpositive(message) {\n        return this._addCheck({\n            kind: \"max\",\n            value: 0,\n            inclusive: true,\n            message: errorUtil.toString(message),\n        });\n    }\n    nonnegative(message) {\n        return this._addCheck({\n            kind: \"min\",\n            value: 0,\n            inclusive: true,\n            message: errorUtil.toString(message),\n        });\n    }\n    multipleOf(value, message) {\n        return this._addCheck({\n            kind: \"multipleOf\",\n            value: value,\n            message: errorUtil.toString(message),\n        });\n    }\n    finite(message) {\n        return this._addCheck({\n            kind: \"finite\",\n            message: errorUtil.toString(message),\n        });\n    }\n    safe(message) {\n        return this._addCheck({\n            kind: \"min\",\n            inclusive: true,\n            value: Number.MIN_SAFE_INTEGER,\n            message: errorUtil.toString(message),\n        })._addCheck({\n            kind: \"max\",\n            inclusive: true,\n            value: Number.MAX_SAFE_INTEGER,\n            message: errorUtil.toString(message),\n        });\n    }\n    get minValue() {\n        let min = null;\n        for (const ch of this._def.checks) {\n            if (ch.kind === \"min\") {\n                if (min === null || ch.value > min)\n                    min = ch.value;\n            }\n        }\n        return min;\n    }\n    get maxValue() {\n        let max = null;\n        for (const ch of this._def.checks) {\n            if (ch.kind === \"max\") {\n                if (max === null || ch.value < max)\n                    max = ch.value;\n            }\n        }\n        return max;\n    }\n    get isInt() {\n        return !!this._def.checks.find((ch) => ch.kind === \"int\" || (ch.kind === \"multipleOf\" && util.isInteger(ch.value)));\n    }\n    get isFinite() {\n        let max = null;\n        let min = null;\n        for (const ch of this._def.checks) {\n            if (ch.kind === \"finite\" || ch.kind === \"int\" || ch.kind === \"multipleOf\") {\n                return true;\n            }\n            else if (ch.kind === \"min\") {\n                if (min === null || ch.value > min)\n                    min = ch.value;\n            }\n            else if (ch.kind === \"max\") {\n                if (max === null || ch.value < max)\n                    max = ch.value;\n            }\n        }\n        return Number.isFinite(min) && Number.isFinite(max);\n    }\n}\nZodNumber.create = (params) => {\n    return new ZodNumber({\n        checks: [],\n        typeName: ZodFirstPartyTypeKind.ZodNumber,\n        coerce: params?.coerce || false,\n        ...processCreateParams(params),\n    });\n};\nexport class ZodBigInt extends ZodType {\n    constructor() {\n        super(...arguments);\n        this.min = this.gte;\n        this.max = this.lte;\n    }\n    _parse(input) {\n        if (this._def.coerce) {\n            try {\n                input.data = BigInt(input.data);\n            }\n            catch {\n                return this._getInvalidInput(input);\n            }\n        }\n        const parsedType = this._getType(input);\n        if (parsedType !== ZodParsedType.bigint) {\n            return this._getInvalidInput(input);\n        }\n        let ctx = undefined;\n        const status = new ParseStatus();\n        for (const check of this._def.checks) {\n            if (check.kind === \"min\") {\n                const tooSmall = check.inclusive ? input.data < check.value : input.data <= check.value;\n                if (tooSmall) {\n                    ctx = this._getOrReturnCtx(input, ctx);\n                    addIssueToContext(ctx, {\n                        code: ZodIssueCode.too_small,\n                        type: \"bigint\",\n                        minimum: check.value,\n                        inclusive: check.inclusive,\n                        message: check.message,\n                    });\n                    status.dirty();\n                }\n            }\n            else if (check.kind === \"max\") {\n                const tooBig = check.inclusive ? input.data > check.value : input.data >= check.value;\n                if (tooBig) {\n                    ctx = this._getOrReturnCtx(input, ctx);\n                    addIssueToContext(ctx, {\n                        code: ZodIssueCode.too_big,\n                        type: \"bigint\",\n                        maximum: check.value,\n                        inclusive: check.inclusive,\n                        message: check.message,\n                    });\n                    status.dirty();\n                }\n            }\n            else if (check.kind === \"multipleOf\") {\n                if (input.data % check.value !== BigInt(0)) {\n                    ctx = this._getOrReturnCtx(input, ctx);\n                    addIssueToContext(ctx, {\n                        code: ZodIssueCode.not_multiple_of,\n                        multipleOf: check.value,\n                        message: check.message,\n                    });\n                    status.dirty();\n                }\n            }\n            else {\n                util.assertNever(check);\n            }\n        }\n        return { status: status.value, value: input.data };\n    }\n    _getInvalidInput(input) {\n        const ctx = this._getOrReturnCtx(input);\n        addIssueToContext(ctx, {\n            code: ZodIssueCode.invalid_type,\n            expected: ZodParsedType.bigint,\n            received: ctx.parsedType,\n        });\n        return INVALID;\n    }\n    gte(value, message) {\n        return this.setLimit(\"min\", value, true, errorUtil.toString(message));\n    }\n    gt(value, message) {\n        return this.setLimit(\"min\", value, false, errorUtil.toString(message));\n    }\n    lte(value, message) {\n        return this.setLimit(\"max\", value, true, errorUtil.toString(message));\n    }\n    lt(value, message) {\n        return this.setLimit(\"max\", value, false, errorUtil.toString(message));\n    }\n    setLimit(kind, value, inclusive, message) {\n        return new ZodBigInt({\n            ...this._def,\n            checks: [\n                ...this._def.checks,\n                {\n                    kind,\n                    value,\n                    inclusive,\n                    message: errorUtil.toString(message),\n                },\n            ],\n        });\n    }\n    _addCheck(check) {\n        return new ZodBigInt({\n            ...this._def,\n            checks: [...this._def.checks, check],\n        });\n    }\n    positive(message) {\n        return this._addCheck({\n            kind: \"min\",\n            value: BigInt(0),\n            inclusive: false,\n            message: errorUtil.toString(message),\n        });\n    }\n    negative(message) {\n        return this._addCheck({\n            kind: \"max\",\n            value: BigInt(0),\n            inclusive: false,\n            message: errorUtil.toString(message),\n        });\n    }\n    nonpositive(message) {\n        return this._addCheck({\n            kind: \"max\",\n            value: BigInt(0),\n            inclusive: true,\n            message: errorUtil.toString(message),\n        });\n    }\n    nonnegative(message) {\n        return this._addCheck({\n            kind: \"min\",\n            value: BigInt(0),\n            inclusive: true,\n            message: errorUtil.toString(message),\n        });\n    }\n    multipleOf(value, message) {\n        return this._addCheck({\n            kind: \"multipleOf\",\n            value,\n            message: errorUtil.toString(message),\n        });\n    }\n    get minValue() {\n        let min = null;\n        for (const ch of this._def.checks) {\n            if (ch.kind === \"min\") {\n                if (min === null || ch.value > min)\n                    min = ch.value;\n            }\n        }\n        return min;\n    }\n    get maxValue() {\n        let max = null;\n        for (const ch of this._def.checks) {\n            if (ch.kind === \"max\") {\n                if (max === null || ch.value < max)\n                    max = ch.value;\n            }\n        }\n        return max;\n    }\n}\nZodBigInt.create = (params) => {\n    return new ZodBigInt({\n        checks: [],\n        typeName: ZodFirstPartyTypeKind.ZodBigInt,\n        coerce: params?.coerce ?? false,\n        ...processCreateParams(params),\n    });\n};\nexport class ZodBoolean extends ZodType {\n    _parse(input) {\n        if (this._def.coerce) {\n            input.data = Boolean(input.data);\n        }\n        const parsedType = this._getType(input);\n        if (parsedType !== ZodParsedType.boolean) {\n            const ctx = this._getOrReturnCtx(input);\n            addIssueToContext(ctx, {\n                code: ZodIssueCode.invalid_type,\n                expected: ZodParsedType.boolean,\n                received: ctx.parsedType,\n            });\n            return INVALID;\n        }\n        return OK(input.data);\n    }\n}\nZodBoolean.create = (params) => {\n    return new ZodBoolean({\n        typeName: ZodFirstPartyTypeKind.ZodBoolean,\n        coerce: params?.coerce || false,\n        ...processCreateParams(params),\n    });\n};\nexport class ZodDate extends ZodType {\n    _parse(input) {\n        if (this._def.coerce) {\n            input.data = new Date(input.data);\n        }\n        const parsedType = this._getType(input);\n        if (parsedType !== ZodParsedType.date) {\n            const ctx = this._getOrReturnCtx(input);\n            addIssueToContext(ctx, {\n                code: ZodIssueCode.invalid_type,\n                expected: ZodParsedType.date,\n                received: ctx.parsedType,\n            });\n            return INVALID;\n        }\n        if (Number.isNaN(input.data.getTime())) {\n            const ctx = this._getOrReturnCtx(input);\n            addIssueToContext(ctx, {\n                code: ZodIssueCode.invalid_date,\n            });\n            return INVALID;\n        }\n        const status = new ParseStatus();\n        let ctx = undefined;\n        for (const check of this._def.checks) {\n            if (check.kind === \"min\") {\n                if (input.data.getTime() < check.value) {\n                    ctx = this._getOrReturnCtx(input, ctx);\n                    addIssueToContext(ctx, {\n                        code: ZodIssueCode.too_small,\n                        message: check.message,\n                        inclusive: true,\n                        exact: false,\n                        minimum: check.value,\n                        type: \"date\",\n                    });\n                    status.dirty();\n                }\n            }\n            else if (check.kind === \"max\") {\n                if (input.data.getTime() > check.value) {\n                    ctx = this._getOrReturnCtx(input, ctx);\n                    addIssueToContext(ctx, {\n                        code: ZodIssueCode.too_big,\n                        message: check.message,\n                        inclusive: true,\n                        exact: false,\n                        maximum: check.value,\n                        type: \"date\",\n                    });\n                    status.dirty();\n                }\n            }\n            else {\n                util.assertNever(check);\n            }\n        }\n        return {\n            status: status.value,\n            value: new Date(input.data.getTime()),\n        };\n    }\n    _addCheck(check) {\n        return new ZodDate({\n            ...this._def,\n            checks: [...this._def.checks, check],\n        });\n    }\n    min(minDate, message) {\n        return this._addCheck({\n            kind: \"min\",\n            value: minDate.getTime(),\n            message: errorUtil.toString(message),\n        });\n    }\n    max(maxDate, message) {\n        return this._addCheck({\n            kind: \"max\",\n            value: maxDate.getTime(),\n            message: errorUtil.toString(message),\n        });\n    }\n    get minDate() {\n        let min = null;\n        for (const ch of this._def.checks) {\n            if (ch.kind === \"min\") {\n                if (min === null || ch.value > min)\n                    min = ch.value;\n            }\n        }\n        return min != null ? new Date(min) : null;\n    }\n    get maxDate() {\n        let max = null;\n        for (const ch of this._def.checks) {\n            if (ch.kind === \"max\") {\n                if (max === null || ch.value < max)\n                    max = ch.value;\n            }\n        }\n        return max != null ? new Date(max) : null;\n    }\n}\nZodDate.create = (params) => {\n    return new ZodDate({\n        checks: [],\n        coerce: params?.coerce || false,\n        typeName: ZodFirstPartyTypeKind.ZodDate,\n        ...processCreateParams(params),\n    });\n};\nexport class ZodSymbol extends ZodType {\n    _parse(input) {\n        const parsedType = this._getType(input);\n        if (parsedType !== ZodParsedType.symbol) {\n            const ctx = this._getOrReturnCtx(input);\n            addIssueToContext(ctx, {\n                code: ZodIssueCode.invalid_type,\n                expected: ZodParsedType.symbol,\n                received: ctx.parsedType,\n            });\n            return INVALID;\n        }\n        return OK(input.data);\n    }\n}\nZodSymbol.create = (params) => {\n    return new ZodSymbol({\n        typeName: ZodFirstPartyTypeKind.ZodSymbol,\n        ...processCreateParams(params),\n    });\n};\nexport class ZodUndefined extends ZodType {\n    _parse(input) {\n        const parsedType = this._getType(input);\n        if (parsedType !== ZodParsedType.undefined) {\n            const ctx = this._getOrReturnCtx(input);\n            addIssueToContext(ctx, {\n                code: ZodIssueCode.invalid_type,\n                expected: ZodParsedType.undefined,\n                received: ctx.parsedType,\n            });\n            return INVALID;\n        }\n        return OK(input.data);\n    }\n}\nZodUndefined.create = (params) => {\n    return new ZodUndefined({\n        typeName: ZodFirstPartyTypeKind.ZodUndefined,\n        ...processCreateParams(params),\n    });\n};\nexport class ZodNull extends ZodType {\n    _parse(input) {\n        const parsedType = this._getType(input);\n        if (parsedType !== ZodParsedType.null) {\n            const ctx = this._getOrReturnCtx(input);\n            addIssueToContext(ctx, {\n                code: ZodIssueCode.invalid_type,\n                expected: ZodParsedType.null,\n                received: ctx.parsedType,\n            });\n            return INVALID;\n        }\n        return OK(input.data);\n    }\n}\nZodNull.create = (params) => {\n    return new ZodNull({\n        typeName: ZodFirstPartyTypeKind.ZodNull,\n        ...processCreateParams(params),\n    });\n};\nexport class ZodAny extends ZodType {\n    constructor() {\n        super(...arguments);\n        // to prevent instances of other classes from extending ZodAny. this causes issues with catchall in ZodObject.\n        this._any = true;\n    }\n    _parse(input) {\n        return OK(input.data);\n    }\n}\nZodAny.create = (params) => {\n    return new ZodAny({\n        typeName: ZodFirstPartyTypeKind.ZodAny,\n        ...processCreateParams(params),\n    });\n};\nexport class ZodUnknown extends ZodType {\n    constructor() {\n        super(...arguments);\n        // required\n        this._unknown = true;\n    }\n    _parse(input) {\n        return OK(input.data);\n    }\n}\nZodUnknown.create = (params) => {\n    return new ZodUnknown({\n        typeName: ZodFirstPartyTypeKind.ZodUnknown,\n        ...processCreateParams(params),\n    });\n};\nexport class ZodNever extends ZodType {\n    _parse(input) {\n        const ctx = this._getOrReturnCtx(input);\n        addIssueToContext(ctx, {\n            code: ZodIssueCode.invalid_type,\n            expected: ZodParsedType.never,\n            received: ctx.parsedType,\n        });\n        return INVALID;\n    }\n}\nZodNever.create = (params) => {\n    return new ZodNever({\n        typeName: ZodFirstPartyTypeKind.ZodNever,\n        ...processCreateParams(params),\n    });\n};\nexport class ZodVoid extends ZodType {\n    _parse(input) {\n        const parsedType = this._getType(input);\n        if (parsedType !== ZodParsedType.undefined) {\n            const ctx = this._getOrReturnCtx(input);\n            addIssueToContext(ctx, {\n                code: ZodIssueCode.invalid_type,\n                expected: ZodParsedType.void,\n                received: ctx.parsedType,\n            });\n            return INVALID;\n        }\n        return OK(input.data);\n    }\n}\nZodVoid.create = (params) => {\n    return new ZodVoid({\n        typeName: ZodFirstPartyTypeKind.ZodVoid,\n        ...processCreateParams(params),\n    });\n};\nexport class ZodArray extends ZodType {\n    _parse(input) {\n        const { ctx, status } = this._processInputParams(input);\n        const def = this._def;\n        if (ctx.parsedType !== ZodParsedType.array) {\n            addIssueToContext(ctx, {\n                code: ZodIssueCode.invalid_type,\n                expected: ZodParsedType.array,\n                received: ctx.parsedType,\n            });\n            return INVALID;\n        }\n        if (def.exactLength !== null) {\n            const tooBig = ctx.data.length > def.exactLength.value;\n            const tooSmall = ctx.data.length < def.exactLength.value;\n            if (tooBig || tooSmall) {\n                addIssueToContext(ctx, {\n                    code: tooBig ? ZodIssueCode.too_big : ZodIssueCode.too_small,\n                    minimum: (tooSmall ? def.exactLength.value : undefined),\n                    maximum: (tooBig ? def.exactLength.value : undefined),\n                    type: \"array\",\n                    inclusive: true,\n                    exact: true,\n                    message: def.exactLength.message,\n                });\n                status.dirty();\n            }\n        }\n        if (def.minLength !== null) {\n            if (ctx.data.length < def.minLength.value) {\n                addIssueToContext(ctx, {\n                    code: ZodIssueCode.too_small,\n                    minimum: def.minLength.value,\n                    type: \"array\",\n                    inclusive: true,\n                    exact: false,\n                    message: def.minLength.message,\n                });\n                status.dirty();\n            }\n        }\n        if (def.maxLength !== null) {\n            if (ctx.data.length > def.maxLength.value) {\n                addIssueToContext(ctx, {\n                    code: ZodIssueCode.too_big,\n                    maximum: def.maxLength.value,\n                    type: \"array\",\n                    inclusive: true,\n                    exact: false,\n                    message: def.maxLength.message,\n                });\n                status.dirty();\n            }\n        }\n        if (ctx.common.async) {\n            return Promise.all([...ctx.data].map((item, i) => {\n                return def.type._parseAsync(new ParseInputLazyPath(ctx, item, ctx.path, i));\n            })).then((result) => {\n                return ParseStatus.mergeArray(status, result);\n            });\n        }\n        const result = [...ctx.data].map((item, i) => {\n            return def.type._parseSync(new ParseInputLazyPath(ctx, item, ctx.path, i));\n        });\n        return ParseStatus.mergeArray(status, result);\n    }\n    get element() {\n        return this._def.type;\n    }\n    min(minLength, message) {\n        return new ZodArray({\n            ...this._def,\n            minLength: { value: minLength, message: errorUtil.toString(message) },\n        });\n    }\n    max(maxLength, message) {\n        return new ZodArray({\n            ...this._def,\n            maxLength: { value: maxLength, message: errorUtil.toString(message) },\n        });\n    }\n    length(len, message) {\n        return new ZodArray({\n            ...this._def,\n            exactLength: { value: len, message: errorUtil.toString(message) },\n        });\n    }\n    nonempty(message) {\n        return this.min(1, message);\n    }\n}\nZodArray.create = (schema, params) => {\n    return new ZodArray({\n        type: schema,\n        minLength: null,\n        maxLength: null,\n        exactLength: null,\n        typeName: ZodFirstPartyTypeKind.ZodArray,\n        ...processCreateParams(params),\n    });\n};\nfunction deepPartialify(schema) {\n    if (schema instanceof ZodObject) {\n        const newShape = {};\n        for (const key in schema.shape) {\n            const fieldSchema = schema.shape[key];\n            newShape[key] = ZodOptional.create(deepPartialify(fieldSchema));\n        }\n        return new ZodObject({\n            ...schema._def,\n            shape: () => newShape,\n        });\n    }\n    else if (schema instanceof ZodArray) {\n        return new ZodArray({\n            ...schema._def,\n            type: deepPartialify(schema.element),\n        });\n    }\n    else if (schema instanceof ZodOptional) {\n        return ZodOptional.create(deepPartialify(schema.unwrap()));\n    }\n    else if (schema instanceof ZodNullable) {\n        return ZodNullable.create(deepPartialify(schema.unwrap()));\n    }\n    else if (schema instanceof ZodTuple) {\n        return ZodTuple.create(schema.items.map((item) => deepPartialify(item)));\n    }\n    else {\n        return schema;\n    }\n}\nexport class ZodObject extends ZodType {\n    constructor() {\n        super(...arguments);\n        this._cached = null;\n        /**\n         * @deprecated In most cases, this is no longer needed - unknown properties are now silently stripped.\n         * If you want to pass through unknown properties, use `.passthrough()` instead.\n         */\n        this.nonstrict = this.passthrough;\n        // extend<\n        //   Augmentation extends ZodRawShape,\n        //   NewOutput extends util.flatten<{\n        //     [k in keyof Augmentation | keyof Output]: k extends keyof Augmentation\n        //       ? Augmentation[k][\"_output\"]\n        //       : k extends keyof Output\n        //       ? Output[k]\n        //       : never;\n        //   }>,\n        //   NewInput extends util.flatten<{\n        //     [k in keyof Augmentation | keyof Input]: k extends keyof Augmentation\n        //       ? Augmentation[k][\"_input\"]\n        //       : k extends keyof Input\n        //       ? Input[k]\n        //       : never;\n        //   }>\n        // >(\n        //   augmentation: Augmentation\n        // ): ZodObject<\n        //   extendShape<T, Augmentation>,\n        //   UnknownKeys,\n        //   Catchall,\n        //   NewOutput,\n        //   NewInput\n        // > {\n        //   return new ZodObject({\n        //     ...this._def,\n        //     shape: () => ({\n        //       ...this._def.shape(),\n        //       ...augmentation,\n        //     }),\n        //   }) as any;\n        // }\n        /**\n         * @deprecated Use `.extend` instead\n         *  */\n        this.augment = this.extend;\n    }\n    _getCached() {\n        if (this._cached !== null)\n            return this._cached;\n        const shape = this._def.shape();\n        const keys = util.objectKeys(shape);\n        this._cached = { shape, keys };\n        return this._cached;\n    }\n    _parse(input) {\n        const parsedType = this._getType(input);\n        if (parsedType !== ZodParsedType.object) {\n            const ctx = this._getOrReturnCtx(input);\n            addIssueToContext(ctx, {\n                code: ZodIssueCode.invalid_type,\n                expected: ZodParsedType.object,\n                received: ctx.parsedType,\n            });\n            return INVALID;\n        }\n        const { status, ctx } = this._processInputParams(input);\n        const { shape, keys: shapeKeys } = this._getCached();\n        const extraKeys = [];\n        if (!(this._def.catchall instanceof ZodNever && this._def.unknownKeys === \"strip\")) {\n            for (const key in ctx.data) {\n                if (!shapeKeys.includes(key)) {\n                    extraKeys.push(key);\n                }\n            }\n        }\n        const pairs = [];\n        for (const key of shapeKeys) {\n            const keyValidator = shape[key];\n            const value = ctx.data[key];\n            pairs.push({\n                key: { status: \"valid\", value: key },\n                value: keyValidator._parse(new ParseInputLazyPath(ctx, value, ctx.path, key)),\n                alwaysSet: key in ctx.data,\n            });\n        }\n        if (this._def.catchall instanceof ZodNever) {\n            const unknownKeys = this._def.unknownKeys;\n            if (unknownKeys === \"passthrough\") {\n                for (const key of extraKeys) {\n                    pairs.push({\n                        key: { status: \"valid\", value: key },\n                        value: { status: \"valid\", value: ctx.data[key] },\n                    });\n                }\n            }\n            else if (unknownKeys === \"strict\") {\n                if (extraKeys.length > 0) {\n                    addIssueToContext(ctx, {\n                        code: ZodIssueCode.unrecognized_keys,\n                        keys: extraKeys,\n                    });\n                    status.dirty();\n                }\n            }\n            else if (unknownKeys === \"strip\") {\n            }\n            else {\n                throw new Error(`Internal ZodObject error: invalid unknownKeys value.`);\n            }\n        }\n        else {\n            // run catchall validation\n            const catchall = this._def.catchall;\n            for (const key of extraKeys) {\n                const value = ctx.data[key];\n                pairs.push({\n                    key: { status: \"valid\", value: key },\n                    value: catchall._parse(new ParseInputLazyPath(ctx, value, ctx.path, key) //, ctx.child(key), value, getParsedType(value)\n                    ),\n                    alwaysSet: key in ctx.data,\n                });\n            }\n        }\n        if (ctx.common.async) {\n            return Promise.resolve()\n                .then(async () => {\n                const syncPairs = [];\n                for (const pair of pairs) {\n                    const key = await pair.key;\n                    const value = await pair.value;\n                    syncPairs.push({\n                        key,\n                        value,\n                        alwaysSet: pair.alwaysSet,\n                    });\n                }\n                return syncPairs;\n            })\n                .then((syncPairs) => {\n                return ParseStatus.mergeObjectSync(status, syncPairs);\n            });\n        }\n        else {\n            return ParseStatus.mergeObjectSync(status, pairs);\n        }\n    }\n    get shape() {\n        return this._def.shape();\n    }\n    strict(message) {\n        errorUtil.errToObj;\n        return new ZodObject({\n            ...this._def,\n            unknownKeys: \"strict\",\n            ...(message !== undefined\n                ? {\n                    errorMap: (issue, ctx) => {\n                        const defaultError = this._def.errorMap?.(issue, ctx).message ?? ctx.defaultError;\n                        if (issue.code === \"unrecognized_keys\")\n                            return {\n                                message: errorUtil.errToObj(message).message ?? defaultError,\n                            };\n                        return {\n                            message: defaultError,\n                        };\n                    },\n                }\n                : {}),\n        });\n    }\n    strip() {\n        return new ZodObject({\n            ...this._def,\n            unknownKeys: \"strip\",\n        });\n    }\n    passthrough() {\n        return new ZodObject({\n            ...this._def,\n            unknownKeys: \"passthrough\",\n        });\n    }\n    // const AugmentFactory =\n    //   <Def extends ZodObjectDef>(def: Def) =>\n    //   <Augmentation extends ZodRawShape>(\n    //     augmentation: Augmentation\n    //   ): ZodObject<\n    //     extendShape<ReturnType<Def[\"shape\"]>, Augmentation>,\n    //     Def[\"unknownKeys\"],\n    //     Def[\"catchall\"]\n    //   > => {\n    //     return new ZodObject({\n    //       ...def,\n    //       shape: () => ({\n    //         ...def.shape(),\n    //         ...augmentation,\n    //       }),\n    //     }) as any;\n    //   };\n    extend(augmentation) {\n        return new ZodObject({\n            ...this._def,\n            shape: () => ({\n                ...this._def.shape(),\n                ...augmentation,\n            }),\n        });\n    }\n    /**\n     * Prior to zod@1.0.12 there was a bug in the\n     * inferred type of merged objects. Please\n     * upgrade if you are experiencing issues.\n     */\n    merge(merging) {\n        const merged = new ZodObject({\n            unknownKeys: merging._def.unknownKeys,\n            catchall: merging._def.catchall,\n            shape: () => ({\n                ...this._def.shape(),\n                ...merging._def.shape(),\n            }),\n            typeName: ZodFirstPartyTypeKind.ZodObject,\n        });\n        return merged;\n    }\n    // merge<\n    //   Incoming extends AnyZodObject,\n    //   Augmentation extends Incoming[\"shape\"],\n    //   NewOutput extends {\n    //     [k in keyof Augmentation | keyof Output]: k extends keyof Augmentation\n    //       ? Augmentation[k][\"_output\"]\n    //       : k extends keyof Output\n    //       ? Output[k]\n    //       : never;\n    //   },\n    //   NewInput extends {\n    //     [k in keyof Augmentation | keyof Input]: k extends keyof Augmentation\n    //       ? Augmentation[k][\"_input\"]\n    //       : k extends keyof Input\n    //       ? Input[k]\n    //       : never;\n    //   }\n    // >(\n    //   merging: Incoming\n    // ): ZodObject<\n    //   extendShape<T, ReturnType<Incoming[\"_def\"][\"shape\"]>>,\n    //   Incoming[\"_def\"][\"unknownKeys\"],\n    //   Incoming[\"_def\"][\"catchall\"],\n    //   NewOutput,\n    //   NewInput\n    // > {\n    //   const merged: any = new ZodObject({\n    //     unknownKeys: merging._def.unknownKeys,\n    //     catchall: merging._def.catchall,\n    //     shape: () =>\n    //       objectUtil.mergeShapes(this._def.shape(), merging._def.shape()),\n    //     typeName: ZodFirstPartyTypeKind.ZodObject,\n    //   }) as any;\n    //   return merged;\n    // }\n    setKey(key, schema) {\n        return this.augment({ [key]: schema });\n    }\n    // merge<Incoming extends AnyZodObject>(\n    //   merging: Incoming\n    // ): //ZodObject<T & Incoming[\"_shape\"], UnknownKeys, Catchall> = (merging) => {\n    // ZodObject<\n    //   extendShape<T, ReturnType<Incoming[\"_def\"][\"shape\"]>>,\n    //   Incoming[\"_def\"][\"unknownKeys\"],\n    //   Incoming[\"_def\"][\"catchall\"]\n    // > {\n    //   // const mergedShape = objectUtil.mergeShapes(\n    //   //   this._def.shape(),\n    //   //   merging._def.shape()\n    //   // );\n    //   const merged: any = new ZodObject({\n    //     unknownKeys: merging._def.unknownKeys,\n    //     catchall: merging._def.catchall,\n    //     shape: () =>\n    //       objectUtil.mergeShapes(this._def.shape(), merging._def.shape()),\n    //     typeName: ZodFirstPartyTypeKind.ZodObject,\n    //   }) as any;\n    //   return merged;\n    // }\n    catchall(index) {\n        return new ZodObject({\n            ...this._def,\n            catchall: index,\n        });\n    }\n    pick(mask) {\n        const shape = {};\n        for (const key of util.objectKeys(mask)) {\n            if (mask[key] && this.shape[key]) {\n                shape[key] = this.shape[key];\n            }\n        }\n        return new ZodObject({\n            ...this._def,\n            shape: () => shape,\n        });\n    }\n    omit(mask) {\n        const shape = {};\n        for (const key of util.objectKeys(this.shape)) {\n            if (!mask[key]) {\n                shape[key] = this.shape[key];\n            }\n        }\n        return new ZodObject({\n            ...this._def,\n            shape: () => shape,\n        });\n    }\n    /**\n     * @deprecated\n     */\n    deepPartial() {\n        return deepPartialify(this);\n    }\n    partial(mask) {\n        const newShape = {};\n        for (const key of util.objectKeys(this.shape)) {\n            const fieldSchema = this.shape[key];\n            if (mask && !mask[key]) {\n                newShape[key] = fieldSchema;\n            }\n            else {\n                newShape[key] = fieldSchema.optional();\n            }\n        }\n        return new ZodObject({\n            ...this._def,\n            shape: () => newShape,\n        });\n    }\n    required(mask) {\n        const newShape = {};\n        for (const key of util.objectKeys(this.shape)) {\n            if (mask && !mask[key]) {\n                newShape[key] = this.shape[key];\n            }\n            else {\n                const fieldSchema = this.shape[key];\n                let newField = fieldSchema;\n                while (newField instanceof ZodOptional) {\n                    newField = newField._def.innerType;\n                }\n                newShape[key] = newField;\n            }\n        }\n        return new ZodObject({\n            ...this._def,\n            shape: () => newShape,\n        });\n    }\n    keyof() {\n        return createZodEnum(util.objectKeys(this.shape));\n    }\n}\nZodObject.create = (shape, params) => {\n    return new ZodObject({\n        shape: () => shape,\n        unknownKeys: \"strip\",\n        catchall: ZodNever.create(),\n        typeName: ZodFirstPartyTypeKind.ZodObject,\n        ...processCreateParams(params),\n    });\n};\nZodObject.strictCreate = (shape, params) => {\n    return new ZodObject({\n        shape: () => shape,\n        unknownKeys: \"strict\",\n        catchall: ZodNever.create(),\n        typeName: ZodFirstPartyTypeKind.ZodObject,\n        ...processCreateParams(params),\n    });\n};\nZodObject.lazycreate = (shape, params) => {\n    return new ZodObject({\n        shape,\n        unknownKeys: \"strip\",\n        catchall: ZodNever.create(),\n        typeName: ZodFirstPartyTypeKind.ZodObject,\n        ...processCreateParams(params),\n    });\n};\nexport class ZodUnion extends ZodType {\n    _parse(input) {\n        const { ctx } = this._processInputParams(input);\n        const options = this._def.options;\n        function handleResults(results) {\n            // return first issue-free validation if it exists\n            for (const result of results) {\n                if (result.result.status === \"valid\") {\n                    return result.result;\n                }\n            }\n            for (const result of results) {\n                if (result.result.status === \"dirty\") {\n                    // add issues from dirty option\n                    ctx.common.issues.push(...result.ctx.common.issues);\n                    return result.result;\n                }\n            }\n            // return invalid\n            const unionErrors = results.map((result) => new ZodError(result.ctx.common.issues));\n            addIssueToContext(ctx, {\n                code: ZodIssueCode.invalid_union,\n                unionErrors,\n            });\n            return INVALID;\n        }\n        if (ctx.common.async) {\n            return Promise.all(options.map(async (option) => {\n                const childCtx = {\n                    ...ctx,\n                    common: {\n                        ...ctx.common,\n                        issues: [],\n                    },\n                    parent: null,\n                };\n                return {\n                    result: await option._parseAsync({\n                        data: ctx.data,\n                        path: ctx.path,\n                        parent: childCtx,\n                    }),\n                    ctx: childCtx,\n                };\n            })).then(handleResults);\n        }\n        else {\n            let dirty = undefined;\n            const issues = [];\n            for (const option of options) {\n                const childCtx = {\n                    ...ctx,\n                    common: {\n                        ...ctx.common,\n                        issues: [],\n                    },\n                    parent: null,\n                };\n                const result = option._parseSync({\n                    data: ctx.data,\n                    path: ctx.path,\n                    parent: childCtx,\n                });\n                if (result.status === \"valid\") {\n                    return result;\n                }\n                else if (result.status === \"dirty\" && !dirty) {\n                    dirty = { result, ctx: childCtx };\n                }\n                if (childCtx.common.issues.length) {\n                    issues.push(childCtx.common.issues);\n                }\n            }\n            if (dirty) {\n                ctx.common.issues.push(...dirty.ctx.common.issues);\n                return dirty.result;\n            }\n            const unionErrors = issues.map((issues) => new ZodError(issues));\n            addIssueToContext(ctx, {\n                code: ZodIssueCode.invalid_union,\n                unionErrors,\n            });\n            return INVALID;\n        }\n    }\n    get options() {\n        return this._def.options;\n    }\n}\nZodUnion.create = (types, params) => {\n    return new ZodUnion({\n        options: types,\n        typeName: ZodFirstPartyTypeKind.ZodUnion,\n        ...processCreateParams(params),\n    });\n};\n/////////////////////////////////////////////////////\n/////////////////////////////////////////////////////\n//////////                                 //////////\n//////////      ZodDiscriminatedUnion      //////////\n//////////                                 //////////\n/////////////////////////////////////////////////////\n/////////////////////////////////////////////////////\nconst getDiscriminator = (type) => {\n    if (type instanceof ZodLazy) {\n        return getDiscriminator(type.schema);\n    }\n    else if (type instanceof ZodEffects) {\n        return getDiscriminator(type.innerType());\n    }\n    else if (type instanceof ZodLiteral) {\n        return [type.value];\n    }\n    else if (type instanceof ZodEnum) {\n        return type.options;\n    }\n    else if (type instanceof ZodNativeEnum) {\n        // eslint-disable-next-line ban/ban\n        return util.objectValues(type.enum);\n    }\n    else if (type instanceof ZodDefault) {\n        return getDiscriminator(type._def.innerType);\n    }\n    else if (type instanceof ZodUndefined) {\n        return [undefined];\n    }\n    else if (type instanceof ZodNull) {\n        return [null];\n    }\n    else if (type instanceof ZodOptional) {\n        return [undefined, ...getDiscriminator(type.unwrap())];\n    }\n    else if (type instanceof ZodNullable) {\n        return [null, ...getDiscriminator(type.unwrap())];\n    }\n    else if (type instanceof ZodBranded) {\n        return getDiscriminator(type.unwrap());\n    }\n    else if (type instanceof ZodReadonly) {\n        return getDiscriminator(type.unwrap());\n    }\n    else if (type instanceof ZodCatch) {\n        return getDiscriminator(type._def.innerType);\n    }\n    else {\n        return [];\n    }\n};\nexport class ZodDiscriminatedUnion extends ZodType {\n    _parse(input) {\n        const { ctx } = this._processInputParams(input);\n        if (ctx.parsedType !== ZodParsedType.object) {\n            addIssueToContext(ctx, {\n                code: ZodIssueCode.invalid_type,\n                expected: ZodParsedType.object,\n                received: ctx.parsedType,\n            });\n            return INVALID;\n        }\n        const discriminator = this.discriminator;\n        const discriminatorValue = ctx.data[discriminator];\n        const option = this.optionsMap.get(discriminatorValue);\n        if (!option) {\n            addIssueToContext(ctx, {\n                code: ZodIssueCode.invalid_union_discriminator,\n                options: Array.from(this.optionsMap.keys()),\n                path: [discriminator],\n            });\n            return INVALID;\n        }\n        if (ctx.common.async) {\n            return option._parseAsync({\n                data: ctx.data,\n                path: ctx.path,\n                parent: ctx,\n            });\n        }\n        else {\n            return option._parseSync({\n                data: ctx.data,\n                path: ctx.path,\n                parent: ctx,\n            });\n        }\n    }\n    get discriminator() {\n        return this._def.discriminator;\n    }\n    get options() {\n        return this._def.options;\n    }\n    get optionsMap() {\n        return this._def.optionsMap;\n    }\n    /**\n     * The constructor of the discriminated union schema. Its behaviour is very similar to that of the normal z.union() constructor.\n     * However, it only allows a union of objects, all of which need to share a discriminator property. This property must\n     * have a different value for each object in the union.\n     * @param discriminator the name of the discriminator property\n     * @param types an array of object schemas\n     * @param params\n     */\n    static create(discriminator, options, params) {\n        // Get all the valid discriminator values\n        const optionsMap = new Map();\n        // try {\n        for (const type of options) {\n            const discriminatorValues = getDiscriminator(type.shape[discriminator]);\n            if (!discriminatorValues.length) {\n                throw new Error(`A discriminator value for key \\`${discriminator}\\` could not be extracted from all schema options`);\n            }\n            for (const value of discriminatorValues) {\n                if (optionsMap.has(value)) {\n                    throw new Error(`Discriminator property ${String(discriminator)} has duplicate value ${String(value)}`);\n                }\n                optionsMap.set(value, type);\n            }\n        }\n        return new ZodDiscriminatedUnion({\n            typeName: ZodFirstPartyTypeKind.ZodDiscriminatedUnion,\n            discriminator,\n            options,\n            optionsMap,\n            ...processCreateParams(params),\n        });\n    }\n}\nfunction mergeValues(a, b) {\n    const aType = getParsedType(a);\n    const bType = getParsedType(b);\n    if (a === b) {\n        return { valid: true, data: a };\n    }\n    else if (aType === ZodParsedType.object && bType === ZodParsedType.object) {\n        const bKeys = util.objectKeys(b);\n        const sharedKeys = util.objectKeys(a).filter((key) => bKeys.indexOf(key) !== -1);\n        const newObj = { ...a, ...b };\n        for (const key of sharedKeys) {\n            const sharedValue = mergeValues(a[key], b[key]);\n            if (!sharedValue.valid) {\n                return { valid: false };\n            }\n            newObj[key] = sharedValue.data;\n        }\n        return { valid: true, data: newObj };\n    }\n    else if (aType === ZodParsedType.array && bType === ZodParsedType.array) {\n        if (a.length !== b.length) {\n            return { valid: false };\n        }\n        const newArray = [];\n        for (let index = 0; index < a.length; index++) {\n            const itemA = a[index];\n            const itemB = b[index];\n            const sharedValue = mergeValues(itemA, itemB);\n            if (!sharedValue.valid) {\n                return { valid: false };\n            }\n            newArray.push(sharedValue.data);\n        }\n        return { valid: true, data: newArray };\n    }\n    else if (aType === ZodParsedType.date && bType === ZodParsedType.date && +a === +b) {\n        return { valid: true, data: a };\n    }\n    else {\n        return { valid: false };\n    }\n}\nexport class ZodIntersection extends ZodType {\n    _parse(input) {\n        const { status, ctx } = this._processInputParams(input);\n        const handleParsed = (parsedLeft, parsedRight) => {\n            if (isAborted(parsedLeft) || isAborted(parsedRight)) {\n                return INVALID;\n            }\n            const merged = mergeValues(parsedLeft.value, parsedRight.value);\n            if (!merged.valid) {\n                addIssueToContext(ctx, {\n                    code: ZodIssueCode.invalid_intersection_types,\n                });\n                return INVALID;\n            }\n            if (isDirty(parsedLeft) || isDirty(parsedRight)) {\n                status.dirty();\n            }\n            return { status: status.value, value: merged.data };\n        };\n        if (ctx.common.async) {\n            return Promise.all([\n                this._def.left._parseAsync({\n                    data: ctx.data,\n                    path: ctx.path,\n                    parent: ctx,\n                }),\n                this._def.right._parseAsync({\n                    data: ctx.data,\n                    path: ctx.path,\n                    parent: ctx,\n                }),\n            ]).then(([left, right]) => handleParsed(left, right));\n        }\n        else {\n            return handleParsed(this._def.left._parseSync({\n                data: ctx.data,\n                path: ctx.path,\n                parent: ctx,\n            }), this._def.right._parseSync({\n                data: ctx.data,\n                path: ctx.path,\n                parent: ctx,\n            }));\n        }\n    }\n}\nZodIntersection.create = (left, right, params) => {\n    return new ZodIntersection({\n        left: left,\n        right: right,\n        typeName: ZodFirstPartyTypeKind.ZodIntersection,\n        ...processCreateParams(params),\n    });\n};\n// type ZodTupleItems = [ZodTypeAny, ...ZodTypeAny[]];\nexport class ZodTuple extends ZodType {\n    _parse(input) {\n        const { status, ctx } = this._processInputParams(input);\n        if (ctx.parsedType !== ZodParsedType.array) {\n            addIssueToContext(ctx, {\n                code: ZodIssueCode.invalid_type,\n                expected: ZodParsedType.array,\n                received: ctx.parsedType,\n            });\n            return INVALID;\n        }\n        if (ctx.data.length < this._def.items.length) {\n            addIssueToContext(ctx, {\n                code: ZodIssueCode.too_small,\n                minimum: this._def.items.length,\n                inclusive: true,\n                exact: false,\n                type: \"array\",\n            });\n            return INVALID;\n        }\n        const rest = this._def.rest;\n        if (!rest && ctx.data.length > this._def.items.length) {\n            addIssueToContext(ctx, {\n                code: ZodIssueCode.too_big,\n                maximum: this._def.items.length,\n                inclusive: true,\n                exact: false,\n                type: \"array\",\n            });\n            status.dirty();\n        }\n        const items = [...ctx.data]\n            .map((item, itemIndex) => {\n            const schema = this._def.items[itemIndex] || this._def.rest;\n            if (!schema)\n                return null;\n            return schema._parse(new ParseInputLazyPath(ctx, item, ctx.path, itemIndex));\n        })\n            .filter((x) => !!x); // filter nulls\n        if (ctx.common.async) {\n            return Promise.all(items).then((results) => {\n                return ParseStatus.mergeArray(status, results);\n            });\n        }\n        else {\n            return ParseStatus.mergeArray(status, items);\n        }\n    }\n    get items() {\n        return this._def.items;\n    }\n    rest(rest) {\n        return new ZodTuple({\n            ...this._def,\n            rest,\n        });\n    }\n}\nZodTuple.create = (schemas, params) => {\n    if (!Array.isArray(schemas)) {\n        throw new Error(\"You must pass an array of schemas to z.tuple([ ... ])\");\n    }\n    return new ZodTuple({\n        items: schemas,\n        typeName: ZodFirstPartyTypeKind.ZodTuple,\n        rest: null,\n        ...processCreateParams(params),\n    });\n};\nexport class ZodRecord extends ZodType {\n    get keySchema() {\n        return this._def.keyType;\n    }\n    get valueSchema() {\n        return this._def.valueType;\n    }\n    _parse(input) {\n        const { status, ctx } = this._processInputParams(input);\n        if (ctx.parsedType !== ZodParsedType.object) {\n            addIssueToContext(ctx, {\n                code: ZodIssueCode.invalid_type,\n                expected: ZodParsedType.object,\n                received: ctx.parsedType,\n            });\n            return INVALID;\n        }\n        const pairs = [];\n        const keyType = this._def.keyType;\n        const valueType = this._def.valueType;\n        for (const key in ctx.data) {\n            pairs.push({\n                key: keyType._parse(new ParseInputLazyPath(ctx, key, ctx.path, key)),\n                value: valueType._parse(new ParseInputLazyPath(ctx, ctx.data[key], ctx.path, key)),\n                alwaysSet: key in ctx.data,\n            });\n        }\n        if (ctx.common.async) {\n            return ParseStatus.mergeObjectAsync(status, pairs);\n        }\n        else {\n            return ParseStatus.mergeObjectSync(status, pairs);\n        }\n    }\n    get element() {\n        return this._def.valueType;\n    }\n    static create(first, second, third) {\n        if (second instanceof ZodType) {\n            return new ZodRecord({\n                keyType: first,\n                valueType: second,\n                typeName: ZodFirstPartyTypeKind.ZodRecord,\n                ...processCreateParams(third),\n            });\n        }\n        return new ZodRecord({\n            keyType: ZodString.create(),\n            valueType: first,\n            typeName: ZodFirstPartyTypeKind.ZodRecord,\n            ...processCreateParams(second),\n        });\n    }\n}\nexport class ZodMap extends ZodType {\n    get keySchema() {\n        return this._def.keyType;\n    }\n    get valueSchema() {\n        return this._def.valueType;\n    }\n    _parse(input) {\n        const { status, ctx } = this._processInputParams(input);\n        if (ctx.parsedType !== ZodParsedType.map) {\n            addIssueToContext(ctx, {\n                code: ZodIssueCode.invalid_type,\n                expected: ZodParsedType.map,\n                received: ctx.parsedType,\n            });\n            return INVALID;\n        }\n        const keyType = this._def.keyType;\n        const valueType = this._def.valueType;\n        const pairs = [...ctx.data.entries()].map(([key, value], index) => {\n            return {\n                key: keyType._parse(new ParseInputLazyPath(ctx, key, ctx.path, [index, \"key\"])),\n                value: valueType._parse(new ParseInputLazyPath(ctx, value, ctx.path, [index, \"value\"])),\n            };\n        });\n        if (ctx.common.async) {\n            const finalMap = new Map();\n            return Promise.resolve().then(async () => {\n                for (const pair of pairs) {\n                    const key = await pair.key;\n                    const value = await pair.value;\n                    if (key.status === \"aborted\" || value.status === \"aborted\") {\n                        return INVALID;\n                    }\n                    if (key.status === \"dirty\" || value.status === \"dirty\") {\n                        status.dirty();\n                    }\n                    finalMap.set(key.value, value.value);\n                }\n                return { status: status.value, value: finalMap };\n            });\n        }\n        else {\n            const finalMap = new Map();\n            for (const pair of pairs) {\n                const key = pair.key;\n                const value = pair.value;\n                if (key.status === \"aborted\" || value.status === \"aborted\") {\n                    return INVALID;\n                }\n                if (key.status === \"dirty\" || value.status === \"dirty\") {\n                    status.dirty();\n                }\n                finalMap.set(key.value, value.value);\n            }\n            return { status: status.value, value: finalMap };\n        }\n    }\n}\nZodMap.create = (keyType, valueType, params) => {\n    return new ZodMap({\n        valueType,\n        keyType,\n        typeName: ZodFirstPartyTypeKind.ZodMap,\n        ...processCreateParams(params),\n    });\n};\nexport class ZodSet extends ZodType {\n    _parse(input) {\n        const { status, ctx } = this._processInputParams(input);\n        if (ctx.parsedType !== ZodParsedType.set) {\n            addIssueToContext(ctx, {\n                code: ZodIssueCode.invalid_type,\n                expected: ZodParsedType.set,\n                received: ctx.parsedType,\n            });\n            return INVALID;\n        }\n        const def = this._def;\n        if (def.minSize !== null) {\n            if (ctx.data.size < def.minSize.value) {\n                addIssueToContext(ctx, {\n                    code: ZodIssueCode.too_small,\n                    minimum: def.minSize.value,\n                    type: \"set\",\n                    inclusive: true,\n                    exact: false,\n                    message: def.minSize.message,\n                });\n                status.dirty();\n            }\n        }\n        if (def.maxSize !== null) {\n            if (ctx.data.size > def.maxSize.value) {\n                addIssueToContext(ctx, {\n                    code: ZodIssueCode.too_big,\n                    maximum: def.maxSize.value,\n                    type: \"set\",\n                    inclusive: true,\n                    exact: false,\n                    message: def.maxSize.message,\n                });\n                status.dirty();\n            }\n        }\n        const valueType = this._def.valueType;\n        function finalizeSet(elements) {\n            const parsedSet = new Set();\n            for (const element of elements) {\n                if (element.status === \"aborted\")\n                    return INVALID;\n                if (element.status === \"dirty\")\n                    status.dirty();\n                parsedSet.add(element.value);\n            }\n            return { status: status.value, value: parsedSet };\n        }\n        const elements = [...ctx.data.values()].map((item, i) => valueType._parse(new ParseInputLazyPath(ctx, item, ctx.path, i)));\n        if (ctx.common.async) {\n            return Promise.all(elements).then((elements) => finalizeSet(elements));\n        }\n        else {\n            return finalizeSet(elements);\n        }\n    }\n    min(minSize, message) {\n        return new ZodSet({\n            ...this._def,\n            minSize: { value: minSize, message: errorUtil.toString(message) },\n        });\n    }\n    max(maxSize, message) {\n        return new ZodSet({\n            ...this._def,\n            maxSize: { value: maxSize, message: errorUtil.toString(message) },\n        });\n    }\n    size(size, message) {\n        return this.min(size, message).max(size, message);\n    }\n    nonempty(message) {\n        return this.min(1, message);\n    }\n}\nZodSet.create = (valueType, params) => {\n    return new ZodSet({\n        valueType,\n        minSize: null,\n        maxSize: null,\n        typeName: ZodFirstPartyTypeKind.ZodSet,\n        ...processCreateParams(params),\n    });\n};\nexport class ZodFunction extends ZodType {\n    constructor() {\n        super(...arguments);\n        this.validate = this.implement;\n    }\n    _parse(input) {\n        const { ctx } = this._processInputParams(input);\n        if (ctx.parsedType !== ZodParsedType.function) {\n            addIssueToContext(ctx, {\n                code: ZodIssueCode.invalid_type,\n                expected: ZodParsedType.function,\n                received: ctx.parsedType,\n            });\n            return INVALID;\n        }\n        function makeArgsIssue(args, error) {\n            return makeIssue({\n                data: args,\n                path: ctx.path,\n                errorMaps: [ctx.common.contextualErrorMap, ctx.schemaErrorMap, getErrorMap(), defaultErrorMap].filter((x) => !!x),\n                issueData: {\n                    code: ZodIssueCode.invalid_arguments,\n                    argumentsError: error,\n                },\n            });\n        }\n        function makeReturnsIssue(returns, error) {\n            return makeIssue({\n                data: returns,\n                path: ctx.path,\n                errorMaps: [ctx.common.contextualErrorMap, ctx.schemaErrorMap, getErrorMap(), defaultErrorMap].filter((x) => !!x),\n                issueData: {\n                    code: ZodIssueCode.invalid_return_type,\n                    returnTypeError: error,\n                },\n            });\n        }\n        const params = { errorMap: ctx.common.contextualErrorMap };\n        const fn = ctx.data;\n        if (this._def.returns instanceof ZodPromise) {\n            // Would love a way to avoid disabling this rule, but we need\n            // an alias (using an arrow function was what caused 2651).\n            // eslint-disable-next-line @typescript-eslint/no-this-alias\n            const me = this;\n            return OK(async function (...args) {\n                const error = new ZodError([]);\n                const parsedArgs = await me._def.args.parseAsync(args, params).catch((e) => {\n                    error.addIssue(makeArgsIssue(args, e));\n                    throw error;\n                });\n                const result = await Reflect.apply(fn, this, parsedArgs);\n                const parsedReturns = await me._def.returns._def.type\n                    .parseAsync(result, params)\n                    .catch((e) => {\n                    error.addIssue(makeReturnsIssue(result, e));\n                    throw error;\n                });\n                return parsedReturns;\n            });\n        }\n        else {\n            // Would love a way to avoid disabling this rule, but we need\n            // an alias (using an arrow function was what caused 2651).\n            // eslint-disable-next-line @typescript-eslint/no-this-alias\n            const me = this;\n            return OK(function (...args) {\n                const parsedArgs = me._def.args.safeParse(args, params);\n                if (!parsedArgs.success) {\n                    throw new ZodError([makeArgsIssue(args, parsedArgs.error)]);\n                }\n                const result = Reflect.apply(fn, this, parsedArgs.data);\n                const parsedReturns = me._def.returns.safeParse(result, params);\n                if (!parsedReturns.success) {\n                    throw new ZodError([makeReturnsIssue(result, parsedReturns.error)]);\n                }\n                return parsedReturns.data;\n            });\n        }\n    }\n    parameters() {\n        return this._def.args;\n    }\n    returnType() {\n        return this._def.returns;\n    }\n    args(...items) {\n        return new ZodFunction({\n            ...this._def,\n            args: ZodTuple.create(items).rest(ZodUnknown.create()),\n        });\n    }\n    returns(returnType) {\n        return new ZodFunction({\n            ...this._def,\n            returns: returnType,\n        });\n    }\n    implement(func) {\n        const validatedFunc = this.parse(func);\n        return validatedFunc;\n    }\n    strictImplement(func) {\n        const validatedFunc = this.parse(func);\n        return validatedFunc;\n    }\n    static create(args, returns, params) {\n        return new ZodFunction({\n            args: (args ? args : ZodTuple.create([]).rest(ZodUnknown.create())),\n            returns: returns || ZodUnknown.create(),\n            typeName: ZodFirstPartyTypeKind.ZodFunction,\n            ...processCreateParams(params),\n        });\n    }\n}\nexport class ZodLazy extends ZodType {\n    get schema() {\n        return this._def.getter();\n    }\n    _parse(input) {\n        const { ctx } = this._processInputParams(input);\n        const lazySchema = this._def.getter();\n        return lazySchema._parse({ data: ctx.data, path: ctx.path, parent: ctx });\n    }\n}\nZodLazy.create = (getter, params) => {\n    return new ZodLazy({\n        getter: getter,\n        typeName: ZodFirstPartyTypeKind.ZodLazy,\n        ...processCreateParams(params),\n    });\n};\nexport class ZodLiteral extends ZodType {\n    _parse(input) {\n        if (input.data !== this._def.value) {\n            const ctx = this._getOrReturnCtx(input);\n            addIssueToContext(ctx, {\n                received: ctx.data,\n                code: ZodIssueCode.invalid_literal,\n                expected: this._def.value,\n            });\n            return INVALID;\n        }\n        return { status: \"valid\", value: input.data };\n    }\n    get value() {\n        return this._def.value;\n    }\n}\nZodLiteral.create = (value, params) => {\n    return new ZodLiteral({\n        value: value,\n        typeName: ZodFirstPartyTypeKind.ZodLiteral,\n        ...processCreateParams(params),\n    });\n};\nfunction createZodEnum(values, params) {\n    return new ZodEnum({\n        values,\n        typeName: ZodFirstPartyTypeKind.ZodEnum,\n        ...processCreateParams(params),\n    });\n}\nexport class ZodEnum extends ZodType {\n    _parse(input) {\n        if (typeof input.data !== \"string\") {\n            const ctx = this._getOrReturnCtx(input);\n            const expectedValues = this._def.values;\n            addIssueToContext(ctx, {\n                expected: util.joinValues(expectedValues),\n                received: ctx.parsedType,\n                code: ZodIssueCode.invalid_type,\n            });\n            return INVALID;\n        }\n        if (!this._cache) {\n            this._cache = new Set(this._def.values);\n        }\n        if (!this._cache.has(input.data)) {\n            const ctx = this._getOrReturnCtx(input);\n            const expectedValues = this._def.values;\n            addIssueToContext(ctx, {\n                received: ctx.data,\n                code: ZodIssueCode.invalid_enum_value,\n                options: expectedValues,\n            });\n            return INVALID;\n        }\n        return OK(input.data);\n    }\n    get options() {\n        return this._def.values;\n    }\n    get enum() {\n        const enumValues = {};\n        for (const val of this._def.values) {\n            enumValues[val] = val;\n        }\n        return enumValues;\n    }\n    get Values() {\n        const enumValues = {};\n        for (const val of this._def.values) {\n            enumValues[val] = val;\n        }\n        return enumValues;\n    }\n    get Enum() {\n        const enumValues = {};\n        for (const val of this._def.values) {\n            enumValues[val] = val;\n        }\n        return enumValues;\n    }\n    extract(values, newDef = this._def) {\n        return ZodEnum.create(values, {\n            ...this._def,\n            ...newDef,\n        });\n    }\n    exclude(values, newDef = this._def) {\n        return ZodEnum.create(this.options.filter((opt) => !values.includes(opt)), {\n            ...this._def,\n            ...newDef,\n        });\n    }\n}\nZodEnum.create = createZodEnum;\nexport class ZodNativeEnum extends ZodType {\n    _parse(input) {\n        const nativeEnumValues = util.getValidEnumValues(this._def.values);\n        const ctx = this._getOrReturnCtx(input);\n        if (ctx.parsedType !== ZodParsedType.string && ctx.parsedType !== ZodParsedType.number) {\n            const expectedValues = util.objectValues(nativeEnumValues);\n            addIssueToContext(ctx, {\n                expected: util.joinValues(expectedValues),\n                received: ctx.parsedType,\n                code: ZodIssueCode.invalid_type,\n            });\n            return INVALID;\n        }\n        if (!this._cache) {\n            this._cache = new Set(util.getValidEnumValues(this._def.values));\n        }\n        if (!this._cache.has(input.data)) {\n            const expectedValues = util.objectValues(nativeEnumValues);\n            addIssueToContext(ctx, {\n                received: ctx.data,\n                code: ZodIssueCode.invalid_enum_value,\n                options: expectedValues,\n            });\n            return INVALID;\n        }\n        return OK(input.data);\n    }\n    get enum() {\n        return this._def.values;\n    }\n}\nZodNativeEnum.create = (values, params) => {\n    return new ZodNativeEnum({\n        values: values,\n        typeName: ZodFirstPartyTypeKind.ZodNativeEnum,\n        ...processCreateParams(params),\n    });\n};\nexport class ZodPromise extends ZodType {\n    unwrap() {\n        return this._def.type;\n    }\n    _parse(input) {\n        const { ctx } = this._processInputParams(input);\n        if (ctx.parsedType !== ZodParsedType.promise && ctx.common.async === false) {\n            addIssueToContext(ctx, {\n                code: ZodIssueCode.invalid_type,\n                expected: ZodParsedType.promise,\n                received: ctx.parsedType,\n            });\n            return INVALID;\n        }\n        const promisified = ctx.parsedType === ZodParsedType.promise ? ctx.data : Promise.resolve(ctx.data);\n        return OK(promisified.then((data) => {\n            return this._def.type.parseAsync(data, {\n                path: ctx.path,\n                errorMap: ctx.common.contextualErrorMap,\n            });\n        }));\n    }\n}\nZodPromise.create = (schema, params) => {\n    return new ZodPromise({\n        type: schema,\n        typeName: ZodFirstPartyTypeKind.ZodPromise,\n        ...processCreateParams(params),\n    });\n};\nexport class ZodEffects extends ZodType {\n    innerType() {\n        return this._def.schema;\n    }\n    sourceType() {\n        return this._def.schema._def.typeName === ZodFirstPartyTypeKind.ZodEffects\n            ? this._def.schema.sourceType()\n            : this._def.schema;\n    }\n    _parse(input) {\n        const { status, ctx } = this._processInputParams(input);\n        const effect = this._def.effect || null;\n        const checkCtx = {\n            addIssue: (arg) => {\n                addIssueToContext(ctx, arg);\n                if (arg.fatal) {\n                    status.abort();\n                }\n                else {\n                    status.dirty();\n                }\n            },\n            get path() {\n                return ctx.path;\n            },\n        };\n        checkCtx.addIssue = checkCtx.addIssue.bind(checkCtx);\n        if (effect.type === \"preprocess\") {\n            const processed = effect.transform(ctx.data, checkCtx);\n            if (ctx.common.async) {\n                return Promise.resolve(processed).then(async (processed) => {\n                    if (status.value === \"aborted\")\n                        return INVALID;\n                    const result = await this._def.schema._parseAsync({\n                        data: processed,\n                        path: ctx.path,\n                        parent: ctx,\n                    });\n                    if (result.status === \"aborted\")\n                        return INVALID;\n                    if (result.status === \"dirty\")\n                        return DIRTY(result.value);\n                    if (status.value === \"dirty\")\n                        return DIRTY(result.value);\n                    return result;\n                });\n            }\n            else {\n                if (status.value === \"aborted\")\n                    return INVALID;\n                const result = this._def.schema._parseSync({\n                    data: processed,\n                    path: ctx.path,\n                    parent: ctx,\n                });\n                if (result.status === \"aborted\")\n                    return INVALID;\n                if (result.status === \"dirty\")\n                    return DIRTY(result.value);\n                if (status.value === \"dirty\")\n                    return DIRTY(result.value);\n                return result;\n            }\n        }\n        if (effect.type === \"refinement\") {\n            const executeRefinement = (acc) => {\n                const result = effect.refinement(acc, checkCtx);\n                if (ctx.common.async) {\n                    return Promise.resolve(result);\n                }\n                if (result instanceof Promise) {\n                    throw new Error(\"Async refinement encountered during synchronous parse operation. Use .parseAsync instead.\");\n                }\n                return acc;\n            };\n            if (ctx.common.async === false) {\n                const inner = this._def.schema._parseSync({\n                    data: ctx.data,\n                    path: ctx.path,\n                    parent: ctx,\n                });\n                if (inner.status === \"aborted\")\n                    return INVALID;\n                if (inner.status === \"dirty\")\n                    status.dirty();\n                // return value is ignored\n                executeRefinement(inner.value);\n                return { status: status.value, value: inner.value };\n            }\n            else {\n                return this._def.schema._parseAsync({ data: ctx.data, path: ctx.path, parent: ctx }).then((inner) => {\n                    if (inner.status === \"aborted\")\n                        return INVALID;\n                    if (inner.status === \"dirty\")\n                        status.dirty();\n                    return executeRefinement(inner.value).then(() => {\n                        return { status: status.value, value: inner.value };\n                    });\n                });\n            }\n        }\n        if (effect.type === \"transform\") {\n            if (ctx.common.async === false) {\n                const base = this._def.schema._parseSync({\n                    data: ctx.data,\n                    path: ctx.path,\n                    parent: ctx,\n                });\n                if (!isValid(base))\n                    return INVALID;\n                const result = effect.transform(base.value, checkCtx);\n                if (result instanceof Promise) {\n                    throw new Error(`Asynchronous transform encountered during synchronous parse operation. Use .parseAsync instead.`);\n                }\n                return { status: status.value, value: result };\n            }\n            else {\n                return this._def.schema._parseAsync({ data: ctx.data, path: ctx.path, parent: ctx }).then((base) => {\n                    if (!isValid(base))\n                        return INVALID;\n                    return Promise.resolve(effect.transform(base.value, checkCtx)).then((result) => ({\n                        status: status.value,\n                        value: result,\n                    }));\n                });\n            }\n        }\n        util.assertNever(effect);\n    }\n}\nZodEffects.create = (schema, effect, params) => {\n    return new ZodEffects({\n        schema,\n        typeName: ZodFirstPartyTypeKind.ZodEffects,\n        effect,\n        ...processCreateParams(params),\n    });\n};\nZodEffects.createWithPreprocess = (preprocess, schema, params) => {\n    return new ZodEffects({\n        schema,\n        effect: { type: \"preprocess\", transform: preprocess },\n        typeName: ZodFirstPartyTypeKind.ZodEffects,\n        ...processCreateParams(params),\n    });\n};\nexport { ZodEffects as ZodTransformer };\nexport class ZodOptional extends ZodType {\n    _parse(input) {\n        const parsedType = this._getType(input);\n        if (parsedType === ZodParsedType.undefined) {\n            return OK(undefined);\n        }\n        return this._def.innerType._parse(input);\n    }\n    unwrap() {\n        return this._def.innerType;\n    }\n}\nZodOptional.create = (type, params) => {\n    return new ZodOptional({\n        innerType: type,\n        typeName: ZodFirstPartyTypeKind.ZodOptional,\n        ...processCreateParams(params),\n    });\n};\nexport class ZodNullable extends ZodType {\n    _parse(input) {\n        const parsedType = this._getType(input);\n        if (parsedType === ZodParsedType.null) {\n            return OK(null);\n        }\n        return this._def.innerType._parse(input);\n    }\n    unwrap() {\n        return this._def.innerType;\n    }\n}\nZodNullable.create = (type, params) => {\n    return new ZodNullable({\n        innerType: type,\n        typeName: ZodFirstPartyTypeKind.ZodNullable,\n        ...processCreateParams(params),\n    });\n};\nexport class ZodDefault extends ZodType {\n    _parse(input) {\n        const { ctx } = this._processInputParams(input);\n        let data = ctx.data;\n        if (ctx.parsedType === ZodParsedType.undefined) {\n            data = this._def.defaultValue();\n        }\n        return this._def.innerType._parse({\n            data,\n            path: ctx.path,\n            parent: ctx,\n        });\n    }\n    removeDefault() {\n        return this._def.innerType;\n    }\n}\nZodDefault.create = (type, params) => {\n    return new ZodDefault({\n        innerType: type,\n        typeName: ZodFirstPartyTypeKind.ZodDefault,\n        defaultValue: typeof params.default === \"function\" ? params.default : () => params.default,\n        ...processCreateParams(params),\n    });\n};\nexport class ZodCatch extends ZodType {\n    _parse(input) {\n        const { ctx } = this._processInputParams(input);\n        // newCtx is used to not collect issues from inner types in ctx\n        const newCtx = {\n            ...ctx,\n            common: {\n                ...ctx.common,\n                issues: [],\n            },\n        };\n        const result = this._def.innerType._parse({\n            data: newCtx.data,\n            path: newCtx.path,\n            parent: {\n                ...newCtx,\n            },\n        });\n        if (isAsync(result)) {\n            return result.then((result) => {\n                return {\n                    status: \"valid\",\n                    value: result.status === \"valid\"\n                        ? result.value\n                        : this._def.catchValue({\n                            get error() {\n                                return new ZodError(newCtx.common.issues);\n                            },\n                            input: newCtx.data,\n                        }),\n                };\n            });\n        }\n        else {\n            return {\n                status: \"valid\",\n                value: result.status === \"valid\"\n                    ? result.value\n                    : this._def.catchValue({\n                        get error() {\n                            return new ZodError(newCtx.common.issues);\n                        },\n                        input: newCtx.data,\n                    }),\n            };\n        }\n    }\n    removeCatch() {\n        return this._def.innerType;\n    }\n}\nZodCatch.create = (type, params) => {\n    return new ZodCatch({\n        innerType: type,\n        typeName: ZodFirstPartyTypeKind.ZodCatch,\n        catchValue: typeof params.catch === \"function\" ? params.catch : () => params.catch,\n        ...processCreateParams(params),\n    });\n};\nexport class ZodNaN extends ZodType {\n    _parse(input) {\n        const parsedType = this._getType(input);\n        if (parsedType !== ZodParsedType.nan) {\n            const ctx = this._getOrReturnCtx(input);\n            addIssueToContext(ctx, {\n                code: ZodIssueCode.invalid_type,\n                expected: ZodParsedType.nan,\n                received: ctx.parsedType,\n            });\n            return INVALID;\n        }\n        return { status: \"valid\", value: input.data };\n    }\n}\nZodNaN.create = (params) => {\n    return new ZodNaN({\n        typeName: ZodFirstPartyTypeKind.ZodNaN,\n        ...processCreateParams(params),\n    });\n};\nexport const BRAND = Symbol(\"zod_brand\");\nexport class ZodBranded extends ZodType {\n    _parse(input) {\n        const { ctx } = this._processInputParams(input);\n        const data = ctx.data;\n        return this._def.type._parse({\n            data,\n            path: ctx.path,\n            parent: ctx,\n        });\n    }\n    unwrap() {\n        return this._def.type;\n    }\n}\nexport class ZodPipeline extends ZodType {\n    _parse(input) {\n        const { status, ctx } = this._processInputParams(input);\n        if (ctx.common.async) {\n            const handleAsync = async () => {\n                const inResult = await this._def.in._parseAsync({\n                    data: ctx.data,\n                    path: ctx.path,\n                    parent: ctx,\n                });\n                if (inResult.status === \"aborted\")\n                    return INVALID;\n                if (inResult.status === \"dirty\") {\n                    status.dirty();\n                    return DIRTY(inResult.value);\n                }\n                else {\n                    return this._def.out._parseAsync({\n                        data: inResult.value,\n                        path: ctx.path,\n                        parent: ctx,\n                    });\n                }\n            };\n            return handleAsync();\n        }\n        else {\n            const inResult = this._def.in._parseSync({\n                data: ctx.data,\n                path: ctx.path,\n                parent: ctx,\n            });\n            if (inResult.status === \"aborted\")\n                return INVALID;\n            if (inResult.status === \"dirty\") {\n                status.dirty();\n                return {\n                    status: \"dirty\",\n                    value: inResult.value,\n                };\n            }\n            else {\n                return this._def.out._parseSync({\n                    data: inResult.value,\n                    path: ctx.path,\n                    parent: ctx,\n                });\n            }\n        }\n    }\n    static create(a, b) {\n        return new ZodPipeline({\n            in: a,\n            out: b,\n            typeName: ZodFirstPartyTypeKind.ZodPipeline,\n        });\n    }\n}\nexport class ZodReadonly extends ZodType {\n    _parse(input) {\n        const result = this._def.innerType._parse(input);\n        const freeze = (data) => {\n            if (isValid(data)) {\n                data.value = Object.freeze(data.value);\n            }\n            return data;\n        };\n        return isAsync(result) ? result.then((data) => freeze(data)) : freeze(result);\n    }\n    unwrap() {\n        return this._def.innerType;\n    }\n}\nZodReadonly.create = (type, params) => {\n    return new ZodReadonly({\n        innerType: type,\n        typeName: ZodFirstPartyTypeKind.ZodReadonly,\n        ...processCreateParams(params),\n    });\n};\n////////////////////////////////////////\n////////////////////////////////////////\n//////////                    //////////\n//////////      z.custom      //////////\n//////////                    //////////\n////////////////////////////////////////\n////////////////////////////////////////\nfunction cleanParams(params, data) {\n    const p = typeof params === \"function\" ? params(data) : typeof params === \"string\" ? { message: params } : params;\n    const p2 = typeof p === \"string\" ? { message: p } : p;\n    return p2;\n}\nexport function custom(check, _params = {}, \n/**\n * @deprecated\n *\n * Pass `fatal` into the params object instead:\n *\n * ```ts\n * z.string().custom((val) => val.length > 5, { fatal: false })\n * ```\n *\n */\nfatal) {\n    if (check)\n        return ZodAny.create().superRefine((data, ctx) => {\n            const r = check(data);\n            if (r instanceof Promise) {\n                return r.then((r) => {\n                    if (!r) {\n                        const params = cleanParams(_params, data);\n                        const _fatal = params.fatal ?? fatal ?? true;\n                        ctx.addIssue({ code: \"custom\", ...params, fatal: _fatal });\n                    }\n                });\n            }\n            if (!r) {\n                const params = cleanParams(_params, data);\n                const _fatal = params.fatal ?? fatal ?? true;\n                ctx.addIssue({ code: \"custom\", ...params, fatal: _fatal });\n            }\n            return;\n        });\n    return ZodAny.create();\n}\nexport { ZodType as Schema, ZodType as ZodSchema };\nexport const late = {\n    object: ZodObject.lazycreate,\n};\nexport var ZodFirstPartyTypeKind;\n(function (ZodFirstPartyTypeKind) {\n    ZodFirstPartyTypeKind[\"ZodString\"] = \"ZodString\";\n    ZodFirstPartyTypeKind[\"ZodNumber\"] = \"ZodNumber\";\n    ZodFirstPartyTypeKind[\"ZodNaN\"] = \"ZodNaN\";\n    ZodFirstPartyTypeKind[\"ZodBigInt\"] = \"ZodBigInt\";\n    ZodFirstPartyTypeKind[\"ZodBoolean\"] = \"ZodBoolean\";\n    ZodFirstPartyTypeKind[\"ZodDate\"] = \"ZodDate\";\n    ZodFirstPartyTypeKind[\"ZodSymbol\"] = \"ZodSymbol\";\n    ZodFirstPartyTypeKind[\"ZodUndefined\"] = \"ZodUndefined\";\n    ZodFirstPartyTypeKind[\"ZodNull\"] = \"ZodNull\";\n    ZodFirstPartyTypeKind[\"ZodAny\"] = \"ZodAny\";\n    ZodFirstPartyTypeKind[\"ZodUnknown\"] = \"ZodUnknown\";\n    ZodFirstPartyTypeKind[\"ZodNever\"] = \"ZodNever\";\n    ZodFirstPartyTypeKind[\"ZodVoid\"] = \"ZodVoid\";\n    ZodFirstPartyTypeKind[\"ZodArray\"] = \"ZodArray\";\n    ZodFirstPartyTypeKind[\"ZodObject\"] = \"ZodObject\";\n    ZodFirstPartyTypeKind[\"ZodUnion\"] = \"ZodUnion\";\n    ZodFirstPartyTypeKind[\"ZodDiscriminatedUnion\"] = \"ZodDiscriminatedUnion\";\n    ZodFirstPartyTypeKind[\"ZodIntersection\"] = \"ZodIntersection\";\n    ZodFirstPartyTypeKind[\"ZodTuple\"] = \"ZodTuple\";\n    ZodFirstPartyTypeKind[\"ZodRecord\"] = \"ZodRecord\";\n    ZodFirstPartyTypeKind[\"ZodMap\"] = \"ZodMap\";\n    ZodFirstPartyTypeKind[\"ZodSet\"] = \"ZodSet\";\n    ZodFirstPartyTypeKind[\"ZodFunction\"] = \"ZodFunction\";\n    ZodFirstPartyTypeKind[\"ZodLazy\"] = \"ZodLazy\";\n    ZodFirstPartyTypeKind[\"ZodLiteral\"] = \"ZodLiteral\";\n    ZodFirstPartyTypeKind[\"ZodEnum\"] = \"ZodEnum\";\n    ZodFirstPartyTypeKind[\"ZodEffects\"] = \"ZodEffects\";\n    ZodFirstPartyTypeKind[\"ZodNativeEnum\"] = \"ZodNativeEnum\";\n    ZodFirstPartyTypeKind[\"ZodOptional\"] = \"ZodOptional\";\n    ZodFirstPartyTypeKind[\"ZodNullable\"] = \"ZodNullable\";\n    ZodFirstPartyTypeKind[\"ZodDefault\"] = \"ZodDefault\";\n    ZodFirstPartyTypeKind[\"ZodCatch\"] = \"ZodCatch\";\n    ZodFirstPartyTypeKind[\"ZodPromise\"] = \"ZodPromise\";\n    ZodFirstPartyTypeKind[\"ZodBranded\"] = \"ZodBranded\";\n    ZodFirstPartyTypeKind[\"ZodPipeline\"] = \"ZodPipeline\";\n    ZodFirstPartyTypeKind[\"ZodReadonly\"] = \"ZodReadonly\";\n})(ZodFirstPartyTypeKind || (ZodFirstPartyTypeKind = {}));\n// requires TS 4.4+\nclass Class {\n    constructor(..._) { }\n}\nconst instanceOfType = (\n// const instanceOfType = <T extends new (...args: any[]) => any>(\ncls, params = {\n    message: `Input not instance of ${cls.name}`,\n}) => custom((data) => data instanceof cls, params);\nconst stringType = ZodString.create;\nconst numberType = ZodNumber.create;\nconst nanType = ZodNaN.create;\nconst bigIntType = ZodBigInt.create;\nconst booleanType = ZodBoolean.create;\nconst dateType = ZodDate.create;\nconst symbolType = ZodSymbol.create;\nconst undefinedType = ZodUndefined.create;\nconst nullType = ZodNull.create;\nconst anyType = ZodAny.create;\nconst unknownType = ZodUnknown.create;\nconst neverType = ZodNever.create;\nconst voidType = ZodVoid.create;\nconst arrayType = ZodArray.create;\nconst objectType = ZodObject.create;\nconst strictObjectType = ZodObject.strictCreate;\nconst unionType = ZodUnion.create;\nconst discriminatedUnionType = ZodDiscriminatedUnion.create;\nconst intersectionType = ZodIntersection.create;\nconst tupleType = ZodTuple.create;\nconst recordType = ZodRecord.create;\nconst mapType = ZodMap.create;\nconst setType = ZodSet.create;\nconst functionType = ZodFunction.create;\nconst lazyType = ZodLazy.create;\nconst literalType = ZodLiteral.create;\nconst enumType = ZodEnum.create;\nconst nativeEnumType = ZodNativeEnum.create;\nconst promiseType = ZodPromise.create;\nconst effectsType = ZodEffects.create;\nconst optionalType = ZodOptional.create;\nconst nullableType = ZodNullable.create;\nconst preprocessType = ZodEffects.createWithPreprocess;\nconst pipelineType = ZodPipeline.create;\nconst ostring = () => stringType().optional();\nconst onumber = () => numberType().optional();\nconst oboolean = () => booleanType().optional();\nexport const coerce = {\n    string: ((arg) => ZodString.create({ ...arg, coerce: true })),\n    number: ((arg) => ZodNumber.create({ ...arg, coerce: true })),\n    boolean: ((arg) => ZodBoolean.create({\n        ...arg,\n        coerce: true,\n    })),\n    bigint: ((arg) => ZodBigInt.create({ ...arg, coerce: true })),\n    date: ((arg) => ZodDate.create({ ...arg, coerce: true })),\n};\nexport { anyType as any, arrayType as array, bigIntType as bigint, booleanType as boolean, dateType as date, discriminatedUnionType as discriminatedUnion, effectsType as effect, enumType as enum, functionType as function, instanceOfType as instanceof, intersectionType as intersection, lazyType as lazy, literalType as literal, mapType as map, nanType as nan, nativeEnumType as nativeEnum, neverType as never, nullType as null, nullableType as nullable, numberType as number, objectType as object, oboolean, onumber, optionalType as optional, ostring, pipelineType as pipeline, preprocessType as preprocess, promiseType as promise, recordType as record, setType as set, strictObjectType as strictObject, stringType as string, symbolType as symbol, effectsType as transformer, tupleType as tuple, undefinedType as undefined, unionType as union, unknownType as unknown, voidType as void, };\nexport const NEVER = INVALID;\n", null, null, null, null, null, "import * as net from 'net';\nimport {\n  UNITY_CONNECTION,\n  JSONRPC,\n  TIMEOUTS,\n  ERROR_MESSAGES,\n  DEFAULT_CLIENT_NAME,\n  ServerShutdownReason,\n} from './constants.js';\n// Debug logging removed\nimport { SafeTimer, safeSetTimeout, stopSafeTimer } from './utils/safe-timer.js';\n\nconst createSafeTimeout = (callback: () => void, delay: number): SafeTimer => {\n  return safeSetTimeout(callback, delay);\n};\nimport { ConnectionManager } from './connection-manager.js';\nimport { MessageHandler } from './message-handler.js';\nimport { VibeLogger } from './utils/vibe-logger.js';\n\n/**\n * Unity client interface for external dependencies\n */\ninterface UnityDiscovery {\n  handleConnectionLost(): void;\n}\n\n/**\n * TCP/IP client for communication with Unity\n * Implemented as Singleton to prevent multiple Unity connections\n *\n * Design document reference: Packages/src/TypeScriptServer~/ARCHITECTURE.md\n *\n * Related classes:\n * - UnityMcpServer: The main server class that uses this client\n * - DynamicUnityCommandTool: Uses this client to execute tools in Unity\n * - ConnectionManager: Handles connection state and reconnection polling\n * - MessageHandler: Handles JSON-RPC message processing\n */\nexport class UnityClient {\n  private static readonly MAX_COUNTER = 9999;\n  private static readonly COUNTER_PADDING = 4;\n  private static instance: UnityClient | null = null;\n\n  private socket: net.Socket | null = null;\n  private _connected: boolean = false;\n  private port: number;\n  private readonly host: string = UNITY_CONNECTION.DEFAULT_HOST;\n  private reconnectHandlers: Set<() => void> = new Set();\n  private connectionManager: ConnectionManager = new ConnectionManager();\n  private messageHandler: MessageHandler = new MessageHandler();\n  private unityDiscovery: UnityDiscovery | null = null; // Reference to UnityDiscovery for connection loss handling\n  private requestIdCounter: number = 0; // Will be incremented to 1 on first use\n  private readonly processId: number = process.pid;\n  private readonly randomSeed: number = Math.floor(Math.random() * 1000);\n  private storedClientName: string | null = null;\n  private isConnecting: boolean = false;\n  private connectingPromise: Promise<void> | null = null;\n  private hasEverConnected: boolean = false;\n  private shutdownReason: ServerShutdownReason | null = null;\n\n  private constructor() {\n    const unityTcpPort: string | undefined = process.env.UNITY_TCP_PORT;\n\n    if (!unityTcpPort) {\n      throw new Error('UNITY_TCP_PORT environment variable is required but not set');\n    }\n\n    const parsedPort: number = parseInt(unityTcpPort, 10);\n    if (isNaN(parsedPort) || parsedPort <= 0 || parsedPort > 65535) {\n      throw new Error(`UNITY_TCP_PORT must be a valid port number (1-65535), got: ${unityTcpPort}`);\n    }\n\n    this.port = parsedPort;\n  }\n\n  /**\n   * Get the singleton instance of UnityClient\n   */\n  static getInstance(): UnityClient {\n    if (!UnityClient.instance) {\n      UnityClient.instance = new UnityClient();\n    }\n    return UnityClient.instance;\n  }\n\n  /**\n   * Reset the singleton instance (for testing purposes)\n   */\n  static resetInstance(): void {\n    if (UnityClient.instance) {\n      UnityClient.instance.disconnect();\n      UnityClient.instance.storedClientName = null;\n      UnityClient.instance = null;\n    }\n  }\n\n  /**\n   * Update Unity connection port (for discovery)\n   */\n  updatePort(newPort: number): void {\n    this.port = newPort;\n  }\n\n  /**\n   * Set Unity Discovery reference for connection loss handling\n   */\n  setUnityDiscovery(unityDiscovery: UnityDiscovery): void {\n    this.unityDiscovery = unityDiscovery;\n  }\n\n  get connected(): boolean {\n    return this._connected && this.socket !== null && !this.socket.destroyed;\n  }\n\n  /**\n   * Register notification handler for specific method\n   */\n  onNotification(method: string, handler: (params: unknown) => void): void {\n    this.messageHandler.onNotification(method, handler);\n  }\n\n  /**\n   * Remove notification handler\n   */\n  offNotification(method: string): void {\n    this.messageHandler.offNotification(method);\n  }\n\n  /**\n   * Set shutdown reason received from Unity server\n   * @param reason The reason for server shutdown\n   */\n  setShutdownReason(reason: ServerShutdownReason): void {\n    this.shutdownReason = reason;\n  }\n\n  /**\n   * Get whether the client has ever connected successfully\n   */\n  getHasEverConnected(): boolean {\n    return this.hasEverConnected;\n  }\n\n  /**\n   * Register reconnect handler\n   */\n  onReconnect(handler: () => void): void {\n    this.reconnectHandlers.add(handler);\n  }\n\n  /**\n   * Remove reconnect handler\n   */\n  offReconnect(handler: () => void): void {\n    this.reconnectHandlers.delete(handler);\n  }\n\n  /**\n   * Lightweight connection health check\n   * Tests socket state without creating new connections\n   */\n  async testConnection(): Promise<boolean> {\n    // First check: basic connection state (lightweight)\n    if (!this._connected || this.socket === null || this.socket.destroyed) {\n      return false;\n    }\n\n    // Second check: socket readability/writability (lightweight)\n    if (!this.socket.readable || !this.socket.writable) {\n      this._connected = false;\n      return false;\n    }\n\n    // Third check: ping test with timeout (only if socket state is good)\n    let timeoutTimer: SafeTimer | null = null;\n\n    try {\n      await Promise.race([\n        this.ping(UNITY_CONNECTION.CONNECTION_TEST_MESSAGE),\n        new Promise<never>((_resolve, reject: (reason?: unknown) => void) => {\n          timeoutTimer = createSafeTimeout(() => {\n            reject(new Error('Health check timeout'));\n          }, 1000);\n        }),\n      ]);\n    } catch {\n      return false;\n    } finally {\n      stopSafeTimer(timeoutTimer);\n      timeoutTimer = null;\n    }\n\n    return true;\n  }\n\n  /**\n   * Ensure connection to Unity (singleton-safe reconnection)\n   * Properly manages single connection instance\n   */\n  async ensureConnected(): Promise<void> {\n    // If already connected and healthy, return immediately\n    if (this._connected && this.socket && !this.socket.destroyed) {\n      try {\n        if (await this.testConnection()) {\n          return;\n        }\n      } catch {\n        // Health check failed - need to reconnect\n      }\n    }\n\n    // Deduplicate concurrent connect attempts\n    if (this.connectingPromise) {\n      await this.connectingPromise;\n      return;\n    }\n\n    // Start a single connect attempt\n    this.connectingPromise = (async (): Promise<void> => {\n      this.isConnecting = true;\n      // Disconnect any existing connection before creating new one\n      this.disconnect();\n      await this.connect();\n    })()\n      .catch((error) => {\n        VibeLogger.logError('unity_connect_failed', 'Unity connect attempt failed', {\n          message: error instanceof Error ? error.message : String(error),\n        });\n        throw error;\n      })\n      .finally(() => {\n        this.isConnecting = false;\n        this.connectingPromise = null;\n      });\n\n    await this.connectingPromise;\n  }\n\n  /**\n   * Connect to Unity\n   * Creates a new socket connection (should only be called after disconnect)\n   */\n  async connect(): Promise<void> {\n    // Ensure we don't create multiple connections\n    if (this._connected && this.socket && !this.socket.destroyed) {\n      return; // Already connected\n    }\n\n    return new Promise((resolve, reject) => {\n      this.socket = new net.Socket();\n      const currentSocket: net.Socket = this.socket;\n      let connectionEstablished: boolean = false;\n      let promiseSettled: boolean = false;\n\n      const finalizeInitialFailure = (error: Error, logCode: string, logMessage: string): void => {\n        if (promiseSettled) {\n          return;\n        }\n        promiseSettled = true;\n        VibeLogger.logError(logCode, logMessage, { message: error.message });\n        if (!currentSocket.destroyed) {\n          currentSocket.destroy();\n        }\n        if (this.socket === currentSocket) {\n          this.socket = null;\n        }\n        reject(error);\n      };\n\n      currentSocket.connect(this.port, this.host, () => {\n        this._connected = true;\n        this.hasEverConnected = true;\n        this.shutdownReason = null; // Reset shutdown reason on successful connection\n        connectionEstablished = true;\n        promiseSettled = true;\n\n        this.reconnectHandlers.forEach((handler) => {\n          try {\n            handler();\n          } catch (error) {\n            VibeLogger.logError(\n              'unity_reconnect_handler_error',\n              'Unity reconnect handler threw an error',\n              {\n                message: error instanceof Error ? error.message : String(error),\n                stack: error instanceof Error ? error.stack : undefined,\n              },\n            );\n          }\n        });\n\n        resolve();\n      });\n\n      currentSocket.on('error', (error: Error) => {\n        this._connected = false;\n        if (!connectionEstablished) {\n          finalizeInitialFailure(\n            new Error(`Unity connection failed: ${error.message}`),\n            'unity_connect_attempt_failed',\n            'Unity socket error during connection attempt',\n          );\n          return;\n        }\n\n        VibeLogger.logError('unity_socket_error', 'Unity socket error', {\n          message: error.message,\n        });\n        this.handleConnectionLoss();\n      });\n\n      currentSocket.on('close', () => {\n        this._connected = false;\n        if (!connectionEstablished) {\n          finalizeInitialFailure(\n            new Error('Unity connection closed before being established'),\n            'unity_connect_closed_pre_handshake',\n            'Unity socket closed during connection attempt',\n          );\n          return;\n        }\n        this.handleConnectionLoss();\n      });\n\n      currentSocket.on('end', () => {\n        this._connected = false;\n        if (!connectionEstablished) {\n          finalizeInitialFailure(\n            new Error('Unity connection ended before being established'),\n            'unity_connect_end_pre_handshake',\n            'Unity socket ended during connection attempt',\n          );\n          return;\n        }\n        this.handleConnectionLoss();\n      });\n\n      currentSocket.on('data', (data: Buffer) => {\n        this.messageHandler.handleIncomingData(data);\n      });\n    });\n  }\n\n  /**\n   * Detect client name from stored value, environment variables, or default\n   */\n  private detectClientName(): string {\n    if (this.storedClientName) {\n      return this.storedClientName;\n    }\n    return process.env.MCP_CLIENT_NAME || DEFAULT_CLIENT_NAME;\n  }\n\n  /**\n   * Send client name to Unity for identification\n   */\n  async setClientName(clientName?: string): Promise<void> {\n    if (!this.connected) {\n      return; // Skip if not connected\n    }\n\n    // Store client name if explicitly provided\n    if (clientName) {\n      this.storedClientName = clientName;\n    }\n\n    // Use provided client name or fallback to environment detection\n    const finalClientName = clientName || this.detectClientName();\n\n    const request = {\n      jsonrpc: JSONRPC.VERSION,\n      id: this.generateId(),\n      method: 'set-client-name',\n      params: {\n        ClientName: finalClientName,\n      },\n    };\n\n    try {\n      const response = await this.sendRequest(request);\n\n      if (response.error) {\n        // Failed to set client name\n      }\n    } catch {\n      // Error setting client name\n    }\n  }\n\n  /**\n   * Send ping to Unity\n   */\n  async ping(message: string): Promise<unknown> {\n    if (!this.connected) {\n      throw new Error('Not connected to Unity');\n    }\n\n    const request = {\n      jsonrpc: JSONRPC.VERSION,\n      id: this.generateId(),\n      method: 'ping',\n      params: {\n        Message: message, // Updated to match PingSchema property name\n      },\n    };\n\n    const response = await this.sendRequest(request, 1000); // 1\u79D2\u3067\u30BF\u30A4\u30E0\u30A2\u30A6\u30C8\n\n    if (response.error) {\n      throw new Error(`Unity error: ${response.error.message}`);\n    }\n\n    // Return the full response object (now includes timing information)\n    return response.result || { Message: 'Unity pong' };\n  }\n\n  /**\n   * Get available tools from Unity\n   */\n  async getAvailableTools(): Promise<string[]> {\n    await this.ensureConnected();\n\n    const request = {\n      jsonrpc: JSONRPC.VERSION,\n      id: this.generateId(),\n      method: 'getAvailableTools',\n      params: {},\n    };\n\n    const response = await this.sendRequest(request);\n\n    if (response.error) {\n      throw new Error(`Failed to get available tools: ${response.error.message}`);\n    }\n\n    return (response.result as string[]) || [];\n  }\n\n  /**\n   * Get tool details from Unity\n   */\n  async getToolDetails(\n    includeDevelopmentOnly: boolean = false,\n  ): Promise<Array<{ name: string; description: string; parameterSchema?: unknown }>> {\n    await this.ensureConnected();\n\n    const request = {\n      jsonrpc: JSONRPC.VERSION,\n      id: this.generateId(),\n      method: 'get-tool-details',\n      params: { IncludeDevelopmentOnly: includeDevelopmentOnly },\n    };\n\n    const response = await this.sendRequest(request);\n\n    if (response.error) {\n      throw new Error(`Failed to get tool details: ${response.error.message}`);\n    }\n\n    return (\n      (response.result as Array<{\n        name: string;\n        description: string;\n        parameterSchema?: unknown;\n      }>) || []\n    );\n  }\n\n  /**\n   * Execute any Unity tool dynamically\n   */\n  async executeTool(toolName: string, params: Record<string, unknown> = {}): Promise<unknown> {\n    // Handle disconnected state with appropriate message\n    if (!this.connected) {\n      // Server never started \u2192 error\n      if (!this.hasEverConnected) {\n        throw new Error(this.getServerNotRunningMessage());\n      }\n      // Editor quit (shutdown notification received with EditorQuit reason) \u2192 error\n      if (this.shutdownReason === ServerShutdownReason.EDITOR_QUIT) {\n        throw new Error(this.getServerNotRunningMessage());\n      }\n      // Domain reload or compilation in progress \u2192 guidance message as success response\n      return this.getOsSpecificReconnectMessage();\n    }\n\n    // Ensure client name is set (this completes the connection handshake)\n    await this.setClientName();\n\n    const request = {\n      jsonrpc: JSONRPC.VERSION,\n      id: this.generateId(),\n      method: toolName,\n      params: params,\n    };\n\n    // Executing tool with params\n\n    // Unity handles timeout control, so TS uses longer network timeout\n    const timeoutMs = TIMEOUTS.NETWORK;\n\n    try {\n      const response = await this.sendRequest(request, timeoutMs);\n\n      return this.handleToolResponse(response);\n    } catch (error) {\n      // Log timeout details to file for debugging in production\n      if (error instanceof Error && error.message.includes('timed out')) {\n        // Timeout occurred\n      }\n\n      throw error;\n    }\n  }\n\n  /**\n   * Build a guidance message for temporary disconnection after compile.\n   */\n  private getOsSpecificReconnectMessage(): string {\n    const baseMessage: string =\n      'Waiting for Unity to be ready (normal during compilation). Wait 3 seconds then retry. If still not ready after several attempts, increase wait time (5 \u2192 10 seconds). Report as error only after 1+ minute of failures.';\n\n    const platform: string = process.platform;\n\n    if (platform === 'win32') {\n      return `${baseMessage} Example: Start-Sleep -Seconds 3`;\n    }\n\n    return `${baseMessage} Example: sleep 3`;\n  }\n\n  /**\n   * Build an error message for when Unity server is not running.\n   */\n  private getServerNotRunningMessage(): string {\n    return 'Unity server is not running. Please start Unity Editor and ensure uLoopMCP package is properly installed. If Unity is already running, check Window > uLoopMCP > Server Status.';\n  }\n\n  private handleToolResponse(response: { error?: { message: string }; result?: unknown }): unknown {\n    if (response.error) {\n      throw new Error(response.error.message);\n    }\n\n    return response.result;\n  }\n\n  /**\n   * Generate unique request ID as string\n   * Uses timestamp + process ID + random seed + counter for guaranteed uniqueness across processes\n   */\n  private generateId(): string {\n    if (this.requestIdCounter >= UnityClient.MAX_COUNTER) {\n      this.requestIdCounter = 1;\n    } else {\n      this.requestIdCounter++;\n    }\n\n    // Format: \"ts_[timestamp]_[processId]_[randomSeed]_[counter]\"\n    // Example: \"ts_1752718618309_58009_123_0001\"\n    const timestamp = Date.now();\n    const processId = this.processId;\n    const randomSeed = this.randomSeed;\n    const counter = this.requestIdCounter.toString().padStart(UnityClient.COUNTER_PADDING, '0');\n\n    return `ts_${timestamp}_${processId}_${randomSeed}_${counter}`;\n  }\n\n  /**\n   * Send request and wait for response\n   */\n  private async sendRequest(\n    request: { id: string; method: string; [key: string]: unknown },\n    timeoutMs?: number,\n  ): Promise<{ id: string; error?: { message: string }; result?: unknown }> {\n    return new Promise((resolve, reject) => {\n      // Use provided timeout or default to NETWORK timeout\n      const timeout_duration = timeoutMs || TIMEOUTS.NETWORK;\n\n      // Use SafeTimer for automatic cleanup to prevent orphaned processes\n      const timeoutTimer = safeSetTimeout(() => {\n        // Network timeout occurred\n        this.messageHandler.clearPendingRequests(`Request ${ERROR_MESSAGES.TIMEOUT}`);\n        reject(new Error(`Request ${ERROR_MESSAGES.TIMEOUT}`));\n      }, timeout_duration);\n\n      // Register the pending request\n      this.messageHandler.registerPendingRequest(\n        request.id,\n        (response) => {\n          stopSafeTimer(timeoutTimer); // Clean up timer\n          resolve(response as { id: string; error?: { message: string }; result?: unknown });\n        },\n        (error) => {\n          stopSafeTimer(timeoutTimer); // Clean up timer\n          reject(error instanceof Error ? error : new Error(String(error)));\n        },\n      );\n\n      // Send the request\n      const requestStr = this.messageHandler.createRequest(\n        request.method,\n        request.params as Record<string, unknown>,\n        request.id,\n      );\n      if (this.socket) {\n        this.socket.write(requestStr);\n      }\n    });\n  }\n\n  /**\n   * Disconnect\n   *\n   * IMPORTANT: Always clean up timers when disconnecting!\n   * Failure to properly clean up timers can cause orphaned processes\n   * that prevent Node.js from exiting gracefully.\n   */\n  disconnect(): void {\n    this.connectionManager.stopPolling(); // Stop polling when manually disconnecting\n\n    // Clean up all pending requests and their timers\n    // CRITICAL: This prevents orphaned processes by ensuring all setTimeout timers are cleared\n    this.messageHandler.clearPendingRequests('Connection closed');\n\n    // Clear the Content-Length framing buffer\n    this.messageHandler.clearBuffer();\n\n    // Reset request ID counter to prevent ID conflicts on reconnection\n    this.requestIdCounter = 0;\n\n    if (this.socket) {\n      this.socket.destroy();\n      this.socket = null;\n    }\n    this._connected = false;\n  }\n\n  /**\n   * Handle connection loss by delegating to UnityDiscovery\n   */\n  private handleConnectionLoss(): void {\n    // Trigger ConnectionManager callback for backward compatibility\n    this.connectionManager.triggerConnectionLost();\n\n    // Delegate to UnityDiscovery for unified connection management\n    if (this.unityDiscovery) {\n      this.unityDiscovery.handleConnectionLost();\n    }\n  }\n\n  /**\n   * Set callback for when connection is restored\n   */\n  setReconnectedCallback(callback: () => void): void {\n    this.connectionManager.setReconnectedCallback(callback);\n  }\n\n  /**\n   * Fetch tool details from Unity with development mode support\n   */\n  async fetchToolDetailsFromUnity(\n    includeDevelopmentOnly: boolean = false,\n  ): Promise<unknown[] | null> {\n    // Get detailed tool information including schemas\n    // Include development-only tools if in development mode\n    const params = { IncludeDevelopmentOnly: includeDevelopmentOnly };\n\n    // Requesting tool details from Unity with params\n    const toolDetailsResponse = await this.executeTool('get-tool-details', params);\n    // Received tool details response\n\n    // Handle new GetToolDetailsResponse structure\n    const toolDetails =\n      (toolDetailsResponse as { Tools?: unknown[] })?.Tools || toolDetailsResponse;\n    if (!Array.isArray(toolDetails)) {\n      // Invalid tool details response\n      return null;\n    }\n\n    // Successfully parsed tools from Unity\n    return toolDetails as unknown[];\n  }\n\n  /**\n   * Check if Unity is available on specific port\n   * Performs low-level TCP connection test with short timeout\n   */\n  static async isUnityAvailable(port: number): Promise<boolean> {\n    return new Promise((resolve) => {\n      const socket = new net.Socket();\n      const timeout = 500; // Shorter timeout for faster discovery\n\n      const timer = setTimeout(() => {\n        socket.destroy();\n        resolve(false);\n      }, timeout);\n\n      socket.connect(port, UNITY_CONNECTION.DEFAULT_HOST, () => {\n        clearTimeout(timer);\n        socket.destroy();\n        resolve(true);\n      });\n\n      socket.on('error', () => {\n        clearTimeout(timer);\n        resolve(false);\n      });\n    });\n  }\n}\n", "/**\n * Unity MCP Server common constants\n * Centralized management of constants used across all files\n *\n * Design document reference: Packages/src/TypeScriptServer~/ARCHITECTURE.md\n *\n * Related files:\n * - server.ts: Main server that uses these constants\n * - unity-connection-manager.ts: Uses connection and polling constants\n * - unity-tool-manager.ts: Uses timeout and configuration constants\n * - mcp-client-compatibility.ts: Uses client compatibility constants\n * - unity-event-handler.ts: Uses environment constants\n * - unity-client.ts: Unity TCP client that uses connection constants\n * - tools/*-tool.ts: Tool implementations that use timeout and configuration constants\n *\n * Key features:\n * - MCP protocol constants (version, capabilities)\n * - Server configuration (name, version)\n * - Unity connection settings (port, host)\n * - JSON-RPC protocol constants\n * - Tool-specific timeouts and configurations\n * - Error messages and logging configuration\n * - Client compatibility definitions\n */\n\n// MCP Protocol Constants\nexport const MCP_PROTOCOL_VERSION = '2024-11-05';\nexport const MCP_SERVER_NAME = 'uloopmcp-server';\n\n// MCP Capabilities\nexport const TOOLS_LIST_CHANGED_CAPABILITY = true;\n\n// MCP Notification methods\nexport const NOTIFICATION_METHODS = {\n  TOOLS_LIST_CHANGED: 'notifications/tools/list_changed',\n  SERVER_SHUTDOWN: 'notifications/server/shutdown',\n} as const;\n\n// Server shutdown reason (must match Unity side ServerShutdownReason enum)\nexport const ServerShutdownReason = {\n  DOMAIN_RELOAD: 'DomainReload',\n  EDITOR_QUIT: 'EditorQuit',\n} as const;\n\nexport type ServerShutdownReason = (typeof ServerShutdownReason)[keyof typeof ServerShutdownReason];\n\n// Unity connection configuration\nexport const UNITY_CONNECTION = {\n  DEFAULT_PORT: '8700',\n  DEFAULT_HOST: '127.0.0.1',\n  CONNECTION_TEST_MESSAGE: 'connection_test',\n} as const;\n\n// JSON-RPC configuration\nexport const JSONRPC = {\n  VERSION: '2.0',\n} as const;\n\n// Parameter schema constants (must match Unity side)\nexport const PARAMETER_SCHEMA = {\n  TYPE_PROPERTY: 'Type',\n  DESCRIPTION_PROPERTY: 'Description',\n  DEFAULT_VALUE_PROPERTY: 'DefaultValue',\n  ENUM_PROPERTY: 'Enum',\n  PROPERTIES_PROPERTY: 'Properties',\n  REQUIRED_PROPERTY: 'Required',\n} as const;\n\n// Timeout configuration (milliseconds)\nexport const TIMEOUTS = {\n  NETWORK: 120000, // 2\u5206 - \u30CD\u30C3\u30C8\u30EF\u30FC\u30AF\u30EC\u30D9\u30EB\u306E\u30BF\u30A4\u30E0\u30A2\u30A6\u30C8\uFF08Unity\u5074\u306E\u30BF\u30A4\u30E0\u30A2\u30A6\u30C8\u3088\u308A\u9577\u304F\u8A2D\u5B9A\uFF09\n} as const;\n\n// Log configuration\nexport const LOG_CONFIG = {\n  TYPES: ['Error', 'Warning', 'Log', 'All'] as const,\n  DEFAULT_TYPE: 'All',\n  DEFAULT_MAX_COUNT: 100,\n  DEFAULT_SEARCH_TEXT: '',\n  DEFAULT_INCLUDE_STACK_TRACE: true,\n} as const;\n\n// Test configuration\nexport const TEST_CONFIG = {\n  FILTER_TYPES: ['all', 'fullclassname', 'namespace', 'testname', 'assembly'] as const,\n  DEFAULT_FILTER_TYPE: 'all',\n  DEFAULT_FILTER_VALUE: '',\n  DEFAULT_SAVE_XML: false,\n} as const;\n\n// Compile configuration\nexport const COMPILE_CONFIG = {\n  DEFAULT_FORCE_RECOMPILE: false,\n} as const;\n\n// Default messages\nexport const DEFAULT_MESSAGES = {\n  PING: 'Hello Unity MCP!',\n  UNITY_PING: 'Hello from TypeScript MCP Server',\n} as const;\n\n// Client Name Constants\nexport const DEFAULT_CLIENT_NAME = ''; // Empty string to avoid showing default names\n\n// Environment configuration\nexport const ENVIRONMENT = {\n  NODE_ENV_DEVELOPMENT: 'development',\n  NODE_ENV_PRODUCTION: 'production',\n} as const;\n\n// Error messages\nexport const ERROR_MESSAGES = {\n  NOT_CONNECTED: 'Unity MCP Bridge is not connected',\n  CONNECTION_FAILED: 'Unity connection failed',\n  TIMEOUT: 'timeout',\n  INVALID_RESPONSE: 'Invalid response from Unity',\n} as const;\n\n// Polling configuration\nexport const POLLING = {\n  INTERVAL_MS: 1000, // Reduced from 3000ms to 1000ms for better responsiveness\n  BUFFER_SECONDS: 15, // Increased for safer Unity startup timing\n  // Adaptive polling configuration\n  INITIAL_ATTEMPTS: 1, // Number of initial attempts with fast polling\n  INITIAL_INTERVAL_MS: 1000, // Fast polling interval for initial attempts\n  EXTENDED_INTERVAL_MS: 10000, // Slower polling interval after initial attempts\n} as const;\n\n// Log messages\nexport const LOG_MESSAGES = {\n  SERVER_LOG_START_PREFIX: '=== Unity MCP Server Log Started at',\n  CONNECTION_RECOVERY_POLLING: 'Starting connection recovery polling',\n} as const;\n\n// List of clients that support list_changed notifications\nexport const LIST_CHANGED_SUPPORTED_CLIENTS = ['cursor', 'mcp-inspector'] as const;\n\n// File output directories\nexport const OUTPUT_DIRECTORIES = {\n  ROOT: 'uLoopMCPOutputs',\n  VIBE_LOGS: 'VibeLogs',\n} as const;\n\n// Connection lost debounce configuration\nexport const CONNECTION_LOST_DEBOUNCE_MS = 500;\n", "/**\n * Safe Timer Utility - Prevents orphaned processes by ensuring automatic cleanup\n *\n * Design document reference: Packages/src/TypeScriptServer~/ARCHITECTURE.md\n *\n * Related classes:\n * - UnityClient: Uses safeSetTimeout function from this utility\n * - UnityDiscovery: Could potentially use this for safer timer management\n * - UnityEventHandler: Handles cleanup scenarios this utility addresses\n *\n * This class provides a foolproof way to manage timers that automatically\n * clean themselves up when the object is destroyed or when the process exits.\n *\n * Usage:\n *   const timer = new SafeTimer(() => console.log('tick'), 1000);\n *   // Timer automatically cleans up when timer goes out of scope\n *   // or when process exits\n */\n\nexport class SafeTimer {\n  private static activeTimers = new Set<SafeTimer>();\n  private static cleanupHandlersInstalled = false;\n\n  private timerId: NodeJS.Timeout | null = null;\n  private isActive = false;\n  private callback: () => void;\n  private delay: number;\n  private isInterval: boolean;\n\n  constructor(callback: () => void, delay: number, isInterval = false) {\n    this.callback = callback;\n    this.delay = delay;\n    this.isInterval = isInterval;\n\n    // Install global cleanup handlers on first timer creation\n    SafeTimer.installCleanupHandlers();\n\n    this.start();\n  }\n\n  /**\n   * Start the timer\n   */\n  private start(): void {\n    if (this.isActive) {\n      return;\n    }\n\n    if (this.isInterval) {\n      this.timerId = setInterval(this.callback, this.delay);\n    } else {\n      this.timerId = setTimeout(this.callback, this.delay);\n    }\n\n    this.isActive = true;\n    SafeTimer.activeTimers.add(this);\n  }\n\n  /**\n   * Stop and clean up the timer\n   */\n  stop(): void {\n    if (!this.isActive || !this.timerId) {\n      return;\n    }\n\n    if (this.isInterval) {\n      clearInterval(this.timerId);\n    } else {\n      clearTimeout(this.timerId);\n    }\n\n    this.timerId = null;\n    this.isActive = false;\n    SafeTimer.activeTimers.delete(this);\n  }\n\n  /**\n   * Check if timer is currently active\n   */\n  get active(): boolean {\n    return this.isActive;\n  }\n\n  /**\n   * Install global cleanup handlers to ensure all timers are cleaned up\n   */\n  private static installCleanupHandlers(): void {\n    if (SafeTimer.cleanupHandlersInstalled) {\n      return;\n    }\n\n    // Clean up all active timers when process exits\n    const cleanup = (): void => {\n      // console.log(`[SafeTimer] Cleaning up ${SafeTimer.activeTimers.size} active timers`);\n      SafeTimer.cleanupAll();\n    };\n\n    process.on('exit', cleanup);\n    process.on('SIGINT', cleanup);\n    process.on('SIGTERM', cleanup);\n    process.on('SIGHUP', cleanup);\n    process.on('uncaughtException', cleanup);\n    process.on('unhandledRejection', cleanup);\n\n    SafeTimer.cleanupHandlersInstalled = true;\n  }\n\n  /**\n   * Clean up all active timers\n   */\n  private static cleanupAll(): void {\n    for (const timer of SafeTimer.activeTimers) {\n      timer.stop();\n    }\n    SafeTimer.activeTimers.clear();\n  }\n\n  /**\n   * Get count of active timers (for debugging)\n   */\n  static getActiveTimerCount(): number {\n    return SafeTimer.activeTimers.size;\n  }\n}\n\n/**\n * Convenience functions for common timer patterns\n */\n\n/**\n * Create a safe setTimeout that automatically cleans up\n */\nexport function safeSetTimeout(callback: () => void, delay: number): SafeTimer {\n  return new SafeTimer(callback, delay, false);\n}\n\n/**\n * Create a safe setInterval that automatically cleans up\n */\nexport function safeSetInterval(callback: () => void, delay: number): SafeTimer {\n  return new SafeTimer(callback, delay, true);\n}\n\n/**\n * Stop and clean up a SafeTimer instance safely\n */\nexport function stopSafeTimer(timer: SafeTimer | null | undefined): void {\n  if (!timer) {\n    return;\n  }\n\n  timer.stop();\n}\n\n/**\n * Promise-based delay with automatic cleanup\n */\nexport function safeDelay(ms: number): Promise<void> {\n  return new Promise((resolve) => {\n    new SafeTimer(resolve, ms, false);\n  });\n}\n", "import * as fs from 'fs';\nimport * as path from 'path';\nimport { fileURLToPath } from 'url';\nimport { v4 as uuidv4 } from 'uuid';\nimport { OUTPUT_DIRECTORIES } from '../constants.js';\n\n/**\n * AI-friendly structured logger for TypeScript MCP Server\n *\n * Design document reference: Packages/src/TypeScriptServer~/ARCHITECTURE.md\n *\n * Related classes:\n * - log-to-file.ts: Traditional file logger that this class replaces\n * - UnityDiscovery: Uses this logger for connection discovery tracking\n * - UnityClient: Uses this logger for connection event tracking\n *\n * Key features:\n * - Structured JSON logging with operation, context, correlation_id\n * - AI-friendly format for Claude Code analysis\n * - Automatic file rotation and memory management\n * - Correlation ID tracking for related operations\n */\n\nexport interface VibeLogEntry {\n  timestamp: string;\n  level: string;\n  operation: string;\n  message: string;\n  context?: unknown;\n  correlation_id: string;\n  source: string;\n  human_note?: string;\n  ai_todo?: string;\n  environment: EnvironmentInfo;\n}\n\nexport interface EnvironmentInfo {\n  node_version: string;\n  platform: string;\n  process_id: number;\n  memory_usage: {\n    rss: number;\n    heapTotal: number;\n    heapUsed: number;\n  };\n}\n\nexport class VibeLogger {\n  // Navigate from TypeScriptServer~ to project root: ../../../\n  private static readonly PROJECT_ROOT = path.resolve(\n    path.dirname(fileURLToPath(import.meta.url)),\n    '../../../..',\n  );\n  private static readonly LOG_DIRECTORY = path.join(\n    VibeLogger.PROJECT_ROOT,\n    OUTPUT_DIRECTORIES.ROOT,\n    OUTPUT_DIRECTORIES.VIBE_LOGS,\n  );\n  private static readonly LOG_FILE_PREFIX = 'ts_vibe';\n  private static readonly MAX_FILE_SIZE_MB = 10;\n  private static readonly MAX_MEMORY_LOGS = 1000;\n\n  private static memoryLogs: VibeLogEntry[] = [];\n  private static isDebugEnabled = process.env.MCP_DEBUG === 'true';\n\n  /**\n   * Log an info level message with structured context\n   */\n  static logInfo(\n    operation: string,\n    message: string,\n    context?: unknown,\n    correlationId?: string,\n    humanNote?: string,\n    aiTodo?: string,\n    includeStackTrace?: boolean,\n  ): void {\n    VibeLogger.log(\n      'INFO',\n      operation,\n      message,\n      context,\n      correlationId,\n      humanNote,\n      aiTodo,\n      includeStackTrace,\n    );\n  }\n\n  /**\n   * Log a warning level message with structured context and optional stack trace\n   */\n  static logWarning(\n    operation: string,\n    message: string,\n    context?: unknown,\n    correlationId?: string,\n    humanNote?: string,\n    aiTodo?: string,\n    includeStackTrace: boolean = true,\n  ): void {\n    VibeLogger.log(\n      'WARNING',\n      operation,\n      message,\n      context,\n      correlationId,\n      humanNote,\n      aiTodo,\n      includeStackTrace,\n    );\n  }\n\n  /**\n   * Log an error level message with structured context and optional stack trace\n   */\n  static logError(\n    operation: string,\n    message: string,\n    context?: unknown,\n    correlationId?: string,\n    humanNote?: string,\n    aiTodo?: string,\n    includeStackTrace: boolean = true,\n  ): void {\n    VibeLogger.log(\n      'ERROR',\n      operation,\n      message,\n      context,\n      correlationId,\n      humanNote,\n      aiTodo,\n      includeStackTrace,\n    );\n  }\n\n  /**\n   * Log a debug level message with structured context and optional stack trace\n   */\n  static logDebug(\n    operation: string,\n    message: string,\n    context?: unknown,\n    correlationId?: string,\n    humanNote?: string,\n    aiTodo?: string,\n    includeStackTrace?: boolean,\n  ): void {\n    VibeLogger.log(\n      'DEBUG',\n      operation,\n      message,\n      context,\n      correlationId,\n      humanNote,\n      aiTodo,\n      includeStackTrace,\n    );\n  }\n\n  /**\n   * Log an exception with structured context and optional additional stack trace\n   */\n  static logException(\n    operation: string,\n    error: Error,\n    context?: unknown,\n    correlationId?: string,\n    humanNote?: string,\n    aiTodo?: string,\n    includeStackTrace?: boolean,\n  ): void {\n    const exceptionContext = {\n      original_context: context,\n      exception: {\n        name: error.name,\n        message: error.message,\n        stack: error.stack,\n        cause: error.cause,\n      },\n    } as const;\n\n    VibeLogger.log(\n      'ERROR',\n      operation,\n      `Exception occurred: ${error.message}`,\n      exceptionContext,\n      correlationId,\n      humanNote,\n      aiTodo,\n      includeStackTrace,\n    );\n  }\n\n  /**\n   * Generate a new correlation ID for tracking related operations\n   */\n  static generateCorrelationId(): string {\n    const timestamp = new Date().toISOString().slice(11, 19).replace(/:/g, '');\n    return `ts_${uuidv4().slice(0, 8)}_${timestamp}`;\n  }\n\n  /**\n   * Get logs for AI analysis (formatted for Claude Code)\n   * Output directory: {project_root}/uLoopMCPOutputs/VibeLogs/\n   */\n  static getLogsForAi(operation?: string, correlationId?: string, maxCount: number = 100): string {\n    let filteredLogs = [...VibeLogger.memoryLogs];\n\n    if (operation) {\n      filteredLogs = filteredLogs.filter((log) => log.operation.includes(operation));\n    }\n\n    if (correlationId) {\n      filteredLogs = filteredLogs.filter((log) => log.correlation_id === correlationId);\n    }\n\n    if (filteredLogs.length > maxCount) {\n      filteredLogs = filteredLogs.slice(-maxCount);\n    }\n\n    return JSON.stringify(filteredLogs, null, 2);\n  }\n\n  /**\n   * Clear all memory logs\n   */\n  static clearMemoryLogs(): void {\n    VibeLogger.memoryLogs = [];\n  }\n\n  /**\n   * Write emergency log entry (for when main logging fails)\n   * Static method to avoid circular dependency\n   */\n  private static writeEmergencyLog(emergencyEntry: Record<string, unknown>): void {\n    try {\n      // Security: Use safe path construction consistent with other logging\n      const basePath = process.cwd();\n      const sanitizedRoot = path.resolve(basePath, OUTPUT_DIRECTORIES.ROOT);\n      if (!VibeLogger.validateWithin(basePath, sanitizedRoot)) {\n        return; // Silent failure to prevent protocol interference\n      }\n\n      const emergencyLogDir = path.resolve(sanitizedRoot, 'EmergencyLogs');\n      if (!VibeLogger.validateWithin(sanitizedRoot, emergencyLogDir)) {\n        return; // Path traversal guard\n      }\n\n      // SECURITY: Path validated with validateWithin() above - safe from path traversal\n      // eslint-disable-next-line security/detect-non-literal-fs-filename -- Path sanitized by validateWithin()\n      fs.mkdirSync(emergencyLogDir, { recursive: true });\n\n      const emergencyLogPath = path.resolve(emergencyLogDir, 'vibe-logger-emergency.log');\n      if (!VibeLogger.validateWithin(emergencyLogDir, emergencyLogPath)) {\n        return; // Path traversal guard\n      }\n\n      const emergencyLog = JSON.stringify(emergencyEntry) + '\\n';\n      // SECURITY: Path validated with validateWithin() above - safe from path traversal\n      // eslint-disable-next-line security/detect-non-literal-fs-filename -- Path sanitized by validateWithin()\n      fs.appendFileSync(emergencyLogPath, emergencyLog);\n    } catch {\n      // Silent failure to prevent MCP protocol interference\n      // If even emergency logging fails, we cannot do anything more\n    }\n  }\n\n  /**\n   * Core logging method\n   * Only logs when MCP_DEBUG environment variable is set to 'true'\n   */\n  private static log(\n    level: string,\n    operation: string,\n    message: string,\n    context?: unknown,\n    correlationId?: string,\n    humanNote?: string,\n    aiTodo?: string,\n    includeStackTrace?: boolean,\n  ): void {\n    // Only log when MCP_DEBUG is enabled\n    if (!VibeLogger.isDebugEnabled) {\n      return;\n    }\n\n    // Handle stack trace option\n    let finalContext = context;\n    if (includeStackTrace) {\n      finalContext = {\n        original_context: context,\n        stack: VibeLogger.cleanStackTrace(new Error().stack),\n      } as const;\n    }\n\n    const logEntry: VibeLogEntry = {\n      timestamp: VibeLogger.formatTimestamp(),\n      level,\n      operation,\n      message,\n      context: VibeLogger.sanitizeContext(finalContext),\n      correlation_id: correlationId || VibeLogger.generateCorrelationId(),\n      source: 'TypeScript',\n      human_note: humanNote,\n      ai_todo: aiTodo,\n      environment: VibeLogger.getEnvironmentInfo(),\n    };\n\n    // Add to memory logs\n    VibeLogger.memoryLogs.push(logEntry);\n\n    // Rotate memory logs if too many\n    if (VibeLogger.memoryLogs.length > VibeLogger.MAX_MEMORY_LOGS) {\n      VibeLogger.memoryLogs.shift();\n    }\n\n    // Save to file (fire and forget to avoid blocking)\n    VibeLogger.saveLogToFile(logEntry).catch((error) => {\n      // File logging failed - write to emergency log instead of console\n      // Critical: No console output to avoid MCP protocol interference\n      VibeLogger.writeEmergencyLog({\n        timestamp: VibeLogger.formatTimestamp(),\n        level: 'EMERGENCY',\n        message: 'VibeLogger saveLogToFile failed',\n        original_error: error instanceof Error ? error.message : String(error),\n        original_log_entry: logEntry,\n      });\n    });\n\n    // VibeLogger is designed for file output only - console output removed to prevent MCP protocol interference\n  }\n\n  /**\n   * Validate file name to prevent dangerous characters\n   */\n  private static validateFileName(fileName: string): boolean {\n    // Allow only alphanumeric characters, hyphens, underscores, and dots\n    const safeFileNameRegex = /^[a-zA-Z0-9._-]+$/;\n    return safeFileNameRegex.test(fileName) && !fileName.includes('..');\n  }\n\n  /**\n   * Validate file path to prevent directory traversal attacks\n   */\n  private static validateFilePath(filePath: string): boolean {\n    const normalizedPath = path.normalize(filePath);\n    const logDirectory = path.normalize(VibeLogger.LOG_DIRECTORY);\n\n    // Ensure the file path is within the log directory\n    return normalizedPath.startsWith(logDirectory + path.sep) || normalizedPath === logDirectory;\n  }\n\n  /**\n   * Validate that target path is within base directory\n   */\n  private static validateWithin(base: string, target: string): boolean {\n    const resolvedBase = path.resolve(base);\n    const resolvedTarget = path.resolve(target);\n    return resolvedTarget.startsWith(resolvedBase);\n  }\n\n  /**\n   * Safe wrapper for fs.existsSync with path validation\n   */\n  private static safeExistsSync(filePath: string): boolean {\n    try {\n      const absolutePath = path.resolve(filePath);\n      const expectedDir = path.resolve(VibeLogger.LOG_DIRECTORY);\n\n      // Validate path is within expected directory\n      if (!VibeLogger.validateWithin(expectedDir, absolutePath)) {\n        return false;\n      }\n\n      // eslint-disable-next-line security/detect-non-literal-fs-filename -- Path sanitized by validateWithin()\n      return fs.existsSync(absolutePath);\n    } catch {\n      return false;\n    }\n  }\n\n  /**\n   * Prepare and validate log directory and file path\n   */\n  private static prepareLogFilePath(): string {\n    // Validate log directory path for security\n    const logDirectory = path.normalize(VibeLogger.LOG_DIRECTORY);\n    if (!VibeLogger.validateFilePath(logDirectory)) {\n      throw new Error('Invalid log directory path');\n    }\n\n    if (!VibeLogger.safeExistsSync(logDirectory)) {\n      // Security: Ensure directory path is absolute and within expected bounds\n      const absoluteLogDir = path.resolve(logDirectory);\n      const expectedBaseDir = path.resolve(VibeLogger.PROJECT_ROOT);\n\n      if (!VibeLogger.validateWithin(expectedBaseDir, absoluteLogDir)) {\n        throw new Error('Log directory path escapes project root');\n      }\n\n      // eslint-disable-next-line security/detect-non-literal-fs-filename -- Path sanitized by validateWithin()\n      fs.mkdirSync(absoluteLogDir, { recursive: true });\n    }\n\n    const fileName = `${VibeLogger.LOG_FILE_PREFIX}_${VibeLogger.formatDate()}.json`;\n\n    // Validate file name for security\n    if (!VibeLogger.validateFileName(fileName)) {\n      throw new Error('Invalid file name detected');\n    }\n\n    const filePath = path.resolve(logDirectory, fileName);\n    if (!VibeLogger.validateWithin(logDirectory, filePath)) {\n      throw new Error('Resolved file path escapes the log directory');\n    }\n\n    // Validate the final file path for security\n    if (!VibeLogger.validateFilePath(filePath)) {\n      throw new Error('Invalid file path detected');\n    }\n\n    return filePath;\n  }\n\n  /**\n   * Rotate log file if it exceeds maximum size\n   */\n  private static rotateLogFileIfNeeded(filePath: string): void {\n    if (!VibeLogger.safeExistsSync(filePath)) {\n      return;\n    }\n\n    // Security: Use absolute path for file operations\n    const absoluteFilePath = path.resolve(filePath);\n    // SECURITY: Using absolute path with security validation - safe from path traversal\n    // eslint-disable-next-line security/detect-non-literal-fs-filename -- Path sanitized by validateWithin()\n    const stats = fs.statSync(absoluteFilePath);\n    if (stats.size <= VibeLogger.MAX_FILE_SIZE_MB * 1024 * 1024) {\n      return;\n    }\n\n    const logDirectory = path.dirname(filePath);\n    const rotatedFileName = `${VibeLogger.LOG_FILE_PREFIX}_${VibeLogger.formatDateTime()}.json`;\n\n    // Validate rotated file name for security\n    if (!VibeLogger.validateFileName(rotatedFileName)) {\n      throw new Error('Invalid rotated file name detected');\n    }\n\n    const rotatedFilePath = path.resolve(logDirectory, rotatedFileName);\n\n    // Ensure rotated file path is within the allowed directory\n    if (!VibeLogger.validateWithin(logDirectory, rotatedFilePath)) {\n      throw new Error('Rotated file path escapes the allowed directory');\n    }\n\n    const sanitizedFilePath = path.resolve(logDirectory, path.basename(filePath));\n    if (!VibeLogger.validateWithin(logDirectory, sanitizedFilePath)) {\n      throw new Error('Original file path escapes the allowed directory');\n    }\n\n    // SECURITY: Both paths validated with validateWithin() above - safe from path traversal\n    // eslint-disable-next-line security/detect-non-literal-fs-filename -- Both paths sanitized by validateWithin()\n    fs.renameSync(sanitizedFilePath, rotatedFilePath);\n  }\n\n  /**\n   * Write log to file with retry mechanism for concurrent access\n   */\n  private static async writeLogWithRetry(filePath: string, jsonLog: string): Promise<void> {\n    const maxRetries = 3;\n    const baseDelayMs = 50;\n\n    // Security: Use absolute path and validate before writing\n    const absoluteFilePath = path.resolve(filePath);\n    const expectedLogDir = path.resolve(VibeLogger.LOG_DIRECTORY);\n\n    if (!VibeLogger.validateWithin(expectedLogDir, absoluteFilePath)) {\n      throw new Error('File path escapes log directory');\n    }\n\n    for (let retry = 0; retry < maxRetries; retry++) {\n      try {\n        // Use fs.promises.open for safer file handling\n\n        // eslint-disable-next-line security/detect-non-literal-fs-filename\n        const fileHandle = await fs.promises.open(absoluteFilePath, 'a');\n        try {\n          await fileHandle.writeFile(jsonLog, { encoding: 'utf8' });\n        } finally {\n          await fileHandle.close();\n        }\n        return; // Success - exit retry loop\n      } catch (error: unknown) {\n        if (VibeLogger.isFileSharingViolation(error) && retry < maxRetries - 1) {\n          // Wait with exponential backoff for sharing violations\n          const delayMs = baseDelayMs * Math.pow(2, retry);\n          await VibeLogger.sleep(delayMs);\n        } else {\n          // For other errors or final retry, throw\n          throw error;\n        }\n      }\n    }\n  }\n\n  /**\n   * Save log entry to file with retry mechanism for concurrent access\n   */\n  private static async saveLogToFile(logEntry: VibeLogEntry): Promise<void> {\n    try {\n      const filePath = VibeLogger.prepareLogFilePath();\n\n      // Check file size and rotate if necessary\n      VibeLogger.rotateLogFileIfNeeded(filePath);\n\n      const jsonLog = JSON.stringify(logEntry) + '\\n';\n      await VibeLogger.writeLogWithRetry(filePath, jsonLog);\n    } catch (error) {\n      // File logging failed - try fallback logging\n      await VibeLogger.tryFallbackLogging(logEntry, error);\n    }\n  }\n\n  /**\n   * Try fallback logging when main logging fails\n   */\n  private static async tryFallbackLogging(logEntry: VibeLogEntry, error: unknown): Promise<void> {\n    try {\n      // Security: Use safe path construction to prevent path traversal\n      const basePath = process.cwd();\n      const sanitizedRoot = path.resolve(basePath, OUTPUT_DIRECTORIES.ROOT);\n      if (!VibeLogger.validateWithin(basePath, sanitizedRoot)) {\n        throw new Error('Invalid OUTPUT_DIRECTORIES.ROOT path');\n      }\n\n      const safeLogDir = path.resolve(sanitizedRoot, 'FallbackLogs');\n      if (!VibeLogger.validateWithin(sanitizedRoot, safeLogDir)) {\n        throw new Error('Fallback log directory path traversal detected');\n      }\n\n      // SECURITY: Path validated with validateWithin() above - safe from path traversal\n      // eslint-disable-next-line security/detect-non-literal-fs-filename -- Path sanitized by validateWithin()\n      fs.mkdirSync(safeLogDir, { recursive: true });\n\n      // Security: Sanitize filename components to prevent path traversal\n      const safeDate = VibeLogger.formatDateTime()\n        .split(' ')[0]\n        .replace(/[^0-9-]/g, '');\n      const safeFilename = `${VibeLogger.LOG_FILE_PREFIX}_fallback_${safeDate}.json`;\n      const safeFallbackPath = path.resolve(safeLogDir, safeFilename);\n\n      // Security: Validate that the resolved file path is within our expected directory\n      if (!VibeLogger.validateWithin(safeLogDir, safeFallbackPath)) {\n        throw new Error('Invalid fallback log file path');\n      }\n\n      const fallbackEntry = {\n        ...logEntry,\n        fallback_reason: error instanceof Error ? error.message : String(error),\n        original_timestamp: logEntry.timestamp,\n      };\n\n      const jsonLog = JSON.stringify(fallbackEntry) + '\\n';\n\n      // Use fs.promises.open for safer file writing\n\n      // eslint-disable-next-line security/detect-non-literal-fs-filename\n      const fileHandle = await fs.promises.open(safeFallbackPath, 'a');\n      try {\n        await fileHandle.writeFile(jsonLog, { encoding: 'utf8' });\n      } finally {\n        await fileHandle.close();\n      }\n    } catch (fallbackError) {\n      // If even fallback fails, try to write to a last-resort emergency log file\n      VibeLogger.writeEmergencyLog({\n        timestamp: VibeLogger.formatTimestamp(),\n        level: 'EMERGENCY',\n        message: 'VibeLogger fallback failed',\n        original_error: error instanceof Error ? error.message : String(error),\n        fallback_error:\n          fallbackError instanceof Error ? fallbackError.message : String(fallbackError),\n        original_log_entry: logEntry,\n      });\n    }\n  }\n\n  /**\n   * Check if error is a file sharing violation\n   */\n  private static isFileSharingViolation(error: unknown): boolean {\n    if (!error) {\n      return false;\n    }\n\n    // Check for common file sharing violation error codes\n    const sharingViolationCodes = [\n      'EBUSY', // Resource busy or locked\n      'EACCES', // Permission denied (can indicate file in use)\n      'EPERM', // Operation not permitted\n      'EMFILE', // Too many open files\n      'ENFILE', // File table overflow\n    ];\n\n    return (\n      error &&\n      typeof error === 'object' &&\n      'code' in error &&\n      typeof error.code === 'string' &&\n      sharingViolationCodes.includes(error.code)\n    );\n  }\n\n  /**\n   * Asynchronous sleep function for retry delays\n   */\n  private static async sleep(ms: number): Promise<void> {\n    return new Promise((resolve) => setTimeout(resolve, ms));\n  }\n\n  /**\n   * Get current environment information\n   */\n  private static getEnvironmentInfo(): EnvironmentInfo {\n    const memUsage = process.memoryUsage();\n    return {\n      node_version: process.version,\n      platform: process.platform,\n      process_id: process.pid,\n      memory_usage: {\n        rss: memUsage.rss,\n        heapTotal: memUsage.heapTotal,\n        heapUsed: memUsage.heapUsed,\n      },\n    };\n  }\n\n  /**\n   * Sanitize context to prevent circular references\n   */\n  private static sanitizeContext(context: unknown): unknown {\n    if (!context) {\n      return undefined;\n    }\n\n    try {\n      return JSON.parse(JSON.stringify(context));\n    } catch {\n      return {\n        error: 'Failed to serialize context',\n        original_type: typeof context,\n        circular_reference: true,\n      };\n    }\n  }\n\n  /**\n   * Format timestamp for log entries (local timezone)\n   */\n  private static formatTimestamp(): string {\n    const now = new Date();\n    const offset = now.getTimezoneOffset();\n    const offsetHours = String(Math.floor(Math.abs(offset) / 60)).padStart(2, '0');\n    const offsetMinutes = String(Math.abs(offset) % 60).padStart(2, '0');\n    const offsetSign = offset <= 0 ? '+' : '-';\n\n    return now.toISOString().replace('Z', `${offsetSign}${offsetHours}:${offsetMinutes}`);\n  }\n\n  /**\n   * Format date for file naming (local timezone)\n   */\n  private static formatDate(): string {\n    const now = new Date();\n    const year = now.getFullYear();\n    const month = String(now.getMonth() + 1).padStart(2, '0');\n    const day = String(now.getDate()).padStart(2, '0');\n    return `${year}${month}${day}`;\n  }\n\n  /**\n   * Format datetime for file rotation\n   */\n  private static formatDateTime(): string {\n    const now = new Date();\n    const year = now.getFullYear();\n    const month = String(now.getMonth() + 1).padStart(2, '0');\n    const day = String(now.getDate()).padStart(2, '0');\n    const hours = String(now.getHours()).padStart(2, '0');\n    const minutes = String(now.getMinutes()).padStart(2, '0');\n    const seconds = String(now.getSeconds()).padStart(2, '0');\n    return `${year}${month}${day}_${hours}${minutes}${seconds}`;\n  }\n\n  /**\n   * Clean stack trace by removing VibeLogger internal calls and Error prefix\n   */\n  private static cleanStackTrace(stack: string | undefined): string {\n    if (!stack) {\n      return '';\n    }\n\n    const lines = stack.split('\\n');\n    const cleanedLines: string[] = [];\n\n    for (const line of lines) {\n      // Skip the \"Error\" line at the beginning\n      if (line.trim() === 'Error') {\n        continue;\n      }\n\n      // Skip VibeLogger internal calls\n      if (line.includes('vibe-logger.ts') || line.includes('VibeLogger')) {\n        continue;\n      }\n\n      cleanedLines.push(line);\n    }\n\n    return cleanedLines.join('\\n').trim();\n  }\n}\n\n// Export singleton instance for convenience\nexport const vibeLogger = VibeLogger;\n", "import validate from './validate.js';\nconst byteToHex = [];\nfor (let i = 0; i < 256; ++i) {\n    byteToHex.push((i + 0x100).toString(16).slice(1));\n}\nexport function unsafeStringify(arr, offset = 0) {\n    return (byteToHex[arr[offset + 0]] +\n        byteToHex[arr[offset + 1]] +\n        byteToHex[arr[offset + 2]] +\n        byteToHex[arr[offset + 3]] +\n        '-' +\n        byteToHex[arr[offset + 4]] +\n        byteToHex[arr[offset + 5]] +\n        '-' +\n        byteToHex[arr[offset + 6]] +\n        byteToHex[arr[offset + 7]] +\n        '-' +\n        byteToHex[arr[offset + 8]] +\n        byteToHex[arr[offset + 9]] +\n        '-' +\n        byteToHex[arr[offset + 10]] +\n        byteToHex[arr[offset + 11]] +\n        byteToHex[arr[offset + 12]] +\n        byteToHex[arr[offset + 13]] +\n        byteToHex[arr[offset + 14]] +\n        byteToHex[arr[offset + 15]]).toLowerCase();\n}\nfunction stringify(arr, offset = 0) {\n    const uuid = unsafeStringify(arr, offset);\n    if (!validate(uuid)) {\n        throw TypeError('Stringified UUID is invalid');\n    }\n    return uuid;\n}\nexport default stringify;\n", "import { randomFillSync } from 'crypto';\nconst rnds8Pool = new Uint8Array(256);\nlet poolPtr = rnds8Pool.length;\nexport default function rng() {\n    if (poolPtr > rnds8Pool.length - 16) {\n        randomFillSync(rnds8Pool);\n        poolPtr = 0;\n    }\n    return rnds8Pool.slice(poolPtr, (poolPtr += 16));\n}\n", "import { randomUUID } from 'crypto';\nexport default { randomUUID };\n", "import native from './native.js';\nimport rng from './rng.js';\nimport { unsafeStringify } from './stringify.js';\nfunction v4(options, buf, offset) {\n    if (native.randomUUID && !buf && !options) {\n        return native.randomUUID();\n    }\n    options = options || {};\n    const rnds = options.random ?? options.rng?.() ?? rng();\n    if (rnds.length < 16) {\n        throw new Error('Random bytes length must be >= 16');\n    }\n    rnds[6] = (rnds[6] & 0x0f) | 0x40;\n    rnds[8] = (rnds[8] & 0x3f) | 0x80;\n    if (buf) {\n        offset = offset || 0;\n        if (offset < 0 || offset + 16 > buf.length) {\n            throw new RangeError(`UUID byte range ${offset}:${offset + 15} is out of buffer bounds`);\n        }\n        for (let i = 0; i < 16; ++i) {\n            buf[offset + i] = rnds[i];\n        }\n        return buf;\n    }\n    return unsafeStringify(rnds);\n}\nexport default v4;\n", "import { VibeLogger } from './utils/vibe-logger.js';\n\n/**\n * Manages TCP connection state without polling\n * Follows Single Responsibility Principle - only handles connection state monitoring\n *\n * NOTE: Polling functionality has been moved to UnityDiscovery to prevent multiple\n * concurrent timers and improve connection stability.\n *\n * Design document reference: Packages/src/TypeScriptServer~/ARCHITECTURE.md\n *\n * Related classes:\n * - UnityClient: Uses this class for connection state management\n * - UnityDiscovery: Handles connection polling (moved from this class)\n */\nexport class ConnectionManager {\n  private onReconnectedCallback: (() => void) | null = null;\n  private onConnectionLostCallback: (() => void) | null = null;\n\n  /**\n   * Set callback for when connection is restored\n   */\n  setReconnectedCallback(callback: () => void): void {\n    this.onReconnectedCallback = callback;\n  }\n\n  /**\n   * Set callback for when connection is lost\n   */\n  setConnectionLostCallback(callback: () => void): void {\n    this.onConnectionLostCallback = callback;\n  }\n\n  /**\n   * Trigger reconnection callback\n   */\n  triggerReconnected(): void {\n    if (this.onReconnectedCallback) {\n      try {\n        this.onReconnectedCallback();\n      } catch (error) {\n        VibeLogger.logError(\n          'connection_manager_reconnect_error',\n          'Error in reconnection callback',\n          { error },\n        );\n      }\n    }\n  }\n\n  /**\n   * Trigger connection lost callback\n   */\n  triggerConnectionLost(): void {\n    if (this.onConnectionLostCallback) {\n      try {\n        this.onConnectionLostCallback();\n      } catch (error) {\n        VibeLogger.logError(\n          'connection_manager_connection_lost_error',\n          'Error in connection lost callback',\n          { error },\n        );\n      }\n    }\n  }\n\n  /**\n   * Legacy method for backward compatibility - now does nothing\n   * @deprecated Use UnityDiscovery for connection polling instead\n   */\n  startPolling(_connectFn?: () => Promise<void>): void {\n    // No-op: polling is now handled by UnityDiscovery\n    // This method is kept for backward compatibility\n    // The _connectFn parameter is intentionally unused and kept for backward compatibility\n  }\n\n  /**\n   * Legacy method for backward compatibility - now does nothing\n   * @deprecated Polling is now handled by UnityDiscovery\n   */\n  stopPolling(): void {\n    // No-op: polling is now handled by UnityDiscovery\n    // This method is kept for backward compatibility\n  }\n}\n", "/**\n * Content-Length framing utility for JSON-RPC 2.0 communication.\n * Handles HTTP-style headers with format: \"Content-Length: <n>\\r\\n\\r\\n<json_content>\"\n */\n\nimport { VibeLogger } from './vibe-logger.js';\n\nexport interface FrameParseResult {\n  contentLength: number;\n  headerLength: number;\n  isComplete: boolean;\n}\n\nexport interface FrameExtractionResult {\n  jsonContent: string | null;\n  remainingData: string | Buffer;\n}\n\n/**\n * Utility class for creating and parsing Content-Length framed messages.\n */\nexport class ContentLengthFramer {\n  private static readonly CONTENT_LENGTH_HEADER = 'Content-Length:';\n  private static readonly HEADER_SEPARATOR = '\\r\\n\\r\\n';\n  private static readonly LINE_SEPARATOR = '\\r\\n';\n  private static readonly MAX_MESSAGE_SIZE = 1024 * 1024; // 1MB\n  private static readonly ENCODING_UTF8 = 'utf8';\n  private static readonly LOG_PREFIX = '[ContentLengthFramer]';\n  private static readonly ERROR_MESSAGE_JSON_EMPTY = 'JSON content cannot be empty';\n  private static readonly DEBUG_PREVIEW_LENGTH = 50;\n  private static readonly PREVIEW_SUFFIX = '...';\n\n  /**\n   * Creates a Content-Length framed message from JSON content.\n   * @param jsonContent The JSON content to frame\n   * @returns The framed message with Content-Length header\n   */\n  static createFrame(jsonContent: string): string {\n    if (!jsonContent) {\n      throw new Error(ContentLengthFramer.ERROR_MESSAGE_JSON_EMPTY);\n    }\n\n    const contentLength = Buffer.byteLength(jsonContent, ContentLengthFramer.ENCODING_UTF8);\n\n    if (contentLength > ContentLengthFramer.MAX_MESSAGE_SIZE) {\n      throw new Error(\n        `Message size ${contentLength} exceeds maximum allowed size ${ContentLengthFramer.MAX_MESSAGE_SIZE}`,\n      );\n    }\n\n    return `${ContentLengthFramer.CONTENT_LENGTH_HEADER} ${contentLength}${ContentLengthFramer.HEADER_SEPARATOR}${jsonContent}`;\n  }\n\n  /**\n   * Parses a Content-Length header from incoming data.\n   * @param data The incoming data string\n   * @returns Parse result with content length, header length, and completion status\n   */\n  static parseFrame(data: string): FrameParseResult {\n    if (!data) {\n      return {\n        contentLength: -1,\n        headerLength: -1,\n        isComplete: false,\n      };\n    }\n\n    try {\n      // Find the header separator\n      const separatorIndex = data.indexOf(ContentLengthFramer.HEADER_SEPARATOR);\n      if (separatorIndex === -1) {\n        // Header not complete yet\n        return {\n          contentLength: -1,\n          headerLength: -1,\n          isComplete: false,\n        };\n      }\n\n      // Extract header section\n      const headerSection = data.substring(0, separatorIndex);\n      const headerLength = separatorIndex + ContentLengthFramer.HEADER_SEPARATOR.length;\n\n      // Parse Content-Length from header\n      const contentLength = ContentLengthFramer.parseContentLength(headerSection);\n      if (contentLength === -1) {\n        return {\n          contentLength: -1,\n          headerLength: -1,\n          isComplete: false,\n        };\n      }\n\n      // Check if the complete frame is available using byte length\n      const expectedTotalLength = headerLength + contentLength;\n      const actualByteLength = Buffer.byteLength(data, ContentLengthFramer.ENCODING_UTF8);\n      const isComplete = actualByteLength >= expectedTotalLength;\n\n      VibeLogger.logDebug(\n        'frame_analysis',\n        `Frame analysis: dataLength=${data.length}, actualByteLength=${actualByteLength}, contentLength=${contentLength}, headerLength=${headerLength}, expectedTotal=${expectedTotalLength}, isComplete=${isComplete}`,\n        {\n          dataLength: data.length,\n          actualByteLength,\n          contentLength,\n          headerLength,\n          expectedTotalLength,\n          isComplete,\n        },\n      );\n\n      return {\n        contentLength,\n        headerLength,\n        isComplete,\n      };\n    } catch (error) {\n      VibeLogger.logError(\n        'parse_frame_error',\n        `Error parsing frame: ${error instanceof Error ? error.message : String(error)}`,\n        {\n          error:\n            error instanceof Error\n              ? {\n                  name: error.name,\n                  message: error.message,\n                  stack: error.stack,\n                }\n              : { raw: String(error) },\n        },\n      );\n      return {\n        contentLength: -1,\n        headerLength: -1,\n        isComplete: false,\n      };\n    }\n  }\n\n  /**\n   * Parses a Content-Length header from incoming Buffer data.\n   * @param data The incoming data Buffer\n   * @returns Parse result with content length, header length, and completion status\n   */\n  static parseFrameFromBuffer(data: Buffer): FrameParseResult {\n    if (!data || data.length === 0) {\n      return {\n        contentLength: -1,\n        headerLength: -1,\n        isComplete: false,\n      };\n    }\n\n    try {\n      // Find the header separator in Buffer\n      const separatorBuffer = Buffer.from(\n        ContentLengthFramer.HEADER_SEPARATOR,\n        ContentLengthFramer.ENCODING_UTF8,\n      );\n      const separatorIndex = data.indexOf(separatorBuffer);\n      if (separatorIndex === -1) {\n        // Header not complete yet\n        return {\n          contentLength: -1,\n          headerLength: -1,\n          isComplete: false,\n        };\n      }\n\n      // Extract header section\n      const headerSection = data\n        .subarray(0, separatorIndex)\n        .toString(ContentLengthFramer.ENCODING_UTF8);\n      const headerLength = separatorIndex + separatorBuffer.length;\n\n      // Parse Content-Length from header\n      const contentLength = ContentLengthFramer.parseContentLength(headerSection);\n      if (contentLength === -1) {\n        return {\n          contentLength: -1,\n          headerLength: -1,\n          isComplete: false,\n        };\n      }\n\n      // Check if the complete frame is available using byte length\n      const expectedTotalLength = headerLength + contentLength;\n      const actualByteLength = data.length;\n      const isComplete = actualByteLength >= expectedTotalLength;\n\n      VibeLogger.logDebug(\n        'frame_analysis_buffer',\n        `Frame analysis: dataLength=${data.length}, actualByteLength=${actualByteLength}, contentLength=${contentLength}, headerLength=${headerLength}, expectedTotal=${expectedTotalLength}, isComplete=${isComplete}`,\n        {\n          dataLength: data.length,\n          actualByteLength,\n          contentLength,\n          headerLength,\n          expectedTotalLength,\n          isComplete,\n        },\n      );\n\n      return {\n        contentLength,\n        headerLength,\n        isComplete,\n      };\n    } catch (error) {\n      VibeLogger.logError(\n        'parse_frame_buffer_error',\n        `Error parsing frame: ${error instanceof Error ? error.message : String(error)}`,\n        {\n          error:\n            error instanceof Error\n              ? {\n                  name: error.name,\n                  message: error.message,\n                  stack: error.stack,\n                }\n              : { raw: String(error) },\n        },\n      );\n      return {\n        contentLength: -1,\n        headerLength: -1,\n        isComplete: false,\n      };\n    }\n  }\n\n  /**\n   * Extracts a complete frame from the data buffer.\n   * @param data The data buffer containing the frame\n   * @param contentLength The expected content length\n   * @param headerLength The header length including separators\n   * @returns The extracted JSON content and remaining data\n   */\n  static extractFrame(\n    data: string,\n    contentLength: number,\n    headerLength: number,\n  ): FrameExtractionResult {\n    if (!data || contentLength < 0 || headerLength < 0) {\n      return {\n        jsonContent: null,\n        remainingData: data || '',\n      };\n    }\n\n    try {\n      const expectedTotalLength = headerLength + contentLength;\n      const actualByteLength = Buffer.byteLength(data, ContentLengthFramer.ENCODING_UTF8);\n\n      if (actualByteLength < expectedTotalLength) {\n        // Frame is not complete yet\n        return {\n          jsonContent: null,\n          remainingData: data,\n        };\n      }\n\n      // Extract JSON content by byte length\n      const dataBuffer = Buffer.from(data, ContentLengthFramer.ENCODING_UTF8);\n      const jsonContent = dataBuffer\n        .subarray(headerLength, headerLength + contentLength)\n        .toString(ContentLengthFramer.ENCODING_UTF8);\n\n      // Extract remaining data after this frame\n      const remainingData = dataBuffer\n        .subarray(expectedTotalLength)\n        .toString(ContentLengthFramer.ENCODING_UTF8);\n\n      return {\n        jsonContent,\n        remainingData,\n      };\n    } catch (error) {\n      VibeLogger.logError(\n        'extract_frame_error',\n        `Error extracting frame: ${error instanceof Error ? error.message : String(error)}`,\n        {\n          error:\n            error instanceof Error\n              ? {\n                  name: error.name,\n                  message: error.message,\n                  stack: error.stack,\n                }\n              : { raw: String(error) },\n        },\n      );\n      return {\n        jsonContent: null,\n        remainingData: data,\n      };\n    }\n  }\n\n  /**\n   * Extracts a complete frame from the Buffer data.\n   * @param data The Buffer containing the frame\n   * @param contentLength The expected content length\n   * @param headerLength The header length including separators\n   * @returns The extracted JSON content and remaining data\n   */\n  static extractFrameFromBuffer(\n    data: Buffer,\n    contentLength: number,\n    headerLength: number,\n  ): FrameExtractionResult {\n    if (!data || data.length === 0 || contentLength < 0 || headerLength < 0) {\n      return {\n        jsonContent: null,\n        remainingData: data || Buffer.alloc(0),\n      };\n    }\n\n    try {\n      const expectedTotalLength = headerLength + contentLength;\n\n      if (data.length < expectedTotalLength) {\n        // Frame is not complete yet\n        return {\n          jsonContent: null,\n          remainingData: data,\n        };\n      }\n\n      // Extract JSON content\n      const jsonContent = data\n        .subarray(headerLength, headerLength + contentLength)\n        .toString(ContentLengthFramer.ENCODING_UTF8);\n\n      // Extract remaining data after this frame\n      const remainingData = data.subarray(expectedTotalLength);\n\n      return {\n        jsonContent,\n        remainingData,\n      };\n    } catch (error) {\n      VibeLogger.logError(\n        'extract_frame_buffer_error',\n        `Error extracting frame: ${error instanceof Error ? error.message : String(error)}`,\n        {\n          error:\n            error instanceof Error\n              ? {\n                  name: error.name,\n                  message: error.message,\n                  stack: error.stack,\n                }\n              : { raw: String(error) },\n        },\n      );\n      return {\n        jsonContent: null,\n        remainingData: data,\n      };\n    }\n  }\n\n  /**\n   * Validates that the Content-Length value is within acceptable limits.\n   * @param contentLength The content length to validate\n   * @returns True if the content length is valid, false otherwise\n   */\n  static isValidContentLength(contentLength: number): boolean {\n    return contentLength >= 0 && contentLength <= ContentLengthFramer.MAX_MESSAGE_SIZE;\n  }\n\n  /**\n   * Parses the Content-Length value from the header section.\n   * @param headerSection The header section string\n   * @returns The parsed content length, or -1 if parsing failed\n   */\n  private static parseContentLength(headerSection: string): number {\n    if (!headerSection) {\n      return -1;\n    }\n\n    // Handle both standard line separators and potential fragmentation\n    const lines = headerSection.split(/\\r?\\n/);\n\n    for (const line of lines) {\n      const trimmedLine = line.trim();\n\n      // Check for Content-Length header (case-insensitive)\n      // Use more precise matching to avoid false positives\n      const lowerLine = trimmedLine.toLowerCase();\n      if (lowerLine.startsWith('content-length:')) {\n        // Extract the value after the colon\n        const colonIndex = trimmedLine.indexOf(':');\n        if (colonIndex === -1 || colonIndex >= trimmedLine.length - 1) {\n          continue;\n        }\n\n        const valueString = trimmedLine.substring(colonIndex + 1).trim();\n\n        // Try to parse the integer value\n        const parsedValue = parseInt(valueString, 10);\n        if (isNaN(parsedValue)) {\n          // Invalid Content-Length value\n          return -1;\n        }\n\n        if (!ContentLengthFramer.isValidContentLength(parsedValue)) {\n          // Content-Length value exceeds maximum allowed size\n          return -1;\n        }\n\n        return parsedValue;\n      }\n    }\n\n    // Content-Length header not found in header section\n    return -1;\n  }\n}\n", "import { ContentLengthFramer, FrameExtractionResult } from './content-length-framer.js';\n\n/**\n * Dynamic buffer for handling Content-Length framed messages with proper UTF-8 support.\n * Manages buffer growth and frame extraction for TCP communication using Buffer internally.\n */\nexport class DynamicBuffer {\n  // \u5B9A\u6570\u5B9A\u7FA9\n  private static readonly ENCODING_UTF8 = 'utf8';\n  private static readonly HEADER_SEPARATOR = '\\r\\n\\r\\n';\n  private static readonly CONTENT_LENGTH_HEADER = 'content-length:';\n  private static readonly LOG_PREFIX = '[DynamicBuffer]';\n  private static readonly PREVIEW_SUFFIX = '...';\n  private static readonly PREVIEW_LENGTH_FRAME_ERROR = 200;\n  private static readonly LARGE_BUFFER_THRESHOLD = 1024;\n  private static readonly BUFFER_UTILIZATION_THRESHOLD = 0.8;\n  private static readonly DEFAULT_PREVIEW_LENGTH = 100;\n  private static readonly STATS_PREVIEW_LENGTH = 50;\n  private buffer: Buffer = Buffer.alloc(0);\n  private readonly maxBufferSize: number;\n  private readonly initialBufferSize: number;\n\n  constructor(maxBufferSize: number = 1024 * 1024, initialBufferSize: number = 4096) {\n    this.maxBufferSize = maxBufferSize;\n    this.initialBufferSize = initialBufferSize;\n  }\n\n  /**\n   * Appends new data to the buffer.\n   * @param data The data to append (Buffer or string)\n   * @throws Error if buffer would exceed maximum size\n   */\n  append(data: Buffer | string): void {\n    if (!data) {\n      return;\n    }\n\n    // Convert string to Buffer if needed, preserving UTF-8 encoding\n    const dataBuffer = Buffer.isBuffer(data)\n      ? data\n      : Buffer.from(data, DynamicBuffer.ENCODING_UTF8);\n\n    const newSize = this.buffer.length + dataBuffer.length;\n    if (newSize > this.maxBufferSize) {\n      throw new Error(\n        `Buffer size would exceed maximum allowed size: ${newSize} > ${this.maxBufferSize}`,\n      );\n    }\n\n    this.buffer = Buffer.concat([this.buffer, dataBuffer]);\n  }\n\n  /**\n   * Attempts to extract a complete frame from the buffer.\n   * @returns The extracted frame and whether extraction was successful\n   */\n  extractFrame(): { frame: string | null; extracted: boolean } {\n    if (!this.buffer) {\n      return { frame: null, extracted: false };\n    }\n\n    try {\n      // Parse the frame header using Buffer-based parsing\n      const parseResult = ContentLengthFramer.parseFrameFromBuffer(this.buffer);\n\n      if (!parseResult.isComplete) {\n        // Frame is not complete yet\n        return { frame: null, extracted: false };\n      }\n\n      // Extract the complete frame using Buffer-based extraction\n      const extractionResult: FrameExtractionResult = ContentLengthFramer.extractFrameFromBuffer(\n        this.buffer,\n        parseResult.contentLength,\n        parseResult.headerLength,\n      );\n\n      if (!extractionResult.jsonContent) {\n        return { frame: null, extracted: false };\n      }\n\n      // Update buffer with remaining data (convert to Buffer if needed)\n      this.buffer = Buffer.isBuffer(extractionResult.remainingData)\n        ? extractionResult.remainingData\n        : Buffer.from(extractionResult.remainingData, DynamicBuffer.ENCODING_UTF8);\n\n      return {\n        frame: extractionResult.jsonContent,\n        extracted: true,\n      };\n    } catch {\n      // Error extracting frame from buffer\n      return { frame: null, extracted: false };\n    }\n  }\n\n  /**\n   * Extracts all available complete frames from the buffer.\n   * @returns Array of extracted JSON frames\n   */\n  extractAllFrames(): string[] {\n    const frames: string[] = [];\n\n    while (this.buffer.length > 0) {\n      const result = this.extractFrame();\n      if (!result.extracted || !result.frame) {\n        break;\n      }\n      frames.push(result.frame);\n    }\n\n    return frames;\n  }\n\n  /**\n   * Checks if the buffer has any data.\n   * @returns True if buffer contains data, false otherwise\n   */\n  hasData(): boolean {\n    return this.buffer.length > 0;\n  }\n\n  /**\n   * Gets the current buffer size.\n   * @returns The current buffer size in characters\n   */\n  getSize(): number {\n    return this.buffer.length;\n  }\n\n  /**\n   * Checks if a complete frame might be available.\n   * This is a quick check without full parsing.\n   * @returns True if header separator is found, false otherwise\n   */\n  hasCompleteFrameHeader(): boolean {\n    return this.buffer.includes(\n      Buffer.from(DynamicBuffer.HEADER_SEPARATOR, DynamicBuffer.ENCODING_UTF8),\n    );\n  }\n\n  /**\n   * Clears the buffer.\n   */\n  clear(): void {\n    this.buffer = Buffer.alloc(0);\n  }\n\n  /**\n   * Gets a preview of the buffer content for debugging.\n   * @param maxLength Maximum length of preview (default: 100)\n   * @returns Truncated buffer content for debugging\n   */\n  getPreview(maxLength: number = DynamicBuffer.DEFAULT_PREVIEW_LENGTH): string {\n    if (this.buffer.length <= maxLength) {\n      return this.buffer.toString(DynamicBuffer.ENCODING_UTF8);\n    }\n    return (\n      this.buffer.subarray(0, maxLength).toString(DynamicBuffer.ENCODING_UTF8) +\n      DynamicBuffer.PREVIEW_SUFFIX\n    );\n  }\n\n  /**\n   * Validates the buffer state and performs cleanup if necessary.\n   * @returns True if buffer is in valid state, false if cleanup was performed\n   */\n  validateAndCleanup(): boolean {\n    // Check for extremely large buffer without complete frames\n    if (\n      this.buffer.length > this.maxBufferSize * DynamicBuffer.BUFFER_UTILIZATION_THRESHOLD &&\n      !this.hasCompleteFrameHeader()\n    ) {\n      // Large buffer without complete frame header, clearing buffer\n      this.clear();\n      return false;\n    }\n\n    // Check for malformed data (no header separator after reasonable amount of data)\n    const headerSeparatorBuffer = Buffer.from(\n      DynamicBuffer.HEADER_SEPARATOR,\n      DynamicBuffer.ENCODING_UTF8,\n    );\n    const headerSeparatorIndex = this.buffer.indexOf(headerSeparatorBuffer);\n    if (headerSeparatorIndex === -1 && this.buffer.length > DynamicBuffer.LARGE_BUFFER_THRESHOLD) {\n      // Look for potential malformed headers\n      const contentLengthBuffer = Buffer.from(\n        DynamicBuffer.CONTENT_LENGTH_HEADER,\n        DynamicBuffer.ENCODING_UTF8,\n      );\n      const contentLengthIndex = this.buffer.indexOf(contentLengthBuffer);\n      if (contentLengthIndex === -1) {\n        // No Content-Length header found in large buffer, clearing buffer\n        this.clear();\n        return false;\n      }\n    }\n\n    return true;\n  }\n\n  /**\n   * Gets buffer statistics for monitoring and debugging.\n   * @returns Buffer statistics object\n   */\n  getStats(): {\n    size: number;\n    maxSize: number;\n    utilization: number;\n    hasCompleteHeader: boolean;\n    preview: string;\n  } {\n    return {\n      size: this.buffer.length,\n      maxSize: this.maxBufferSize,\n      utilization: (this.buffer.length / this.maxBufferSize) * 100,\n      hasCompleteHeader: this.hasCompleteFrameHeader(),\n      preview: this.getPreview(DynamicBuffer.STATS_PREVIEW_LENGTH),\n    };\n  }\n}\n", "import { JSONRPC } from './constants.js';\nimport { ContentLengthFramer } from './utils/content-length-framer.js';\nimport { DynamicBuffer } from './utils/dynamic-buffer.js';\nimport { VibeLogger } from './utils/vibe-logger.js';\n\n// Constants for JSON-RPC error types\nconst JsonRpcErrorTypes = {\n  SECURITY_BLOCKED: 'security_blocked',\n  INTERNAL_ERROR: 'internal_error',\n} as const;\n\n// Type definitions for JSON-RPC messages\ninterface JsonRpcNotification {\n  method: string;\n  params?: unknown;\n  jsonrpc?: string;\n}\n\ninterface JsonRpcResponse {\n  id: string;\n  result?: unknown;\n  error?: {\n    message: string;\n    data?: {\n      command?: string;\n      reason?: string;\n      message?: string;\n      type?: string;\n    };\n  };\n  jsonrpc?: string;\n}\n\n// Type guard functions\nconst isJsonRpcNotification = (msg: unknown): msg is JsonRpcNotification => {\n  return (\n    typeof msg === 'object' &&\n    msg !== null &&\n    'method' in msg &&\n    typeof (msg as JsonRpcNotification).method === 'string' &&\n    !('id' in msg)\n  );\n};\n\nconst isJsonRpcResponse = (msg: unknown): msg is JsonRpcResponse => {\n  return (\n    typeof msg === 'object' &&\n    msg !== null &&\n    'id' in msg &&\n    typeof (msg as JsonRpcResponse).id === 'string' &&\n    !('method' in msg)\n  );\n};\n\nconst hasValidId = (msg: unknown): msg is { id: string } => {\n  return (\n    typeof msg === 'object' &&\n    msg !== null &&\n    'id' in msg &&\n    typeof (msg as { id: string }).id === 'string'\n  );\n};\n\n/**\n * Handles JSON-RPC message processing with Content-Length framing support\n * Follows Single Responsibility Principle - only handles message parsing and routing\n *\n * Design document reference: /Packages/docs/ARCHITECTURE_TypeScript.md\n * Architecture reference: Packages/src/TypeScriptServer~/ARCHITECTURE.md\n *\n * Related classes:\n * - UnityClient: Uses this class for JSON-RPC message handling\n * - UnityMcpServer: Indirectly uses via UnityClient for Unity communication\n * - ContentLengthFramer: Handles framing/parsing of Content-Length protocol\n * - DynamicBuffer: Manages buffering of incoming data fragments\n */\nexport class MessageHandler {\n  private notificationHandlers: Map<string, (params: unknown) => void> = new Map();\n  private pendingRequests: Map<\n    string,\n    { resolve: (value: unknown) => void; reject: (reason: unknown) => void; timestamp: number }\n  > = new Map();\n\n  // Content-Length framing components\n  private dynamicBuffer: DynamicBuffer = new DynamicBuffer();\n\n  /**\n   * Register notification handler for specific method\n   */\n  onNotification(method: string, handler: (params: unknown) => void): void {\n    this.notificationHandlers.set(method, handler);\n  }\n\n  /**\n   * Remove notification handler\n   */\n  offNotification(method: string): void {\n    this.notificationHandlers.delete(method);\n  }\n\n  /**\n   * Register a pending request\n   */\n  registerPendingRequest(\n    id: string,\n    resolve: (value: unknown) => void,\n    reject: (reason: unknown) => void,\n  ): void {\n    this.pendingRequests.set(id, { resolve, reject, timestamp: Date.now() });\n  }\n\n  /**\n   * Handle incoming data from Unity using Content-Length framing\n   */\n  handleIncomingData(data: Buffer | string): void {\n    // Append new data to dynamic buffer (Buffer or string - DynamicBuffer handles both)\n    this.dynamicBuffer.append(data);\n\n    // Extract all complete frames\n    const frames = this.dynamicBuffer.extractAllFrames();\n\n    for (const frame of frames) {\n      if (!frame || frame.trim() === '') {\n        continue;\n      }\n\n      try {\n        const message: unknown = JSON.parse(frame);\n\n        // Check if this is a notification (no id field)\n        if (isJsonRpcNotification(message)) {\n          this.handleNotification(message);\n        } else if (isJsonRpcResponse(message)) {\n          // This is a response to a request\n          this.handleResponse(message);\n        } else if (hasValidId(message)) {\n          // Fallback for other messages with valid id\n          this.handleResponse(message as JsonRpcResponse);\n        }\n      } catch (parseError) {\n        VibeLogger.logError(\n          'json_parse_error',\n          'Error parsing JSON frame',\n          {\n            error: parseError instanceof Error ? parseError.message : String(parseError),\n            frame: frame.substring(0, 200), // Truncate for security\n          },\n          undefined,\n          'Invalid JSON received from Unity, frame may be corrupted',\n        );\n      }\n    }\n  }\n\n  /**\n   * Handle notification from Unity\n   */\n  private handleNotification(notification: JsonRpcNotification): void {\n    const { method, params } = notification;\n\n    const handler = this.notificationHandlers.get(method);\n    if (handler) {\n      try {\n        handler(params);\n      } catch (error) {\n        VibeLogger.logError(\n          'notification_handler_error',\n          `Error in notification handler for ${method}`,\n          { error: error instanceof Error ? error.message : String(error) },\n          undefined,\n          'Exception occurred while processing notification',\n        );\n      }\n    }\n  }\n\n  /**\n   * Handle response from Unity\n   */\n  private handleResponse(response: JsonRpcResponse): void {\n    const { id } = response;\n    const pending = this.pendingRequests.get(id);\n\n    if (pending) {\n      this.pendingRequests.delete(id);\n\n      if (response.error) {\n        let errorMessage = response.error.message || 'Unknown error';\n\n        // If security blocked, provide detailed information\n        if (response.error.data?.type === JsonRpcErrorTypes.SECURITY_BLOCKED) {\n          const data = response.error.data;\n          errorMessage = `${data.reason || errorMessage}`;\n          if (data.command) {\n            errorMessage += ` (Command: ${data.command})`;\n          }\n          // Add instruction for enabling the feature\n          errorMessage +=\n            ' To use this feature, enable the corresponding option in Unity menu: Window > uLoopMCP > Security Settings';\n        }\n\n        pending.reject(new Error(errorMessage));\n      } else {\n        pending.resolve(response);\n      }\n    } else {\n      // This can happen due to connection issues, reconnection, or timing issues\n      // Log as warning instead of error since it's not always a critical issue\n      const activeRequestIds = Array.from(this.pendingRequests.keys()).join(', ');\n      const currentTime = Date.now();\n\n      // Use structured logging instead of console for better debugging\n      VibeLogger.logWarning(\n        'unknown_request_response',\n        `Received response for unknown request ID: ${id}`,\n        {\n          unknown_request_id: id,\n          active_request_ids: activeRequestIds,\n          current_time: currentTime,\n        },\n        undefined,\n        'This may be a delayed response from before reconnection',\n        'Monitor if this pattern indicates connection stability issues',\n      );\n    }\n  }\n\n  /**\n   * Clear all pending requests (used during disconnect)\n   */\n  clearPendingRequests(reason: string): void {\n    for (const [, pending] of this.pendingRequests) {\n      pending.reject(new Error(reason));\n    }\n    this.pendingRequests.clear();\n  }\n\n  /**\n   * Create JSON-RPC request with Content-Length framing\n   */\n  createRequest(method: string, params: Record<string, unknown>, id: string): string {\n    const request = {\n      jsonrpc: JSONRPC.VERSION,\n      id,\n      method,\n      params,\n    };\n    const jsonContent = JSON.stringify(request);\n    return ContentLengthFramer.createFrame(jsonContent);\n  }\n\n  /**\n   * Clear the dynamic buffer (for connection reset)\n   */\n  clearBuffer(): void {\n    this.dynamicBuffer.clear();\n  }\n\n  /**\n   * Get buffer statistics for debugging\n   */\n  getBufferStats(): {\n    size: number;\n    maxSize: number;\n    utilization: number;\n    hasCompleteHeader: boolean;\n    preview: string;\n  } {\n    return this.dynamicBuffer.getStats();\n  }\n}\n", "import { CONNECTION_LOST_DEBOUNCE_MS, POLLING } from './constants.js';\nimport { VibeLogger } from './utils/vibe-logger.js';\nimport { UnityClient } from './unity-client.js';\n\n/**\n * Unity Discovery Service with Unified Connection Management\n * Handles both Unity discovery and connection polling in a single timer\n * to prevent multiple concurrent timers and improve stability.\n *\n * Design document reference: Packages/src/TypeScriptServer~/ARCHITECTURE.md\n *\n * Related classes:\n * - UnityClient: TCP client that this service manages discovery for\n * - UnityConnectionManager: Higher-level connection manager that uses this service\n * - UnityMcpServer: Main server that initiates discovery\n */\nexport class UnityDiscovery {\n  private discoveryInterval: NodeJS.Timeout | null = null;\n  private unityClient: UnityClient;\n  private onDiscoveredCallback: ((port: number) => Promise<void>) | null = null;\n  private onConnectionLostCallback: (() => void) | null = null;\n  private isDiscovering: boolean = false;\n  private isDevelopment: boolean = false;\n  private discoveryAttemptCount: number = 0;\n  private lastConnectionLostTime: number = 0;\n\n  // Singleton pattern to prevent multiple instances\n  private static instance: UnityDiscovery | null = null;\n  private static activeTimerCount: number = 0; // Track active timers for debugging\n\n  private constructor(unityClient: UnityClient) {\n    this.unityClient = unityClient;\n    this.isDevelopment = process.env.NODE_ENV === 'development';\n  }\n\n  /**\n   * Get singleton instance of UnityDiscovery\n   */\n  static getInstance(unityClient: UnityClient): UnityDiscovery {\n    if (!UnityDiscovery.instance) {\n      UnityDiscovery.instance = new UnityDiscovery(unityClient);\n    }\n    return UnityDiscovery.instance;\n  }\n\n  /**\n   * Set callback for when Unity is discovered\n   */\n  setOnDiscoveredCallback(callback: (port: number) => Promise<void>): void {\n    this.onDiscoveredCallback = callback;\n  }\n\n  /**\n   * Set callback for when connection is lost\n   */\n  setOnConnectionLostCallback(callback: () => void): void {\n    this.onConnectionLostCallback = callback;\n  }\n\n  /**\n   * Check if discovery is currently running\n   */\n  getIsDiscovering(): boolean {\n    return this.isDiscovering;\n  }\n\n  /**\n   * Get current polling interval based on attempt count\n   */\n  private getCurrentPollingInterval(): number {\n    const currentInterval =\n      this.discoveryAttemptCount <= POLLING.INITIAL_ATTEMPTS\n        ? POLLING.INITIAL_INTERVAL_MS\n        : POLLING.EXTENDED_INTERVAL_MS;\n\n    // Log when switching from initial to extended polling\n    if (this.discoveryAttemptCount === POLLING.INITIAL_ATTEMPTS + 1) {\n      VibeLogger.logInfo(\n        'unity_discovery_polling_switch',\n        'Switching from initial to extended polling interval',\n        {\n          previous_interval_ms: POLLING.INITIAL_INTERVAL_MS,\n          new_interval_ms: POLLING.EXTENDED_INTERVAL_MS,\n          discovery_attempt_count: this.discoveryAttemptCount,\n          switch_threshold: POLLING.INITIAL_ATTEMPTS,\n        },\n        undefined,\n        'Polling interval changed to reduce CPU usage after initial attempts',\n        'Monitor if this reduces system load while maintaining connection reliability',\n      );\n    }\n\n    return currentInterval;\n  }\n\n  /**\n   * Schedule next discovery attempt with adaptive interval\n   */\n  private scheduleNextDiscovery(): void {\n    const currentInterval = this.getCurrentPollingInterval();\n    const isInitialPolling = this.discoveryAttemptCount <= POLLING.INITIAL_ATTEMPTS;\n\n    VibeLogger.logDebug(\n      'unity_discovery_scheduling_next',\n      'Scheduling next discovery attempt',\n      {\n        next_interval_ms: currentInterval,\n        discovery_attempt_count: this.discoveryAttemptCount,\n        is_initial_polling: isInitialPolling,\n        polling_type: isInitialPolling ? 'initial_fast' : 'extended_slow',\n      },\n      undefined,\n      `Next discovery scheduled in ${currentInterval}ms`,\n    );\n\n    this.discoveryInterval = setTimeout(() => {\n      void this.unifiedDiscoveryAndConnectionCheck();\n      // Schedule next attempt recursively\n      if (this.discoveryInterval) {\n        this.scheduleNextDiscovery();\n      }\n    }, currentInterval);\n  }\n\n  /**\n   * Start Unity discovery polling with unified connection management\n   */\n  start(): void {\n    if (this.discoveryInterval) {\n      return; // Already running\n    }\n\n    if (this.isDiscovering) {\n      return; // Already discovering\n    }\n\n    // Reset attempt count when starting\n    this.discoveryAttemptCount = 0;\n\n    // Immediate discovery attempt\n    void this.unifiedDiscoveryAndConnectionCheck();\n\n    // Set up adaptive polling\n    this.scheduleNextDiscovery();\n\n    // Track active timer count for debugging\n    UnityDiscovery.activeTimerCount++;\n  }\n\n  /**\n   * Stop Unity discovery polling\n   */\n  stop(): void {\n    if (this.discoveryInterval) {\n      clearTimeout(this.discoveryInterval);\n      this.discoveryInterval = null;\n    }\n\n    // Always reset discovering flag regardless of interval state\n    this.isDiscovering = false;\n\n    // Reset attempt count when stopping\n    this.discoveryAttemptCount = 0;\n\n    // Track active timer count for debugging\n    UnityDiscovery.activeTimerCount = Math.max(0, UnityDiscovery.activeTimerCount - 1);\n  }\n\n  /**\n   * Force reset discovery state (for debugging and recovery)\n   */\n  forceResetDiscoveryState(): void {\n    this.isDiscovering = false;\n    VibeLogger.logWarning(\n      'unity_discovery_state_force_reset',\n      'Discovery state forcibly reset',\n      { was_discovering: true },\n      undefined,\n      'Manual recovery from stuck discovery state',\n    );\n  }\n\n  /**\n   * Unified discovery and connection checking\n   * Handles both Unity discovery and connection health monitoring\n   */\n  private async unifiedDiscoveryAndConnectionCheck(): Promise<void> {\n    const correlationId = VibeLogger.generateCorrelationId();\n\n    // Double-check with lock to prevent race conditions\n    if (this.isDiscovering) {\n      VibeLogger.logDebug(\n        'unity_discovery_skip_in_progress',\n        'Discovery already in progress - skipping',\n        { is_discovering: true, active_timer_count: UnityDiscovery.activeTimerCount },\n        correlationId,\n        'Another discovery cycle is already running - this is normal behavior.',\n      );\n      return;\n    }\n\n    // Initialize discovery cycle\n    this.logDiscoveryCycleStart(correlationId);\n\n    try {\n      // Check connection health if already connected\n      const shouldContinueDiscovery = await this.handleConnectionHealthCheck(correlationId);\n      if (!shouldContinueDiscovery) {\n        return;\n      }\n\n      // Execute Unity discovery with timeout protection\n      await this.executeUnityDiscovery(correlationId);\n    } catch (error) {\n      VibeLogger.logError(\n        'unity_discovery_cycle_error',\n        'Discovery cycle encountered error',\n        {\n          error_message: error instanceof Error ? error.message : String(error),\n          is_discovering: this.isDiscovering,\n          correlation_id: correlationId,\n        },\n        correlationId,\n        'Discovery cycle failed - forcing state reset to prevent hang',\n      );\n    } finally {\n      this.finalizeCycleWithCleanup(correlationId);\n    }\n  }\n\n  /**\n   * Log discovery cycle initialization\n   */\n  private logDiscoveryCycleStart(correlationId: string): void {\n    // Atomic flag setting with additional logging for debugging\n    this.isDiscovering = true;\n\n    // Increment attempt count for adaptive polling\n    this.discoveryAttemptCount++;\n\n    const currentInterval = this.getCurrentPollingInterval();\n\n    VibeLogger.logDebug(\n      'unity_discovery_state_set',\n      'Discovery state set to true',\n      { is_discovering: true, correlation_id: correlationId },\n      correlationId,\n      'Discovery state flag set - starting cycle',\n    );\n\n    VibeLogger.logInfo(\n      'unity_discovery_cycle_start',\n      'Starting unified discovery and connection check cycle',\n      {\n        unity_connected: this.unityClient.connected,\n        polling_interval_ms: currentInterval,\n        discovery_attempt_count: this.discoveryAttemptCount,\n        is_initial_polling: this.discoveryAttemptCount <= POLLING.INITIAL_ATTEMPTS,\n        active_timer_count: UnityDiscovery.activeTimerCount,\n      },\n      correlationId,\n      'This cycle checks connection health and attempts Unity discovery if needed.',\n    );\n  }\n\n  /**\n   * Handle connection health check and determine if discovery should continue\n   */\n  private async handleConnectionHealthCheck(correlationId: string): Promise<boolean> {\n    // If already connected, check connection health (lightweight)\n    if (this.unityClient.connected) {\n      const isConnectionHealthy = await this.checkConnectionHealth();\n\n      if (isConnectionHealthy) {\n        // Connection is healthy - stop discovery\n        VibeLogger.logInfo(\n          'unity_discovery_connection_healthy',\n          'Connection is healthy - stopping discovery',\n          { connection_healthy: true },\n          correlationId,\n        );\n        this.stop();\n        return false; // Don't continue discovery\n      } else {\n        // Connection might be temporarily unhealthy\n        // Don't immediately assume it's lost - give it time to recover\n        VibeLogger.logWarning(\n          'unity_discovery_connection_unhealthy',\n          'Connection appears unhealthy - continuing discovery without assuming loss',\n          { connection_healthy: false },\n          correlationId,\n          'Connection health check failed. Will continue discovery but not assume complete loss.',\n          'Connection may recover on next cycle. Monitor for persistent issues.',\n        );\n\n        // Don't trigger connection lost callback immediately\n        // Let discovery continue and see if connection recovers\n      }\n    }\n    return true; // Continue discovery\n  }\n\n  /**\n   * Execute Unity discovery with timeout protection\n   */\n  private async executeUnityDiscovery(_correlationId: string): Promise<void> {\n    // Discover Unity by checking port range with timeout protection\n    await Promise.race([\n      this.discoverUnityOnPorts(),\n      new Promise<void>((_, reject) =>\n        setTimeout(() => reject(new Error('Unity discovery timeout - 5 seconds')), 5000),\n      ),\n    ]);\n  }\n\n  /**\n   * Finalize discovery cycle with cleanup and logging\n   */\n  private finalizeCycleWithCleanup(correlationId: string): void {\n    VibeLogger.logDebug(\n      'unity_discovery_cycle_end',\n      'Discovery cycle completed - resetting state',\n      {\n        is_discovering_before: this.isDiscovering,\n        is_discovering_after: false,\n        correlation_id: correlationId,\n      },\n      correlationId,\n      'Discovery cycle finished and state reset to prevent hang',\n      undefined,\n      true,\n    );\n    // Force state reset regardless of outcome\n    this.isDiscovering = false;\n  }\n\n  /**\n   * Check if the current connection is healthy with timeout protection\n   */\n  private async checkConnectionHealth(): Promise<boolean> {\n    try {\n      // Add an additional timeout layer to prevent hanging\n      const healthCheck = await Promise.race([\n        this.unityClient.testConnection(),\n        new Promise<boolean>((_, reject) =>\n          setTimeout(() => reject(new Error('Connection health check timeout')), 1000),\n        ),\n      ]);\n      return healthCheck;\n    } catch {\n      // Return false on any error or timeout\n      return false;\n    }\n  }\n\n  /**\n   * Discover Unity by checking specified port\n   */\n  private async discoverUnityOnPorts(): Promise<void> {\n    const correlationId = VibeLogger.generateCorrelationId();\n\n    const unityTcpPort: string | undefined = process.env.UNITY_TCP_PORT;\n    if (!unityTcpPort) {\n      throw new Error('UNITY_TCP_PORT environment variable is required but not set');\n    }\n\n    const port: number = parseInt(unityTcpPort, 10);\n    if (isNaN(port) || port <= 0 || port > 65535) {\n      throw new Error(`UNITY_TCP_PORT must be a valid port number (1-65535), got: ${unityTcpPort}`);\n    }\n\n    VibeLogger.logInfo(\n      'unity_discovery_port_scan_start',\n      'Starting Unity port discovery scan',\n      {\n        target_port: port,\n      },\n      correlationId,\n      'Checking specified port for Unity MCP server.',\n    );\n\n    try {\n      if (await UnityClient.isUnityAvailable(port)) {\n        VibeLogger.logInfo(\n          'unity_discovery_success',\n          'Unity discovered and connection established',\n          {\n            discovered_port: port,\n          },\n          correlationId,\n          'Unity MCP server found and connection established successfully.',\n          'Monitor for tools/list_changed notifications after this discovery.',\n        );\n\n        // Update client port - connection management is UnityClient's responsibility\n        this.unityClient.updatePort(port);\n\n        // Notify discovery callback - let higher-level components handle connection\n        if (this.onDiscoveredCallback) {\n          await this.onDiscoveredCallback(port);\n        }\n        return;\n      }\n    } catch (error) {\n      VibeLogger.logDebug(\n        'unity_discovery_port_check_failed',\n        'Unity availability check failed for specified port',\n        {\n          target_port: port,\n          error_message: error instanceof Error ? error.message : String(error),\n          error_type: error instanceof Error ? error.constructor.name : typeof error,\n        },\n        correlationId,\n        'Expected failure when Unity is not running on this port. Will continue polling.',\n        'This is normal during Unity startup or when Unity is not running.',\n      );\n    }\n\n    VibeLogger.logWarning(\n      'unity_discovery_no_unity_found',\n      'No Unity server found on specified port',\n      {\n        target_port: port,\n      },\n      correlationId,\n      'Unity MCP server not found on the specified port. Unity may not be running or using a different port.',\n      'Check Unity console for MCP server status and verify port configuration.',\n    );\n  }\n\n  /**\n   * Force immediate Unity discovery for connection recovery\n   */\n  async forceDiscovery(): Promise<boolean> {\n    if (this.unityClient.connected) {\n      return true;\n    }\n\n    // Use the unified discovery method\n    await this.unifiedDiscoveryAndConnectionCheck();\n\n    return this.unityClient.connected;\n  }\n\n  /**\n   * Handle connection lost event (called by UnityClient)\n   * Includes debounce to prevent rapid repeated handling\n   */\n  handleConnectionLost(): void {\n    const now = Date.now();\n\n    // Debounce: ignore if called too soon after the last connection lost event\n    if (now - this.lastConnectionLostTime < CONNECTION_LOST_DEBOUNCE_MS) {\n      VibeLogger.logDebug(\n        'unity_discovery_connection_lost_debounced',\n        'Connection lost event debounced',\n        {\n          time_since_last_ms: now - this.lastConnectionLostTime,\n          debounce_threshold_ms: CONNECTION_LOST_DEBOUNCE_MS,\n        },\n        undefined,\n        'Ignoring rapid connection lost event to prevent flooding',\n      );\n      return;\n    }\n\n    this.lastConnectionLostTime = now;\n    const correlationId = VibeLogger.generateCorrelationId();\n\n    VibeLogger.logInfo(\n      'unity_discovery_connection_lost_handler',\n      'Handling connection lost event',\n      {\n        was_discovering: this.isDiscovering,\n        has_discovery_interval: this.discoveryInterval !== null,\n        active_timer_count: UnityDiscovery.activeTimerCount,\n      },\n      correlationId,\n      'Connection lost event received - preparing for recovery',\n    );\n\n    // Force reset discovery state to ensure clean restart\n    this.isDiscovering = false;\n    this.discoveryAttemptCount = 0;\n\n    // Add delay before restarting discovery to allow Unity to fully shut down\n    setTimeout(() => {\n      VibeLogger.logInfo(\n        'unity_discovery_restart_after_connection_lost',\n        'Restarting discovery after connection lost delay',\n        {\n          has_discovery_interval: this.discoveryInterval !== null,\n        },\n        correlationId,\n        'Starting discovery with delay to allow Unity server restart',\n      );\n\n      // Restart discovery if not already running\n      if (!this.discoveryInterval) {\n        this.start();\n      }\n    }, 2000); // 2\u79D2\u5F85\u3063\u3066\u304B\u3089\u30C7\u30A3\u30B9\u30AB\u30D0\u30EA\u30FC\u518D\u958B\n\n    // Trigger callback immediately\n    if (this.onConnectionLostCallback) {\n      this.onConnectionLostCallback();\n    }\n  }\n\n  /**\n   * Get debugging information about current timer state\n   */\n  getDebugInfo(): object {\n    return {\n      isTimerActive: this.discoveryInterval !== null,\n      isDiscovering: this.isDiscovering,\n      activeTimerCount: UnityDiscovery.activeTimerCount,\n      isConnected: this.unityClient.connected,\n      intervalMs: this.getCurrentPollingInterval(),\n      discoveryAttemptCount: this.discoveryAttemptCount,\n      isInitialPolling: this.discoveryAttemptCount <= POLLING.INITIAL_ATTEMPTS,\n      hasSingleton: UnityDiscovery.instance !== null,\n    };\n  }\n}\n", "import { UnityClient } from './unity-client.js';\nimport { UnityDiscovery } from './unity-discovery.js';\nimport { ENVIRONMENT } from './constants.js';\n\n/**\n * Unity Connection Manager - Manages Unity connection and discovery functionality\n *\n * Design document reference: Packages/src/TypeScriptServer~/ARCHITECTURE.md\n *\n * Related classes:\n * - UnityClient: Manages TCP connection to Unity Editor\n * - UnityDiscovery: Handles Unity discovery and polling\n * - UnityMcpServer: Main server class that uses this manager\n *\n * Key features:\n * - Unity connection waiting and establishment\n * - Integration with discovery service\n * - Connection state monitoring\n * - Reconnection handling\n */\nexport class UnityConnectionManager {\n  private unityClient: UnityClient;\n  private unityDiscovery: UnityDiscovery;\n  private readonly isDevelopment: boolean;\n  private isInitialized: boolean = false;\n  private isReconnecting: boolean = false;\n  private initializingPromise: Promise<void> | null = null;\n\n  constructor(unityClient: UnityClient) {\n    this.unityClient = unityClient;\n    this.isDevelopment = process.env.NODE_ENV === ENVIRONMENT.NODE_ENV_DEVELOPMENT;\n\n    // Initialize Unity discovery service (singleton pattern prevents duplicates)\n    this.unityDiscovery = UnityDiscovery.getInstance(this.unityClient);\n\n    // Set UnityDiscovery reference in UnityClient for unified connection management\n    this.unityClient.setUnityDiscovery(this.unityDiscovery);\n  }\n\n  /**\n   * Get Unity discovery instance\n   */\n  getUnityDiscovery(): UnityDiscovery {\n    return this.unityDiscovery;\n  }\n\n  /**\n   * Wait for Unity connection with timeout\n   */\n  async waitForUnityConnectionWithTimeout(timeoutMs: number): Promise<void> {\n    return new Promise((resolve, reject) => {\n      const timeout = setTimeout(() => {\n        reject(new Error(`Unity connection timeout after ${timeoutMs}ms`));\n      }, timeoutMs);\n\n      const checkConnection = (): void => {\n        if (this.unityClient.connected) {\n          clearTimeout(timeout);\n          resolve();\n          return;\n        }\n\n        // If connection manager is already initialized, just wait for existing discovery\n        if (this.isInitialized) {\n          // Connection manager is already running, just wait for connection\n          const connectionInterval = setInterval(() => {\n            if (this.unityClient.connected) {\n              clearTimeout(timeout);\n              clearInterval(connectionInterval);\n              resolve();\n            }\n          }, 100);\n          return;\n        }\n\n        // Fallback: Initialize connection manager if not already done\n        this.initialize(() => {\n          return new Promise<void>((resolveCallback) => {\n            clearTimeout(timeout);\n            resolve();\n            resolveCallback();\n          });\n        });\n      };\n\n      void checkConnection();\n    });\n  }\n\n  /**\n   * Handle Unity discovery and establish connection\n   */\n  async handleUnityDiscovered(onConnectionEstablished?: () => Promise<void>): Promise<void> {\n    try {\n      // Ensure UnityClient connection state is properly set\n      // Even though discovery confirmed TCP connectivity, we need to ensure the connection state is updated\n      await this.unityClient.ensureConnected();\n\n      // Unity connection established via discovery\n\n      // Execute callback if provided\n      if (onConnectionEstablished) {\n        await onConnectionEstablished();\n      }\n\n      // Stop discovery after successful connection\n      this.unityDiscovery.stop();\n    } catch {\n      // Failed to handle Unity discovery\n    }\n  }\n\n  /**\n   * Initialize connection manager with guard against concurrent initialization\n   */\n  initialize(onConnectionEstablished?: () => Promise<void>): void {\n    // Guard: already initialized\n    if (this.isInitialized) {\n      return;\n    }\n\n    // Guard: initialization in progress (prevents race condition)\n    if (this.initializingPromise) {\n      return;\n    }\n\n    this.isInitialized = true;\n\n    // Setup discovery callback\n    this.unityDiscovery.setOnDiscoveredCallback(async (_port: number) => {\n      await this.handleUnityDiscovered(onConnectionEstablished);\n    });\n\n    // Start Unity discovery immediately\n    this.unityDiscovery.start();\n  }\n\n  /**\n   * Setup reconnection callback\n   */\n  setupReconnectionCallback(callback: () => Promise<void>): void {\n    this.unityClient.setReconnectedCallback(() => {\n      // Prevent duplicate reconnection handling\n      if (this.isReconnecting) {\n        return;\n      }\n\n      this.isReconnecting = true;\n\n      // Force Unity discovery for faster reconnection\n      void this.unityDiscovery\n        .forceDiscovery()\n        .then(() => {\n          return callback();\n        })\n        .finally(() => {\n          this.isReconnecting = false;\n        });\n    });\n  }\n\n  /**\n   * Check if Unity is connected\n   */\n  isConnected(): boolean {\n    return this.unityClient.connected;\n  }\n\n  /**\n   * Ensure Unity connection is established\n   */\n  async ensureConnected(timeoutMs: number = 10000): Promise<void> {\n    if (this.isConnected()) {\n      return;\n    }\n    await this.waitForUnityConnectionWithTimeout(timeoutMs);\n  }\n\n  /**\n   * Test connection (validate connection state)\n   */\n  async testConnection(): Promise<boolean> {\n    try {\n      return await this.unityClient.testConnection();\n    } catch {\n      return false;\n    }\n  }\n\n  /**\n   * Disconnect from Unity\n   */\n  disconnect(): void {\n    this.unityDiscovery.stop();\n    this.unityClient.disconnect();\n  }\n}\n", "import { ToolHandler, ToolResponse, ToolContext } from '../types/tool-types.js';\n\n/**\n * Base class for tools\n * Provides common processing and template method pattern\n *\n * Design document reference: Packages/src/TypeScriptServer~/ARCHITECTURE.md\n *\n * Related classes:\n * - DynamicUnityCommandTool: Extends this class for Unity tools\n * - UnityMcpServer: Uses tools through this interface\n * - ToolHandler: Interface this class implements\n */\nexport abstract class BaseTool implements ToolHandler {\n  abstract readonly name: string;\n  abstract readonly description: string;\n  abstract readonly inputSchema: object;\n\n  protected context: ToolContext;\n\n  constructor(context: ToolContext) {\n    this.context = context;\n  }\n\n  /**\n   * Main method for tool execution\n   */\n  async handle(args: unknown): Promise<ToolResponse> {\n    try {\n      const validatedArgs: Record<string, unknown> = this.validateArgs(args);\n      const result: ToolResponse | string = await this.execute(validatedArgs);\n      return this.formatResponse(result);\n    } catch (error) {\n      return this.formatErrorResponse(error);\n    }\n  }\n\n  /**\n   * Argument validation (implemented in subclass)\n   */\n  protected abstract validateArgs(args: unknown): Record<string, unknown>;\n\n  /**\n   * Actual processing (implemented in subclass)\n   */\n  protected abstract execute(args: Record<string, unknown>): Promise<ToolResponse | string>;\n\n  /**\n   * Format success response (can be overridden in subclass)\n   */\n  protected formatResponse(result: ToolResponse | string): ToolResponse {\n    if (typeof result === 'object' && result !== null && 'content' in result) {\n      return result;\n    }\n    return {\n      content: [\n        {\n          type: 'text',\n          text: typeof result === 'string' ? result : JSON.stringify(result, null, 2),\n        },\n      ],\n    };\n  }\n\n  /**\n   * Format error response\n   */\n  protected formatErrorResponse(error: unknown): ToolResponse {\n    const errorMessage = error instanceof Error ? error.message : 'Unknown error';\n    return {\n      content: [\n        {\n          type: 'text',\n          text: `Error in ${this.name}: ${errorMessage}`,\n        },\n      ],\n    };\n  }\n}\n", "import { BaseTool } from './base-tool.js';\nimport { ToolContext, ToolResponse } from '../types/tool-types.js';\nimport { PARAMETER_SCHEMA } from '../constants.js';\n\n// Type definitions for Unity parameter schema\ninterface UnityParameterInfo {\n  [key: string]: unknown;\n}\n\ninterface UnityParameterSchema {\n  [key: string]: unknown;\n}\n\ninterface JsonSchemaProperty {\n  type: string;\n  description?: string;\n  default?: unknown;\n  enum?: string[];\n  items?: { type: string };\n}\n\ninterface InputSchema {\n  type: string;\n  properties: Record<string, JsonSchemaProperty>;\n  required?: string[];\n  additionalProperties?: boolean;\n}\n\n/**\n * Dynamically generated tool for Unity tools\n *\n * Design document reference: Packages/src/TypeScriptServer~/ARCHITECTURE.md\n *\n * Related classes:\n * - UnityMcpServer: Instantiates and uses this tool\n * - UnityClient: Used to execute the actual tool in Unity\n * - BaseTool: Base class providing common tool functionality\n */\nexport class DynamicUnityCommandTool extends BaseTool {\n  public readonly name: string;\n  public readonly description: string;\n  public readonly inputSchema: InputSchema;\n  private readonly toolName: string;\n\n  constructor(\n    context: ToolContext,\n    toolName: string,\n    description: string,\n    parameterSchema?: UnityParameterSchema,\n  ) {\n    super(context);\n    this.toolName = toolName;\n    this.name = toolName;\n    this.description = description;\n    this.inputSchema = this.generateInputSchema(parameterSchema);\n  }\n\n  private generateInputSchema(parameterSchema?: UnityParameterSchema): InputSchema {\n    if (this.hasNoParameters(parameterSchema)) {\n      // For tools without parameters, return minimal schema without dummy parameters\n      return {\n        type: 'object',\n        properties: {},\n        additionalProperties: false,\n      };\n    }\n\n    const properties: Record<string, JsonSchemaProperty> = {};\n    const required: string[] = [];\n\n    // Convert Unity parameter schema to JSON Schema format using constants\n    if (!parameterSchema) {\n      throw new Error('Parameter schema is undefined');\n    }\n    const propertiesObj = parameterSchema[PARAMETER_SCHEMA.PROPERTIES_PROPERTY] as Record<\n      string,\n      UnityParameterInfo\n    >;\n    for (const [propName, propInfo] of Object.entries(propertiesObj)) {\n      const info = propInfo;\n\n      const typeValue = info[PARAMETER_SCHEMA.TYPE_PROPERTY];\n      const descriptionValue = info[PARAMETER_SCHEMA.DESCRIPTION_PROPERTY];\n\n      const property: JsonSchemaProperty = {\n        type: this.convertType(typeof typeValue === 'string' ? typeValue : 'string'),\n        description:\n          typeof descriptionValue === 'string' ? descriptionValue : `Parameter: ${propName}`,\n      };\n\n      // Add default value if provided\n      const defaultValue = info[PARAMETER_SCHEMA.DEFAULT_VALUE_PROPERTY];\n      if (defaultValue !== undefined && defaultValue !== null) {\n        property.default = defaultValue;\n      }\n\n      // Add enum values if provided using constants\n      const enumValues = info[PARAMETER_SCHEMA.ENUM_PROPERTY];\n      if (enumValues && Array.isArray(enumValues) && enumValues.length > 0) {\n        property.enum = enumValues as string[];\n      }\n\n      // Handle array type\n      if (\n        info[PARAMETER_SCHEMA.TYPE_PROPERTY] === 'array' &&\n        defaultValue &&\n        Array.isArray(defaultValue)\n      ) {\n        property.items = {\n          type: 'string',\n        };\n        property.default = defaultValue;\n      }\n\n      // SECURITY: propName is validated input from Unity's tool schema - safe for object property assignment\n      Object.defineProperty(properties, propName, {\n        value: property,\n        writable: true,\n        enumerable: true,\n        configurable: true,\n      });\n    }\n\n    // Add required parameters using constants\n    if (!parameterSchema) {\n      throw new Error('Parameter schema is undefined');\n    }\n    const requiredParams = parameterSchema[PARAMETER_SCHEMA.REQUIRED_PROPERTY];\n    if (requiredParams && Array.isArray(requiredParams)) {\n      required.push(...(requiredParams as string[]));\n    }\n\n    const schema = {\n      type: 'object',\n      properties: properties,\n      required: required.length > 0 ? required : undefined,\n    };\n\n    return schema;\n  }\n\n  private convertType(unityType: string): string {\n    switch (unityType?.toLowerCase()) {\n      case 'string':\n        return 'string';\n      case 'number':\n      case 'int':\n      case 'float':\n      case 'double':\n        return 'number';\n      case 'boolean':\n      case 'bool':\n        return 'boolean';\n      case 'array':\n        return 'array';\n      default:\n        return 'string'; // Default fallback\n    }\n  }\n\n  private hasNoParameters(parameterSchema?: UnityParameterSchema): boolean {\n    if (!parameterSchema) {\n      return true;\n    }\n\n    const properties = parameterSchema[PARAMETER_SCHEMA.PROPERTIES_PROPERTY];\n    if (!properties || typeof properties !== 'object') {\n      return true;\n    }\n\n    return Object.keys(properties).length === 0;\n  }\n\n  validateArgs(args: unknown): Record<string, unknown> {\n    // If no real parameters are defined, return empty object\n    if (!this.inputSchema.properties || Object.keys(this.inputSchema.properties).length === 0) {\n      return {};\n    }\n\n    return (args as Record<string, unknown>) || {};\n  }\n\n  async execute(args: Record<string, unknown>): Promise<ToolResponse> {\n    try {\n      // Validate and use the provided arguments\n      const actualArgs: Record<string, unknown> = this.validateArgs(args);\n\n      const result: unknown = await this.context.unityClient.executeTool(this.toolName, actualArgs);\n\n      return {\n        content: [\n          {\n            type: 'text',\n            text: typeof result === 'string' ? result : JSON.stringify(result, null, 2),\n          },\n        ],\n      };\n    } catch (error) {\n      return this.formatErrorResponse(error);\n    }\n  }\n\n  protected formatErrorResponse(error: unknown): ToolResponse {\n    const errorMessage = error instanceof Error ? error.message : 'Unknown error';\n    return {\n      content: [\n        {\n          type: 'text',\n          text: errorMessage,\n        },\n      ],\n      isError: true,\n    };\n  }\n}\n", "/**\n * \u30C9\u30E1\u30A4\u30F3\u30A8\u30E9\u30FC\u968E\u5C64\u306E\u5B9A\u7FA9\n *\n * \u8A2D\u8A08\u30C9\u30AD\u30E5\u30E1\u30F3\u30C8\u53C2\u7167:\n * - /Packages/docs/ARCHITECTURE_TypeScript.md#\u30A8\u30E9\u30FC\u30CF\u30F3\u30C9\u30EA\u30F3\u30B0\n *\n * \u95A2\u9023\u30AF\u30E9\u30B9:\n * - UseCase\u5B9F\u88C5\u30AF\u30E9\u30B9\u7FA4\uFF08domain/use-cases/\uFF09\n * - ApplicationService\u5B9F\u88C5\u30AF\u30E9\u30B9\u7FA4\uFF08application/services/\uFF09\n */\n\n/**\n * \u30C9\u30E1\u30A4\u30F3\u30A8\u30E9\u30FC\u306E\u57FA\u5E95\u30AF\u30E9\u30B9\n *\n * \u8CAC\u4EFB:\n * - \u5168\u3066\u306E\u30C9\u30E1\u30A4\u30F3\u95A2\u9023\u30A8\u30E9\u30FC\u306E\u57FA\u5E95\n * - \u30A8\u30E9\u30FC\u30B3\u30FC\u30C9\u306B\u3088\u308B\u5206\u985E\n * - \u578B\u5B89\u5168\u306A\u30A8\u30E9\u30FC\u30CF\u30F3\u30C9\u30EA\u30F3\u30B0\u306E\u63D0\u4F9B\n */\nexport abstract class DomainError extends Error {\n  abstract readonly code: string;\n\n  constructor(\n    message: string,\n    public readonly details?: unknown,\n  ) {\n    super(message);\n    this.name = this.constructor.name;\n\n    // TypeScript\u3067Error\u7D99\u627F\u6642\u306E\u30D7\u30ED\u30C8\u30BF\u30A4\u30D7\u30C1\u30A7\u30FC\u30F3\u4FEE\u6B63\n    Object.setPrototypeOf(this, new.target.prototype);\n  }\n}\n\n/**\n * Unity\u63A5\u7D9A\u95A2\u9023\u306E\u30A8\u30E9\u30FC\n *\n * \u4F7F\u7528\u5834\u9762:\n * - Unity\u63A5\u7D9A\u306E\u78BA\u7ACB\u306B\u5931\u6557\u3057\u305F\u5834\u5408\n * - \u63A5\u7D9A\u304C\u4E88\u671F\u305B\u305A\u5207\u65AD\u3055\u308C\u305F\u5834\u5408\n * - \u30DD\u30FC\u30C8\u8A2D\u5B9A\u306B\u554F\u984C\u304C\u3042\u308B\u5834\u5408\n */\nexport class ConnectionError extends DomainError {\n  readonly code = 'CONNECTION_ERROR';\n}\n\n/**\n * \u30C4\u30FC\u30EB\u5B9F\u884C\u95A2\u9023\u306E\u30A8\u30E9\u30FC\n *\n * \u4F7F\u7528\u5834\u9762:\n * - \u30C4\u30FC\u30EB\u306E\u5B9F\u884C\u306B\u5931\u6557\u3057\u305F\u5834\u5408\n * - \u30C4\u30FC\u30EB\u304C\u5B58\u5728\u3057\u306A\u3044\u5834\u5408\n * - \u30C4\u30FC\u30EB\u306E\u5F15\u6570\u304C\u4E0D\u6B63\u306A\u5834\u5408\n */\nexport class ToolExecutionError extends DomainError {\n  readonly code = 'TOOL_EXECUTION_ERROR';\n}\n\n/**\n * \u5165\u529B\u5024\u691C\u8A3C\u30A8\u30E9\u30FC\n *\n * \u4F7F\u7528\u5834\u9762:\n * - \u30EA\u30AF\u30A8\u30B9\u30C8\u30D1\u30E9\u30E1\u30FC\u30BF\u304C\u4E0D\u6B63\u306A\u5834\u5408\n * - \u5FC5\u9808\u30D1\u30E9\u30E1\u30FC\u30BF\u304C\u4E0D\u8DB3\u3057\u3066\u3044\u308B\u5834\u5408\n * - \u5024\u306E\u5F62\u5F0F\u304C\u4E0D\u6B63\u306A\u5834\u5408\n */\nexport class ValidationError extends DomainError {\n  readonly code = 'VALIDATION_ERROR';\n}\n\n/**\n * \u767A\u898B\u30D7\u30ED\u30BB\u30B9\u95A2\u9023\u306E\u30A8\u30E9\u30FC\n *\n * \u4F7F\u7528\u5834\u9762:\n * - Unity\u767A\u898B\u30D7\u30ED\u30BB\u30B9\u306B\u5931\u6557\u3057\u305F\u5834\u5408\n * - \u767A\u898B\u3055\u308C\u305FUnity\u3068\u306E\u63A5\u7D9A\u306B\u5931\u6557\u3057\u305F\u5834\u5408\n * - \u767A\u898B\u30BF\u30A4\u30E0\u30A2\u30A6\u30C8\u304C\u767A\u751F\u3057\u305F\u5834\u5408\n */\nexport class DiscoveryError extends DomainError {\n  readonly code = 'DISCOVERY_ERROR';\n}\n\n/**\n * \u30AF\u30E9\u30A4\u30A2\u30F3\u30C8\u4E92\u63DB\u6027\u95A2\u9023\u306E\u30A8\u30E9\u30FC\n *\n * \u4F7F\u7528\u5834\u9762:\n * - \u30B5\u30DD\u30FC\u30C8\u3055\u308C\u3066\u3044\u306A\u3044\u30AF\u30E9\u30A4\u30A2\u30F3\u30C8\u304B\u3089\u306E\u63A5\u7D9A\n * - \u30AF\u30E9\u30A4\u30A2\u30F3\u30C8\u8A2D\u5B9A\u306E\u521D\u671F\u5316\u306B\u5931\u6557\u3057\u305F\u5834\u5408\n * - \u4E92\u63DB\u6027\u30C1\u30A7\u30C3\u30AF\u306B\u5931\u6557\u3057\u305F\u5834\u5408\n */\nexport class ClientCompatibilityError extends DomainError {\n  readonly code = 'CLIENT_COMPATIBILITY_ERROR';\n}\n", "/**\n * Infrastructure Error Types\n *\n * Design document reference:\n * - /Packages/docs/ARCHITECTURE_TypeScript.md#\u30A8\u30E9\u30FC\u30CF\u30F3\u30C9\u30EA\u30F3\u30B0\n *\n * Related classes:\n * - DomainError (domain/errors.ts) - for conversion to domain errors\n * - Infrastructure service implementations\n *\n * Key principles:\n * - Infrastructure\u5C64\u56FA\u6709\u306E\u30A8\u30E9\u30FC\u578B\u5B9A\u7FA9\n * - Domain\u5C64\u3078\u306E\u5909\u63DB\u3092\u30B5\u30DD\u30FC\u30C8\n * - \u6280\u8853\u7684\u8A73\u7D30\u3092\u542B\u3080\u8A73\u7D30\u306A\u30A8\u30E9\u30FC\u60C5\u5831\n */\n\n/**\n * Infrastructure\u5C64\u30A8\u30E9\u30FC\u306E\u57FA\u5E95\u30AF\u30E9\u30B9\n *\n * \u8CAC\u4EFB:\n * - Infrastructure\u5C64\u3067\u306E\u6280\u8853\u7684\u30A8\u30E9\u30FC\u306E\u57FA\u5E95\n * - \u8A73\u7D30\u306A\u6280\u8853\u60C5\u5831\u306E\u4FDD\u6301\n * - Domain\u5C64\u30A8\u30E9\u30FC\u3078\u306E\u5909\u63DB\u30B5\u30DD\u30FC\u30C8\n */\nexport abstract class InfrastructureError extends Error {\n  abstract readonly category: string;\n\n  constructor(\n    message: string,\n    public readonly technicalDetails?: unknown,\n    public readonly originalError?: Error,\n  ) {\n    super(message);\n    this.name = this.constructor.name;\n\n    // TypeScript\u3067Error\u7D99\u627F\u6642\u306E\u30D7\u30ED\u30C8\u30BF\u30A4\u30D7\u30C1\u30A7\u30FC\u30F3\u4FEE\u6B63\n    Object.setPrototypeOf(this, new.target.prototype);\n  }\n\n  /**\n   * \u6280\u8853\u7684\u8A73\u7D30\u3092\u542B\u3080\u5B8C\u5168\u306A\u30A8\u30E9\u30FC\u60C5\u5831\u3092\u53D6\u5F97\n   */\n  getFullErrorInfo(): {\n    message: string;\n    category: string;\n    technicalDetails?: unknown;\n    originalError?: string;\n    stack?: string;\n  } {\n    return {\n      message: this.message,\n      category: this.category,\n      technicalDetails: this.technicalDetails,\n      originalError: this.originalError?.message,\n      stack: this.stack,\n    };\n  }\n}\n\n/**\n * Unity\u901A\u4FE1\u95A2\u9023\u306E\u30A8\u30E9\u30FC\n *\n * \u4F7F\u7528\u5834\u9762:\n * - Unity TCP\u30BD\u30B1\u30C3\u30C8\u901A\u4FE1\u30A8\u30E9\u30FC\n * - Unity API\u30EC\u30B9\u30DD\u30F3\u30B9\u306E\u89E3\u6790\u30A8\u30E9\u30FC\n * - \u30CD\u30C3\u30C8\u30EF\u30FC\u30AF\u63A5\u7D9A\u30BF\u30A4\u30E0\u30A2\u30A6\u30C8\n */\nexport class UnityCommunicationError extends InfrastructureError {\n  readonly category = 'UNITY_COMMUNICATION';\n\n  constructor(\n    message: string,\n    public readonly unityEndpoint?: string,\n    public readonly requestData?: unknown,\n    originalError?: Error,\n  ) {\n    super(message, { unityEndpoint, requestData }, originalError);\n  }\n}\n\n/**\n * Tool\u7BA1\u7406\u95A2\u9023\u306E\u30A8\u30E9\u30FC\n *\n * \u4F7F\u7528\u5834\u9762:\n * - Dynamic tool\u4F5C\u6210\u5931\u6557\n * - Tool schema\u89E3\u6790\u30A8\u30E9\u30FC\n * - Tool\u5B9F\u884C\u74B0\u5883\u30A8\u30E9\u30FC\n */\nexport class ToolManagementError extends InfrastructureError {\n  readonly category = 'TOOL_MANAGEMENT';\n\n  constructor(\n    message: string,\n    public readonly toolName?: string,\n    public readonly toolData?: unknown,\n    originalError?: Error,\n  ) {\n    super(message, { toolName, toolData }, originalError);\n  }\n}\n\n/**\n * ServiceLocator\u95A2\u9023\u306E\u30A8\u30E9\u30FC\n *\n * \u4F7F\u7528\u5834\u9762:\n * - \u30B5\u30FC\u30D3\u30B9\u89E3\u6C7A\u5931\u6557\n * - \u5FAA\u74B0\u4F9D\u5B58\u691C\u51FA\n * - \u30B5\u30FC\u30D3\u30B9\u767B\u9332\u30A8\u30E9\u30FC\n */\nexport class ServiceResolutionError extends InfrastructureError {\n  readonly category = 'SERVICE_RESOLUTION';\n\n  constructor(\n    message: string,\n    public readonly serviceToken?: string,\n    public readonly resolutionStack?: unknown[],\n    originalError?: Error,\n  ) {\n    super(message, { serviceToken, resolutionStack }, originalError);\n  }\n}\n\n/**\n * Network/Discovery\u95A2\u9023\u306E\u30A8\u30E9\u30FC\n *\n * \u4F7F\u7528\u5834\u9762:\n * - Unity\u767A\u898B\u30D7\u30ED\u30BB\u30B9\u30A8\u30E9\u30FC\n * - TCP\u63A5\u7D9A\u30A8\u30E9\u30FC\n * - \u30DD\u30FC\u30C8\u30D0\u30A4\u30F3\u30C7\u30A3\u30F3\u30B0\u30A8\u30E9\u30FC\n */\nexport class NetworkError extends InfrastructureError {\n  readonly category = 'NETWORK';\n\n  constructor(\n    message: string,\n    public readonly endpoint?: string,\n    public readonly port?: number,\n    originalError?: Error,\n  ) {\n    super(message, { endpoint, port }, originalError);\n  }\n}\n\n/**\n * MCP Protocol\u95A2\u9023\u306E\u30A8\u30E9\u30FC\n *\n * \u4F7F\u7528\u5834\u9762:\n * - MCP\u30E1\u30C3\u30BB\u30FC\u30B8\u89E3\u6790\u30A8\u30E9\u30FC\n * - \u30D7\u30ED\u30C8\u30B3\u30EB\u30D0\u30FC\u30B8\u30E7\u30F3\u4E0D\u4E00\u81F4\n * - \u30AF\u30E9\u30A4\u30A2\u30F3\u30C8\u4E92\u63DB\u6027\u30A8\u30E9\u30FC\n */\nexport class McpProtocolError extends InfrastructureError {\n  readonly category = 'MCP_PROTOCOL';\n\n  constructor(\n    message: string,\n    public readonly protocolVersion?: string,\n    public readonly messageData?: unknown,\n    originalError?: Error,\n  ) {\n    super(message, { protocolVersion, messageData }, originalError);\n  }\n}\n", "/**\n * Error Conversion Service\n *\n * Design document reference:\n * - /Packages/docs/ARCHITECTURE_TypeScript.md#\u30A8\u30E9\u30FC\u30CF\u30F3\u30C9\u30EA\u30F3\u30B0\n *\n * Related classes:\n * - DomainError (domain/errors.ts) - conversion target\n * - InfrastructureError (infrastructure/errors.ts) - conversion source\n * - Application Services - use this for error conversion\n *\n * Key principles:\n * - Infrastructure\u5C64\u306E\u30A8\u30E9\u30FC\u3092Domain\u5C64\u306E\u30A8\u30E9\u30FC\u306B\u5909\u63DB\n * - \u6280\u8853\u7684\u8A73\u7D30\u3092\u30ED\u30B0\u306B\u8A18\u9332\u3057\u3064\u3064\u3001\u30D3\u30B8\u30CD\u30B9\u7684\u306A\u610F\u5473\u3067\u30A8\u30E9\u30FC\u3092\u5206\u985E\n * - Clean Architecture\u306E\u4F9D\u5B58\u95A2\u4FC2\u3092\u4FDD\u6301\n */\n\nimport {\n  DomainError,\n  ConnectionError,\n  ToolExecutionError,\n  ValidationError,\n  DiscoveryError,\n  ClientCompatibilityError,\n} from '../domain/errors.js';\nimport {\n  InfrastructureError,\n  UnityCommunicationError,\n  ToolManagementError,\n  ServiceResolutionError,\n  NetworkError,\n  McpProtocolError,\n} from '../infrastructure/errors.js';\nimport { VibeLogger } from '../utils/vibe-logger.js';\n\n/**\n * Infrastructure\u5C64\u306E\u30A8\u30E9\u30FC\u3092Domain\u5C64\u306E\u30A8\u30E9\u30FC\u306B\u5909\u63DB\u3059\u308B\u30B5\u30FC\u30D3\u30B9\n *\n * \u8CAC\u4EFB:\n * - Infrastructure\u56FA\u6709\u30A8\u30E9\u30FC\u306EDomain\u30A8\u30E9\u30FC\u3078\u306E\u5909\u63DB\n * - \u6280\u8853\u7684\u8A73\u7D30\u306E\u30ED\u30B0\u8A18\u9332\n * - \u30A8\u30E9\u30FC\u60C5\u5831\u306E\u9069\u5207\u306A\u62BD\u8C61\u5316\n */\nexport class ErrorConverter {\n  /**\n   * Infrastructure\u5C64\u306E\u30A8\u30E9\u30FC\u3092Domain\u5C64\u306E\u30A8\u30E9\u30FC\u306B\u5909\u63DB\n   *\n   * @param error \u5909\u63DB\u5BFE\u8C61\u306E\u30A8\u30E9\u30FC\n   * @param operation \u64CD\u4F5C\u540D\uFF08\u30ED\u30B0\u7528\uFF09\n   * @param correlationId \u76F8\u95A2ID\n   * @returns \u5909\u63DB\u3055\u308C\u305FDomainError\n   */\n  static convertToDomainError(\n    error: unknown,\n    operation: string,\n    correlationId?: string,\n  ): DomainError {\n    // \u65E2\u306BDomainError\u306E\u5834\u5408\u306F\u305D\u306E\u307E\u307E\u8FD4\u3059\n    if (error instanceof DomainError) {\n      return error;\n    }\n\n    // Infrastructure\u5C64\u30A8\u30E9\u30FC\u306E\u5909\u63DB\n    if (error instanceof InfrastructureError) {\n      return this.convertInfrastructureError(error, operation, correlationId);\n    }\n\n    // \u4E00\u822C\u7684\u306AError\u306E\u5909\u63DB\n    if (error instanceof Error) {\n      return this.convertGenericError(error, operation, correlationId);\n    }\n\n    // \u4E0D\u660E\u306A\u30A8\u30E9\u30FC\u306E\u51E6\u7406\n    return this.convertUnknownError(error, operation, correlationId);\n  }\n\n  /**\n   * Infrastructure\u5C64\u30A8\u30E9\u30FC\u3092Domain\u5C64\u30A8\u30E9\u30FC\u306B\u5909\u63DB\n   */\n  private static convertInfrastructureError(\n    error: InfrastructureError,\n    operation: string,\n    correlationId?: string,\n  ): DomainError {\n    // \u6280\u8853\u7684\u8A73\u7D30\u3092\u30ED\u30B0\u306B\u8A18\u9332\n    VibeLogger.logError(\n      `${operation}_infrastructure_error`,\n      `Infrastructure error during ${operation}`,\n      error.getFullErrorInfo(),\n      correlationId,\n      'Error Converter logging technical details before domain conversion',\n    );\n\n    // \u30AB\u30C6\u30B4\u30EA\u306B\u57FA\u3065\u3044\u3066DomainError\u306B\u5909\u63DB\n    switch (error.category) {\n      case 'UNITY_COMMUNICATION':\n        return new ConnectionError(`Unity communication failed: ${error.message}`, {\n          original_category: error.category,\n          unity_endpoint: (error as UnityCommunicationError).unityEndpoint,\n        });\n\n      case 'TOOL_MANAGEMENT':\n        return new ToolExecutionError(`Tool management failed: ${error.message}`, {\n          original_category: error.category,\n          tool_name: (error as ToolManagementError).toolName,\n        });\n\n      case 'SERVICE_RESOLUTION':\n        return new ValidationError(`Service resolution failed: ${error.message}`, {\n          original_category: error.category,\n          service_token: (error as ServiceResolutionError).serviceToken,\n        });\n\n      case 'NETWORK':\n        return new DiscoveryError(`Network operation failed: ${error.message}`, {\n          original_category: error.category,\n          endpoint: (error as NetworkError).endpoint,\n          port: (error as NetworkError).port,\n        });\n\n      case 'MCP_PROTOCOL':\n        return new ClientCompatibilityError(`MCP protocol error: ${error.message}`, {\n          original_category: error.category,\n          protocol_version: (error as McpProtocolError).protocolVersion,\n        });\n\n      default:\n        return new ToolExecutionError(`Infrastructure error: ${error.message}`, {\n          original_category: error.category,\n        });\n    }\n  }\n\n  /**\n   * \u4E00\u822C\u7684\u306AError\u3092Domain\u5C64\u30A8\u30E9\u30FC\u306B\u5909\u63DB\n   */\n  private static convertGenericError(\n    error: Error,\n    operation: string,\n    correlationId?: string,\n  ): DomainError {\n    VibeLogger.logError(\n      `${operation}_generic_error`,\n      `Generic error during ${operation}`,\n      {\n        error_name: error.name,\n        error_message: error.message,\n        stack: error.stack,\n      },\n      correlationId,\n      'Error Converter handling generic Error instance',\n    );\n\n    // \u30E1\u30C3\u30BB\u30FC\u30B8\u304B\u3089\u63A8\u6E2C\u3057\u3066\u30A8\u30E9\u30FC\u7A2E\u5225\u3092\u6C7A\u5B9A\n    const message = error.message.toLowerCase();\n\n    if (message.includes('connection') || message.includes('connect')) {\n      return new ConnectionError(`Connection error: ${error.message}`);\n    }\n\n    if (message.includes('tool') || message.includes('execute')) {\n      return new ToolExecutionError(`Tool execution error: ${error.message}`);\n    }\n\n    if (message.includes('validation') || message.includes('invalid')) {\n      return new ValidationError(`Validation error: ${error.message}`);\n    }\n\n    if (message.includes('discovery') || message.includes('network')) {\n      return new DiscoveryError(`Discovery error: ${error.message}`);\n    }\n\n    // \u30C7\u30D5\u30A9\u30EB\u30C8\u306FToolExecutionError\n    return new ToolExecutionError(`Unexpected error: ${error.message}`);\n  }\n\n  /**\n   * \u4E0D\u660E\u306A\u30A8\u30E9\u30FC\u30AA\u30D6\u30B8\u30A7\u30AF\u30C8\u3092Domain\u5C64\u30A8\u30E9\u30FC\u306B\u5909\u63DB\n   */\n  private static convertUnknownError(\n    error: unknown,\n    operation: string,\n    correlationId?: string,\n  ): DomainError {\n    const errorString = typeof error === 'string' ? error : JSON.stringify(error);\n\n    VibeLogger.logError(\n      `${operation}_unknown_error`,\n      `Unknown error type during ${operation}`,\n      { error_value: error, error_type: typeof error },\n      correlationId,\n      'Error Converter handling unknown error type',\n    );\n\n    return new ToolExecutionError(`Unknown error occurred: ${errorString}`);\n  }\n\n  /**\n   * \u30A8\u30E9\u30FC\u304C\u56DE\u5FA9\u53EF\u80FD\u304B\u3069\u3046\u304B\u3092\u5224\u5B9A\n   *\n   * @param error \u5224\u5B9A\u5BFE\u8C61\u306E\u30A8\u30E9\u30FC\n   * @returns \u56DE\u5FA9\u53EF\u80FD\u306A\u5834\u5408true\n   */\n  static isRecoverable(error: DomainError): boolean {\n    switch (error.code) {\n      case 'CONNECTION_ERROR':\n      case 'DISCOVERY_ERROR':\n        return true; // \u63A5\u7D9A\u30FB\u767A\u898B\u30A8\u30E9\u30FC\u306F\u518D\u8A66\u884C\u53EF\u80FD\n\n      case 'VALIDATION_ERROR':\n      case 'CLIENT_COMPATIBILITY_ERROR':\n        return false; // \u691C\u8A3C\u30FB\u4E92\u63DB\u6027\u30A8\u30E9\u30FC\u306F\u56DE\u5FA9\u4E0D\u53EF\u80FD\n\n      case 'TOOL_EXECUTION_ERROR':\n        return true; // \u30C4\u30FC\u30EB\u5B9F\u884C\u30A8\u30E9\u30FC\u306F\u72B6\u6CC1\u306B\u3088\u3063\u3066\u518D\u8A66\u884C\u53EF\u80FD\n\n      default:\n        return false; // \u4E0D\u660E\u306A\u30A8\u30E9\u30FC\u306F\u5B89\u5168\u306E\u305F\u3081\u56DE\u5FA9\u4E0D\u53EF\u80FD\u3068\u3059\u308B\n    }\n  }\n}\n", "/**\n * Refresh Tools UseCase\n *\n * Design document reference:\n * - /Packages/docs/ARCHITECTURE_TypeScript.md#RefreshToolsUseCase\n *\n * Related classes:\n * - IConnectionService (application/interfaces/connection-service.ts)\n * - IToolManagementService (application/interfaces/tool-management-service.ts)\n * - IToolQueryService (application/interfaces/tool-query-service.ts)\n * - ServiceLocator (infrastructure/service-locator.ts)\n */\n\nimport { UseCase } from '../base-interfaces.js';\nimport { RefreshToolsRequest } from '../models/requests.js';\nimport { RefreshToolsResponse } from '../models/responses.js';\nimport { VibeLogger } from '../../utils/vibe-logger.js';\nimport { ErrorConverter } from '../../application/error-converter.js';\nimport { IConnectionService } from '../../application/interfaces/connection-service.js';\nimport { IToolManagementService } from '../../application/interfaces/tool-management-service.js';\nimport { IToolQueryService } from '../../application/interfaces/tool-query-service.js';\n\n/**\n * UseCase for refreshing Unity tools\n *\n * Responsibilities:\n * - Orchestrate the complete tool refresh workflow\n * - Handle Unity reconnection scenarios (domain reload recovery)\n * - Manage temporal cohesion of tool refresh process\n * - Coordinate tool refresh with notification sending\n *\n * Workflow:\n * 1. Ensure Unity connection is established\n * 2. Initialize/refresh dynamic tools from Unity\n * 3. Return refreshed tools list\n * 4. Support notification callback for MCP client updates\n */\nexport class RefreshToolsUseCase implements UseCase<RefreshToolsRequest, RefreshToolsResponse> {\n  private connectionService: IConnectionService;\n  private toolManagementService: IToolManagementService;\n  private toolQueryService: IToolQueryService;\n\n  constructor(\n    connectionService: IConnectionService,\n    toolManagementService: IToolManagementService,\n    toolQueryService: IToolQueryService,\n  ) {\n    this.connectionService = connectionService;\n    this.toolManagementService = toolManagementService;\n    this.toolQueryService = toolQueryService;\n  }\n\n  /**\n   * Execute the tool refresh workflow\n   *\n   * @param request Tool refresh request\n   * @returns Tool refresh response\n   */\n  async execute(request: RefreshToolsRequest): Promise<RefreshToolsResponse> {\n    const correlationId = VibeLogger.generateCorrelationId();\n\n    VibeLogger.logInfo(\n      'refresh_tools_use_case_start',\n      'Starting tool refresh workflow',\n      { include_development: request.includeDevelopmentOnly },\n      correlationId,\n      'UseCase orchestrating tool refresh workflow for domain reload recovery',\n    );\n\n    try {\n      // Step 1: Ensure Unity connection is established (critical for domain reload recovery)\n      await this.ensureUnityConnection(correlationId);\n\n      // Step 2: Initialize/refresh dynamic tools from Unity\n      await this.refreshToolsFromUnity(correlationId);\n\n      // Step 3: Get refreshed tools list\n      const refreshedTools = this.toolQueryService.getAllTools();\n\n      const response: RefreshToolsResponse = {\n        tools: refreshedTools,\n        refreshedAt: new Date().toISOString(),\n      };\n\n      VibeLogger.logInfo(\n        'refresh_tools_use_case_success',\n        'Tool refresh workflow completed successfully',\n        {\n          tool_count: refreshedTools.length,\n          refreshed_at: response.refreshedAt,\n        },\n        correlationId,\n        'Tool refresh completed successfully - Unity tools updated after domain reload',\n      );\n\n      return response;\n    } catch (error) {\n      return this.handleRefreshError(error, request, correlationId);\n    }\n  }\n\n  /**\n   * Ensure Unity connection is established\n   *\n   * @param correlationId Correlation ID for logging\n   * @throws ConnectionError if connection cannot be established\n   */\n  private async ensureUnityConnection(correlationId: string): Promise<void> {\n    if (!this.connectionService.isConnected()) {\n      VibeLogger.logWarning(\n        'refresh_tools_unity_not_connected',\n        'Unity not connected during tool refresh, attempting to establish connection',\n        { connected: false },\n        correlationId,\n        'Unity connection required for tool refresh after domain reload',\n      );\n\n      try {\n        await this.connectionService.ensureConnected(10000);\n      } catch (error) {\n        // Use ErrorConverter for consistent error handling\n        const domainError = ErrorConverter.convertToDomainError(\n          error,\n          'refresh_tools_connection_ensure',\n          correlationId,\n        );\n        throw domainError;\n      }\n    }\n\n    VibeLogger.logDebug(\n      'refresh_tools_connection_verified',\n      'Unity connection verified for tool refresh',\n      { connected: true },\n      correlationId,\n      'Connection ready for tool refresh after domain reload',\n    );\n  }\n\n  /**\n   * Refresh tools from Unity by re-initializing dynamic tools\n   *\n   * @param correlationId Correlation ID for logging\n   */\n  private async refreshToolsFromUnity(correlationId: string): Promise<void> {\n    try {\n      VibeLogger.logDebug(\n        'refresh_tools_initializing',\n        'Re-initializing dynamic tools from Unity',\n        {},\n        correlationId,\n        'Fetching latest tool definitions from Unity after domain reload',\n      );\n\n      // Re-initialize tools (this will fetch latest tool definitions from Unity)\n      await this.toolManagementService.initializeTools();\n\n      VibeLogger.logInfo(\n        'refresh_tools_initialized',\n        'Dynamic tools re-initialized successfully from Unity',\n        { tool_count: this.toolQueryService.getToolsCount() },\n        correlationId,\n        'Tool definitions updated from Unity after domain reload',\n      );\n    } catch (error) {\n      // Use ErrorConverter to convert Infrastructure errors to Domain errors\n      const domainError = ErrorConverter.convertToDomainError(\n        error,\n        'refresh_tools_initialization',\n        correlationId,\n      );\n\n      throw domainError;\n    }\n  }\n\n  /**\n   * Handle tool refresh errors\n   *\n   * @param error Error that occurred\n   * @param request Original request\n   * @param correlationId Correlation ID for logging\n   * @returns RefreshToolsResponse with error state\n   */\n  private handleRefreshError(\n    error: unknown,\n    request: RefreshToolsRequest,\n    correlationId: string,\n  ): RefreshToolsResponse {\n    const errorMessage = error instanceof Error ? error.message : 'Unknown error';\n\n    VibeLogger.logError(\n      'refresh_tools_use_case_error',\n      'Tool refresh workflow failed',\n      {\n        include_development: request.includeDevelopmentOnly,\n        error_message: errorMessage,\n        error_type: error instanceof Error ? error.constructor.name : typeof error,\n      },\n      correlationId,\n      'UseCase workflow failed - returning empty tools list to prevent client errors',\n    );\n\n    // Return empty tools list instead of throwing - tool refresh should be resilient\n    return {\n      tools: [],\n      refreshedAt: new Date().toISOString(),\n    };\n  }\n}\n", "import { UnityClient } from './unity-client.js';\nimport { DynamicUnityCommandTool } from './tools/dynamic-unity-command-tool.js';\nimport { Tool } from '@modelcontextprotocol/sdk/types.js';\nimport { ENVIRONMENT } from './constants.js';\nimport { RefreshToolsUseCase } from './domain/use-cases/refresh-tools-use-case.js';\nimport { VibeLogger } from './utils/vibe-logger.js';\nimport { IToolService } from './application/interfaces/tool-service.js';\nimport { IToolQueryService } from './application/interfaces/tool-query-service.js';\nimport { IToolManagementService } from './application/interfaces/tool-management-service.js';\nimport { IUnityToolCommunicationService } from './application/interfaces/unity-tool-communication-service.js';\nimport { UnityConnectionManager } from './unity-connection-manager.js';\nimport { UnityCommunicationError, ToolManagementError } from './infrastructure/errors.js';\n\n// Import UnityParameterSchema type from the tool file\ntype UnityParameterSchema = { [key: string]: unknown };\n\n/**\n * Unity Tool Manager - Manages dynamic tool generation and management\n *\n * Design document reference: Packages/src/TypeScriptServer~/ARCHITECTURE.md\n *\n * Related classes:\n * - UnityClient: Manages communication with Unity Editor\n * - DynamicUnityCommandTool: Implementation of dynamic tools\n * - UnityMcpServer: Main server class that uses this manager\n *\n * Key features:\n * - Dynamic tool generation from Unity tools\n * - Tool refresh management\n * - Tool details fetching and parsing\n * - Development mode support\n */\nexport class UnityToolManager\n  implements IToolService, IToolQueryService, IToolManagementService, IUnityToolCommunicationService\n{\n  private unityClient: UnityClient;\n  private readonly isDevelopment: boolean;\n  private readonly dynamicTools: Map<string, DynamicUnityCommandTool> = new Map();\n  private isRefreshing: boolean = false;\n  private clientName: string = '';\n  private connectionManager?: UnityConnectionManager; // Will be injected for UseCase\n\n  constructor(unityClient: UnityClient) {\n    this.unityClient = unityClient;\n    this.isDevelopment = process.env.NODE_ENV === ENVIRONMENT.NODE_ENV_DEVELOPMENT;\n  }\n\n  /**\n   * Set connection manager for UseCase integration (Phase 3.2)\n   */\n  setConnectionManager(connectionManager: UnityConnectionManager): void {\n    this.connectionManager = connectionManager;\n  }\n\n  /**\n   * Set client name for Unity communication\n   */\n  setClientName(clientName: string): void {\n    this.clientName = clientName;\n  }\n\n  /**\n   * Get dynamic tools map\n   */\n  getDynamicTools(): Map<string, DynamicUnityCommandTool> {\n    return this.dynamicTools;\n  }\n\n  /**\n   * Get tools from Unity\n   */\n  async getToolsFromUnity(): Promise<Tool[]> {\n    if (!this.unityClient.connected) {\n      return [];\n    }\n\n    try {\n      const toolDetails = await this.unityClient.fetchToolDetailsFromUnity(this.isDevelopment);\n\n      if (!toolDetails) {\n        throw new UnityCommunicationError(\n          'Unity returned no tool details',\n          'Unity Editor tools endpoint',\n          { development_mode: this.isDevelopment },\n        );\n      }\n\n      this.createDynamicToolsFromTools(toolDetails);\n\n      // Convert dynamic tools to Tool array\n      const tools: Tool[] = [];\n      for (const [toolName, dynamicTool] of this.dynamicTools) {\n        tools.push({\n          name: toolName,\n          description: dynamicTool.description,\n          inputSchema: this.convertToMcpSchema(dynamicTool.inputSchema),\n        });\n      }\n\n      return tools;\n    } catch (error) {\n      if (error instanceof UnityCommunicationError) {\n        throw error; // Re-throw infrastructure errors\n      }\n\n      throw new UnityCommunicationError(\n        'Failed to retrieve tools from Unity',\n        'Unity Editor tools endpoint',\n        { development_mode: this.isDevelopment },\n        error instanceof Error ? error : undefined,\n      );\n    }\n  }\n\n  /**\n   * Initialize dynamic Unity tools\n   */\n  async initializeDynamicTools(): Promise<void> {\n    try {\n      await this.unityClient.ensureConnected();\n\n      const toolDetails = await this.unityClient.fetchToolDetailsFromUnity(this.isDevelopment);\n      if (!toolDetails) {\n        throw new UnityCommunicationError(\n          'Unity returned no tool details during initialization',\n          'Unity Editor tools endpoint',\n          { development_mode: this.isDevelopment },\n        );\n      }\n\n      this.createDynamicToolsFromTools(toolDetails);\n\n      // Tool details processed successfully\n    } catch (error) {\n      if (error instanceof UnityCommunicationError) {\n        throw error; // Re-throw infrastructure errors\n      }\n\n      throw new ToolManagementError(\n        'Failed to initialize dynamic tools',\n        undefined,\n        { development_mode: this.isDevelopment },\n        error instanceof Error ? error : undefined,\n      );\n    }\n  }\n\n  /**\n   * Create dynamic tools from Unity tool details\n   */\n  private createDynamicToolsFromTools(toolDetails: unknown[]): void {\n    // Create dynamic tools for each Unity tool\n    this.dynamicTools.clear();\n    const toolContext = { unityClient: this.unityClient };\n\n    for (const toolInfo of toolDetails) {\n      const toolName = (toolInfo as { name: string }).name;\n      const description =\n        (toolInfo as { description?: string }).description || `Execute Unity tool: ${toolName}`;\n      const parameterSchema = (toolInfo as { parameterSchema?: unknown }).parameterSchema;\n      const displayDevelopmentOnly =\n        (toolInfo as { displayDevelopmentOnly?: boolean }).displayDevelopmentOnly || false;\n\n      // Skip development-only tools in production mode\n      if (displayDevelopmentOnly && !this.isDevelopment) {\n        continue;\n      }\n\n      const finalToolName = toolName;\n\n      const dynamicTool = new DynamicUnityCommandTool(\n        toolContext,\n        toolName,\n        description,\n        parameterSchema as UnityParameterSchema | undefined, // Type assertion for schema compatibility\n      );\n\n      this.dynamicTools.set(finalToolName, dynamicTool);\n    }\n  }\n\n  /**\n   * Refresh dynamic tools by re-fetching from Unity\n   * This method can be called to update the tool list when Unity tools change\n   *\n   * IMPORTANT: This method is critical for domain reload recovery\n   */\n  async refreshDynamicTools(sendNotification?: () => void): Promise<void> {\n    try {\n      // Phase 3.2: Use RefreshToolsUseCase if connectionManager is available\n      // BUT avoid during connection establishment to prevent circular dependency\n      if (this.connectionManager && this.connectionManager.isConnected()) {\n        await this.refreshToolsWithUseCase(sendNotification);\n        return;\n      }\n\n      // Fallback: Use direct initialization if UseCase is not available\n      await this.refreshToolsFallback(sendNotification);\n    } catch (error) {\n      const errorMessage = error instanceof Error ? error.message : String(error);\n      VibeLogger.logError(\n        'unity_tool_manager_refresh_failed',\n        'Failed to refresh dynamic tools',\n        { error: errorMessage },\n        undefined,\n        'Tool refresh failed - domain reload recovery may be impacted',\n      );\n\n      // Final fallback: try direct initialization to maintain domain reload recovery\n      await this.executeUltimateToolsFallback(sendNotification);\n    }\n  }\n\n  /**\n   * Refresh tools using RefreshToolsUseCase (preferred method)\n   */\n  private async refreshToolsWithUseCase(sendNotification?: () => void): Promise<void> {\n    if (!this.connectionManager) {\n      throw new Error('ConnectionManager is required for UseCase-based refresh');\n    }\n    const refreshToolsUseCase = new RefreshToolsUseCase(this.connectionManager, this, this);\n\n    const result = await refreshToolsUseCase.execute({\n      includeDevelopmentOnly: this.isDevelopment,\n    });\n\n    VibeLogger.logInfo(\n      'unity_tool_manager_refresh_completed',\n      'Dynamic tools refreshed successfully via UseCase',\n      { tool_count: result.tools.length, refreshed_at: result.refreshedAt },\n      undefined,\n      'Tool refresh completed - ready for domain reload recovery',\n    );\n\n    // Send tools changed notification to MCP client if callback provided\n    // This is critical for notifying the client after domain reload\n    if (sendNotification) {\n      sendNotification();\n    }\n  }\n\n  /**\n   * Refresh tools using direct initialization (fallback method)\n   */\n  private async refreshToolsFallback(sendNotification?: () => void): Promise<void> {\n    VibeLogger.logDebug(\n      'unity_tool_manager_fallback_refresh',\n      'Using fallback refresh method (connectionManager not available)',\n      {},\n      undefined,\n      'Direct initialization fallback for domain reload recovery',\n    );\n\n    await this.initializeDynamicTools();\n\n    if (sendNotification) {\n      sendNotification();\n    }\n  }\n\n  /**\n   * Execute ultimate fallback for tool refresh (last resort)\n   */\n  private async executeUltimateToolsFallback(sendNotification?: () => void): Promise<void> {\n    try {\n      await this.initializeDynamicTools();\n\n      if (sendNotification) {\n        sendNotification();\n      }\n    } catch (fallbackError) {\n      VibeLogger.logError(\n        'unity_tool_manager_fallback_failed',\n        'Fallback tool initialization also failed',\n        { error: fallbackError instanceof Error ? fallbackError.message : String(fallbackError) },\n        undefined,\n        'Both UseCase and fallback failed - domain reload recovery compromised',\n      );\n    }\n  }\n\n  /**\n   * Safe version of refreshDynamicTools that prevents duplicate execution\n   */\n  async refreshDynamicToolsSafe(sendNotification?: () => void): Promise<void> {\n    if (this.isRefreshing) {\n      return;\n    }\n\n    this.isRefreshing = true;\n    try {\n      await this.refreshDynamicTools(sendNotification);\n    } finally {\n      this.isRefreshing = false;\n    }\n  }\n\n  /**\n   * Check if tool exists\n   */\n  hasTool(toolName: string): boolean {\n    return this.dynamicTools.has(toolName);\n  }\n\n  /**\n   * Get tool by name\n   */\n  getTool(toolName: string): DynamicUnityCommandTool | undefined {\n    return this.dynamicTools.get(toolName);\n  }\n\n  /**\n   * Get all tools as array\n   */\n  getAllTools(): Tool[] {\n    const tools: Tool[] = [];\n    for (const [toolName, dynamicTool] of this.dynamicTools) {\n      tools.push({\n        name: toolName,\n        description: dynamicTool.description,\n        inputSchema: this.convertToMcpSchema(dynamicTool.inputSchema),\n      });\n    }\n    return tools;\n  }\n\n  /**\n   * Get tools count\n   */\n  getToolsCount(): number {\n    return this.dynamicTools.size;\n  }\n\n  // IToolService interface compatibility methods\n  /**\n   * Initialize dynamic tools (IToolService interface)\n   */\n  async initializeTools(): Promise<void> {\n    return this.initializeDynamicTools();\n  }\n\n  /**\n   * Refresh dynamic tools (IToolService interface)\n   */\n  async refreshTools(): Promise<void> {\n    return this.initializeDynamicTools();\n  }\n\n  /**\n   * Convert input schema to MCP-compatible format safely\n   */\n  private convertToMcpSchema(inputSchema: unknown): {\n    type: 'object';\n    properties?: Record<string, unknown>;\n    required?: string[];\n  } {\n    if (!inputSchema || typeof inputSchema !== 'object') {\n      return { type: 'object' };\n    }\n\n    const schema = inputSchema as Record<string, unknown>;\n    const result: {\n      type: 'object';\n      properties?: Record<string, unknown>;\n      required?: string[];\n    } = { type: 'object' };\n\n    if (schema.properties && typeof schema.properties === 'object') {\n      result.properties = schema.properties as Record<string, unknown>;\n    }\n\n    if (Array.isArray(schema.required)) {\n      result.required = schema.required as string[];\n    }\n\n    return result;\n  }\n}\n", "import { UnityClient } from './unity-client.js';\n// Debug logging removed\nimport { LIST_CHANGED_SUPPORTED_CLIENTS, DEFAULT_CLIENT_NAME } from './constants.js';\n\n/**\n * MCP Client Compatibility Manager - Manages client-specific compatibility and list_changed handling\n *\n * Design document reference: Packages/src/TypeScriptServer~/ARCHITECTURE.md\n *\n * Related classes:\n * - UnityClient: Manages communication with Unity Editor\n * - UnityMcpServer: Main server class that uses this manager\n *\n * Key features:\n * - Client name management and initialization\n * - list_changed support/unsupported detection\n * - MCP_CLIENT_NAME environment variable compatibility\n * - Client name restoration on reconnection\n */\nexport class McpClientCompatibility {\n  private unityClient: UnityClient;\n  private clientName: string = DEFAULT_CLIENT_NAME;\n\n  constructor(unityClient: UnityClient) {\n    this.unityClient = unityClient;\n  }\n\n  /**\n   * Set client name\n   */\n  setClientName(clientName: string): void {\n    this.clientName = clientName;\n  }\n\n  /**\n   * Setup client compatibility configuration with logging\n   */\n  setupClientCompatibility(clientName: string): void {\n    this.setClientName(clientName);\n    this.logClientCompatibility(clientName);\n    // Client name received - no logging needed for normal operation\n  }\n\n  /**\n   * Get client name\n   */\n  getClientName(): string {\n    return this.clientName;\n  }\n\n  /**\n   * Check if client doesn't support list_changed notifications\n   */\n  isListChangedUnsupported(clientName: string): boolean {\n    return !this.isListChangedSupported(clientName);\n  }\n\n  /**\n   * Handle client name initialization and setup\n   */\n  async handleClientNameInitialization(): Promise<void> {\n    // Client name handling:\n    // 1. Primary: clientInfo.name from MCP protocol initialize request\n    // 2. Fallback: MCP_CLIENT_NAME environment variable (for backward compatibility)\n    // 3. Default: Empty string (Unity will show \"No Client\" in UI)\n    // Note: MCP_CLIENT_NAME is deprecated but kept for compatibility with older setups\n    if (!this.clientName) {\n      const fallbackName = process.env.MCP_CLIENT_NAME;\n      if (fallbackName) {\n        this.clientName = fallbackName;\n        await this.unityClient.setClientName(fallbackName);\n        // Fallback client name set to Unity\n      } else {\n        // No client name set, waiting for initialize request\n      }\n    } else {\n      // Send the already set client name to Unity\n      await this.unityClient.setClientName(this.clientName);\n      // Client name already set, sending to Unity\n    }\n\n    // Register reconnect handler to re-send client name after reconnection\n    this.unityClient.onReconnect(() => {\n      // Reconnected - resending client name\n      void this.unityClient.setClientName(this.clientName);\n    });\n  }\n\n  /**\n   * Initialize client with name\n   */\n  async initializeClient(clientName: string): Promise<void> {\n    this.setClientName(clientName);\n    await this.handleClientNameInitialization();\n  }\n\n  /**\n   * Check if client supports list_changed notifications\n   */\n  isListChangedSupported(clientName: string): boolean {\n    if (!clientName) {\n      return false;\n    }\n\n    const normalizedName = clientName.toLowerCase();\n    return LIST_CHANGED_SUPPORTED_CLIENTS.some((supported) => normalizedName.includes(supported));\n  }\n\n  /**\n   * Log client compatibility information\n   */\n  logClientCompatibility(clientName: string): void {\n    const isSupported = this.isListChangedSupported(clientName);\n\n    // Client compatibility logged\n\n    if (!isSupported) {\n      // Client will use synchronous initialization\n    } else {\n      // Client will use asynchronous initialization\n    }\n  }\n}\n", "import { Server } from '@modelcontextprotocol/sdk/server/index.js';\nimport { UnityClient } from './unity-client.js';\nimport { UnityConnectionManager } from './unity-connection-manager.js';\nimport { ENVIRONMENT, NOTIFICATION_METHODS, ServerShutdownReason } from './constants.js';\nimport { VibeLogger } from './utils/vibe-logger.js';\nimport { IUnityEventService } from './application/interfaces/unity-event-service.js';\nimport { INotificationService } from './application/interfaces/notification-service.js';\nimport { IProcessControlService } from './application/interfaces/process-control-service.js';\n\n/**\n * Unity Event Handler - Manages Unity notifications and event processing\n * Implements segregated interfaces following Interface Segregation Principle\n *\n * Design document reference: Packages/src/TypeScriptServer~/ARCHITECTURE.md\n *\n * Related classes:\n * - UnityClient: Manages communication with Unity Editor\n * - UnityConnectionManager: Manages Unity connection\n * - Server: MCP server instance for sending notifications\n * - UnityMcpServer: Main server class that uses this handler\n *\n * Key features:\n * - tools_changed notification sending\n * - Unity notification listener setup\n * - Signal handler configuration\n * - Graceful shutdown handling\n */\nexport class UnityEventHandler\n  implements IUnityEventService, INotificationService, IProcessControlService\n{\n  private server: Server;\n  private unityClient: UnityClient;\n  private connectionManager: UnityConnectionManager;\n  private readonly isDevelopment: boolean;\n  private shuttingDown: boolean = false;\n  private isNotifying: boolean = false;\n  private hasSentListChangedNotification: boolean = false;\n  private isInitializationCompleted: boolean = false;\n  private pendingToolsChangedNotification: boolean = false;\n\n  constructor(server: Server, unityClient: UnityClient, connectionManager: UnityConnectionManager) {\n    this.server = server;\n    this.unityClient = unityClient;\n    this.connectionManager = connectionManager;\n    this.isDevelopment = process.env.NODE_ENV === ENVIRONMENT.NODE_ENV_DEVELOPMENT;\n  }\n\n  /**\n   * Called when MCP initialization is completed\n   * Sends any pending notifications that were queued during initialization\n   */\n  onInitializationCompleted(): void {\n    this.isInitializationCompleted = true;\n\n    // Reset the flag before sending, so the queued notification can be sent\n    this.hasSentListChangedNotification = false;\n\n    // Send queued notification if any (this will be the first and only list_changed)\n    if (this.pendingToolsChangedNotification) {\n      this.pendingToolsChangedNotification = false;\n      this.sendToolsChangedNotification();\n    }\n  }\n\n  /**\n   * Setup Unity event listener for automatic tool updates\n   */\n  setupUnityEventListener(onToolsChanged: () => Promise<void>): void {\n    // Listen for MCP standard notifications from Unity\n    this.unityClient.onNotification(NOTIFICATION_METHODS.TOOLS_LIST_CHANGED, (_params: unknown) => {\n      VibeLogger.logInfo(\n        'unity_notification_received',\n        'Unity notification received: notifications/tools/list_changed',\n        undefined,\n        undefined,\n        'Unity notified that tool list has changed',\n      );\n\n      try {\n        void onToolsChanged();\n      } catch (error) {\n        VibeLogger.logError(\n          'unity_notification_error',\n          'Failed to update dynamic tools via Unity notification',\n          { error: error instanceof Error ? error.message : String(error) },\n          undefined,\n          'Error occurred while processing Unity tool list change notification',\n        );\n      }\n    });\n\n    // Listen for server shutdown notifications from Unity\n    this.unityClient.onNotification(NOTIFICATION_METHODS.SERVER_SHUTDOWN, (params: unknown) => {\n      const shutdownParams = params as { reason?: string };\n      const reason: ServerShutdownReason =\n        shutdownParams.reason === ServerShutdownReason.DOMAIN_RELOAD\n          ? ServerShutdownReason.DOMAIN_RELOAD\n          : ServerShutdownReason.EDITOR_QUIT;\n\n      VibeLogger.logInfo(\n        'unity_shutdown_notification',\n        `Unity server shutdown notification received: ${reason}`,\n        { reason },\n        undefined,\n        `Unity server is shutting down due to ${reason}`,\n      );\n\n      // Store shutdown reason in UnityClient for message differentiation\n      this.unityClient.setShutdownReason(reason);\n    });\n  }\n\n  /**\n   * Send tools changed notification (with duplicate prevention and initialization check)\n   *\n   * BUG WORKAROUND: Cursor disconnects when list_changed fires multiple times.\n   * Therefore, list_changed is sent only ONCE per MCP server lifetime.\n   *\n   * Notification timing rules:\n   * 1. Before initialization completed: queue the notification\n   * 2. After initialization completed: send queued notification (first and only time)\n   * 3. Subsequent calls: blocked by hasSentListChangedNotification flag\n   */\n  sendToolsChangedNotification(): void {\n    // Queue notification if initialization is not yet completed\n    if (!this.isInitializationCompleted) {\n      this.pendingToolsChangedNotification = true;\n      if (this.isDevelopment) {\n        VibeLogger.logDebug(\n          'tools_notification_queued',\n          'sendToolsChangedNotification queued: initialization not completed',\n          undefined,\n          undefined,\n          'Notification will be sent after initialization completes',\n        );\n      }\n      return;\n    }\n\n    // BUG WORKAROUND: Cursor disconnects when list_changed fires multiple times.\n    // Send only once per MCP server lifetime.\n    if (this.hasSentListChangedNotification) {\n      if (this.isDevelopment) {\n        VibeLogger.logDebug(\n          'tools_notification_skipped_already_sent',\n          'sendToolsChangedNotification skipped: list_changed already sent',\n          undefined,\n          undefined,\n          'Subsequent list_changed notification suppressed',\n        );\n      }\n      return;\n    }\n\n    if (this.isNotifying) {\n      if (this.isDevelopment) {\n        VibeLogger.logDebug(\n          'tools_notification_skipped',\n          'sendToolsChangedNotification skipped: already notifying',\n          undefined,\n          undefined,\n          'Duplicate notification prevented',\n        );\n      }\n      return;\n    }\n\n    this.isNotifying = true;\n    try {\n      void this.server.notification({\n        method: NOTIFICATION_METHODS.TOOLS_LIST_CHANGED,\n        params: {},\n      });\n      this.hasSentListChangedNotification = true;\n      if (this.isDevelopment) {\n        VibeLogger.logInfo(\n          'tools_notification_sent',\n          'tools/list_changed notification sent',\n          undefined,\n          undefined,\n          'Successfully notified client of tool list changes',\n        );\n      }\n    } catch (error) {\n      VibeLogger.logError(\n        'tools_notification_error',\n        'Failed to send tools changed notification',\n        { error: error instanceof Error ? error.message : String(error) },\n        undefined,\n        'Error occurred while sending tool list change notification',\n      );\n    } finally {\n      this.isNotifying = false;\n    }\n  }\n\n  /**\n   * Setup signal handlers for graceful shutdown\n   */\n  setupSignalHandlers(): void {\n    // Handle Ctrl+C (SIGINT)\n    process.on('SIGINT', () => {\n      VibeLogger.logInfo(\n        'sigint_received',\n        'Received SIGINT, shutting down...',\n        undefined,\n        undefined,\n        'User pressed Ctrl+C, initiating graceful shutdown',\n      );\n      this.gracefulShutdown();\n    });\n\n    // Handle kill command (SIGTERM)\n    process.on('SIGTERM', () => {\n      VibeLogger.logInfo(\n        'sigterm_received',\n        'Received SIGTERM, shutting down...',\n        undefined,\n        undefined,\n        'Process termination signal received, initiating graceful shutdown',\n      );\n      this.gracefulShutdown();\n    });\n\n    // Handle terminal close (SIGHUP)\n    process.on('SIGHUP', () => {\n      VibeLogger.logInfo(\n        'sighup_received',\n        'Received SIGHUP, shutting down...',\n        undefined,\n        undefined,\n        'Terminal hangup signal received, initiating graceful shutdown',\n      );\n      this.gracefulShutdown();\n    });\n\n    // Handle stdin close (when parent process disconnects)\n    // BUG FIX: Added STDIN monitoring to detect when Cursor/parent MCP client disconnects\n    // This prevents orphaned Node processes from remaining after IDE shutdown\n    process.stdin.on('close', () => {\n      VibeLogger.logInfo(\n        'stdin_closed',\n        'STDIN closed, shutting down...',\n        undefined,\n        undefined,\n        'Parent process disconnected, preventing orphaned process',\n      );\n      this.gracefulShutdown();\n    });\n\n    process.stdin.on('end', () => {\n      VibeLogger.logInfo(\n        'stdin_ended',\n        'STDIN ended, shutting down...',\n        undefined,\n        undefined,\n        'STDIN stream ended, initiating graceful shutdown',\n      );\n      this.gracefulShutdown();\n    });\n\n    // Handle uncaught exceptions\n    // BUG FIX: Added comprehensive error handling to prevent hanging processes\n    process.on('uncaughtException', (error) => {\n      VibeLogger.logException(\n        'uncaught_exception',\n        error,\n        undefined,\n        undefined,\n        'Uncaught exception occurred, shutting down safely',\n      );\n      this.gracefulShutdown();\n    });\n\n    process.on('unhandledRejection', (reason, _promise) => {\n      VibeLogger.logError(\n        'unhandled_rejection',\n        'Unhandled promise rejection',\n        { reason: String(reason) },\n        undefined,\n        'Unhandled promise rejection occurred, shutting down safely',\n      );\n      this.gracefulShutdown();\n    });\n  }\n\n  /**\n   * Graceful shutdown with proper cleanup\n   * BUG FIX: Enhanced shutdown process to prevent orphaned Node processes\n   */\n  gracefulShutdown(): void {\n    // Prevent multiple shutdown attempts\n    if (this.shuttingDown) {\n      return;\n    }\n\n    this.shuttingDown = true;\n    VibeLogger.logInfo(\n      'graceful_shutdown_start',\n      'Starting graceful shutdown...',\n      undefined,\n      undefined,\n      'Initiating graceful shutdown process',\n    );\n\n    try {\n      // Disconnect from Unity and stop all intervals\n      // BUG FIX: Ensure polling intervals are stopped to prevent hanging event loop\n      this.connectionManager.disconnect();\n\n      // Clear any remaining timers to ensure clean exit\n      // BUG FIX: Force garbage collection if available to clean up lingering references\n      if (global.gc) {\n        global.gc();\n      }\n    } catch (error) {\n      VibeLogger.logError(\n        'cleanup_error',\n        'Error during cleanup',\n        { error: error instanceof Error ? error.message : String(error) },\n        undefined,\n        'Error occurred during graceful shutdown cleanup',\n      );\n    }\n\n    VibeLogger.logInfo(\n      'graceful_shutdown_complete',\n      'Graceful shutdown completed',\n      undefined,\n      undefined,\n      'All cleanup completed, process will exit',\n    );\n    process.exit(0);\n  }\n\n  /**\n   * Check if shutdown is in progress\n   */\n  isShuttingDown(): boolean {\n    return this.shuttingDown;\n  }\n}\n", "/**\n * Server version\n *\n * This file exists to avoid bundling the entire package.json into the server bundle.\n * Keep this in sync with package.json version.\n */\nexport const VERSION = '0.30.1';\n", "#!/usr/bin/env node\n\nimport { Server } from '@modelcontextprotocol/sdk/server/index.js';\nimport { StdioServerTransport } from '@modelcontextprotocol/sdk/server/stdio.js';\nimport {\n  CallToolRequestSchema,\n  ListToolsRequestSchema,\n  InitializeRequestSchema,\n  InitializeResult,\n} from '@modelcontextprotocol/sdk/types.js';\nimport { UnityClient } from './unity-client.js';\nimport { VibeLogger } from './utils/vibe-logger.js';\nimport { UnityDiscovery } from './unity-discovery.js';\nimport { UnityConnectionManager } from './unity-connection-manager.js';\nimport { UnityToolManager } from './unity-tool-manager.js';\nimport { McpClientCompatibility } from './mcp-client-compatibility.js';\nimport { UnityEventHandler } from './unity-event-handler.js';\nimport { ToolResponse } from './types/tool-types.js';\nimport {\n  ENVIRONMENT,\n  MCP_PROTOCOL_VERSION,\n  MCP_SERVER_NAME,\n  TOOLS_LIST_CHANGED_CAPABILITY,\n} from './constants.js';\nimport { VERSION } from './version.js';\n\n/**\n * Unity MCP Server - Bridge between MCP protocol and Unity Editor\n *\n * Design document reference: Packages/src/TypeScriptServer~/ARCHITECTURE.md\n *\n * Related classes:\n * - UnityConnectionManager: Manages Unity connection and discovery\n * - UnityToolManager: Manages dynamic tool generation and lifecycle\n * - McpClientCompatibility: Handles client-specific compatibility\n * - UnityEventHandler: Manages events and graceful shutdown\n * - UnityClient: Handles the TCP connection to the Unity Editor\n * - DynamicUnityCommandTool: Dynamically creates tools based on Unity tools\n * - @modelcontextprotocol/sdk/server: The core MCP server implementation\n */\n/**\n * Initialization state for managing concurrent initialization requests\n */\ntype InitializationState = 'not_started' | 'initializing' | 'completed';\n\nclass UnityMcpServer {\n  private server: Server;\n  private unityClient: UnityClient;\n  private readonly isDevelopment: boolean;\n  private initializationState: InitializationState = 'not_started';\n  private initializingPromise: Promise<InitializeResult> | null = null;\n  private unityDiscovery: UnityDiscovery;\n  private connectionManager: UnityConnectionManager;\n  private toolManager: UnityToolManager;\n  private clientCompatibility: McpClientCompatibility;\n  private eventHandler: UnityEventHandler;\n\n  constructor() {\n    // Simple environment variable check\n    this.isDevelopment = process.env.NODE_ENV === ENVIRONMENT.NODE_ENV_DEVELOPMENT;\n\n    this.server = new Server(\n      {\n        name: MCP_SERVER_NAME,\n        version: VERSION,\n      },\n      {\n        capabilities: {\n          tools: {\n            listChanged: TOOLS_LIST_CHANGED_CAPABILITY,\n          },\n        },\n      },\n    );\n\n    this.unityClient = UnityClient.getInstance();\n\n    // Initialize Unity connection manager\n    this.connectionManager = new UnityConnectionManager(this.unityClient);\n    this.unityDiscovery = this.connectionManager.getUnityDiscovery();\n\n    // Initialize Unity tool manager\n    this.toolManager = new UnityToolManager(this.unityClient);\n    // Phase 3.2: Inject connectionManager for RefreshToolsUseCase integration\n    this.toolManager.setConnectionManager(this.connectionManager);\n\n    // Initialize MCP client compatibility manager\n    this.clientCompatibility = new McpClientCompatibility(this.unityClient);\n\n    // Initialize Unity event handler\n    this.eventHandler = new UnityEventHandler(\n      this.server,\n      this.unityClient,\n      this.connectionManager,\n    );\n\n    // Setup reconnection callback for tool refresh\n    this.connectionManager.setupReconnectionCallback(async () => {\n      await this.toolManager.refreshDynamicToolsSafe(() => {\n        this.eventHandler.sendToolsChangedNotification();\n      });\n    });\n\n    this.setupHandlers();\n    this.eventHandler.setupSignalHandlers();\n  }\n\n  /**\n   * Initialize client synchronously (for list_changed unsupported clients)\n   */\n  private async initializeSyncClient(clientName: string): Promise<InitializeResult> {\n    try {\n      await this.clientCompatibility.initializeClient(clientName);\n      this.toolManager.setClientName(clientName);\n      await this.connectionManager.waitForUnityConnectionWithTimeout(10000);\n      const tools = await this.toolManager.getToolsFromUnity();\n\n      // Returning tools for client\n      return {\n        protocolVersion: MCP_PROTOCOL_VERSION,\n        capabilities: {\n          tools: {\n            listChanged: TOOLS_LIST_CHANGED_CAPABILITY,\n          },\n        },\n        serverInfo: {\n          name: MCP_SERVER_NAME,\n          version: VERSION,\n        },\n        tools,\n      };\n    } catch (error) {\n      VibeLogger.logError(\n        'mcp_unity_connection_timeout',\n        'Unity connection timeout',\n        {\n          client_name: clientName,\n          error_message: error instanceof Error ? error.message : String(error),\n        },\n        undefined,\n        'Unity connection timed out - check Unity MCP bridge status',\n      );\n      return {\n        protocolVersion: MCP_PROTOCOL_VERSION,\n        capabilities: {\n          tools: {\n            listChanged: TOOLS_LIST_CHANGED_CAPABILITY,\n          },\n        },\n        serverInfo: {\n          name: MCP_SERVER_NAME,\n          version: VERSION,\n        },\n        tools: [],\n      };\n    }\n  }\n\n  /**\n   * Initialize client asynchronously and return InitializeResult (for list_changed supported clients)\n   * Returns a Promise that resolves when initialization is complete\n   */\n  private async initializeAsyncClientAndReturn(clientName: string): Promise<InitializeResult> {\n    try {\n      // Start Unity connection initialization\n      await this.clientCompatibility.initializeClient(clientName);\n      this.toolManager.setClientName(clientName);\n      await this.toolManager.initializeDynamicTools();\n\n      // Mark initialization as completed\n      this.initializationState = 'completed';\n\n      // Notify event handler that initialization is complete\n      this.eventHandler.onInitializationCompleted();\n\n      return this.createInitializeResult();\n    } catch (error) {\n      VibeLogger.logError(\n        'mcp_unity_connection_init_failed',\n        'Unity connection initialization failed',\n        { error_message: error instanceof Error ? error.message : String(error) },\n        undefined,\n        'Unity connection could not be established - check Unity MCP bridge',\n      );\n      // Start Unity discovery to retry connection (singleton pattern prevents duplicates)\n      this.unityDiscovery.start();\n\n      // Mark initialization as completed even on failure (to allow retries)\n      this.initializationState = 'completed';\n\n      // Notify event handler that initialization is complete (even on failure)\n      // This allows future Unity reconnection notifications to be sent\n      this.eventHandler.onInitializationCompleted();\n\n      return this.createInitializeResult();\n    }\n  }\n\n  /**\n   * Create InitializeResult object\n   */\n  private createInitializeResult(): InitializeResult {\n    return {\n      protocolVersion: MCP_PROTOCOL_VERSION,\n      capabilities: {\n        tools: {\n          listChanged: TOOLS_LIST_CHANGED_CAPABILITY,\n        },\n      },\n      serverInfo: {\n        name: MCP_SERVER_NAME,\n        version: VERSION,\n      },\n    };\n  }\n\n  private setupHandlers(): void {\n    // Handle initialize request to get client information\n    this.server.setRequestHandler(InitializeRequestSchema, async (request) => {\n      const clientInfo = request.params?.clientInfo;\n      const clientName = clientInfo?.name || '';\n\n      if (clientName) {\n        this.clientCompatibility.setupClientCompatibility(clientName);\n      }\n\n      // If initialization is in progress, return the same Promise (Mutex pattern)\n      if (this.initializationState === 'initializing' && this.initializingPromise) {\n        return this.initializingPromise;\n      }\n\n      // If initialization is completed, return result immediately\n      if (this.initializationState === 'completed') {\n        return this.createInitializeResult();\n      }\n\n      // Start initialization\n      this.initializationState = 'initializing';\n\n      if (this.clientCompatibility.isListChangedUnsupported(clientName)) {\n        // list_changed unsupported client: wait for Unity connection\n        const result = await this.initializeSyncClient(clientName);\n        this.initializationState = 'completed';\n        return result;\n      } else {\n        // list_changed supported client: asynchronous approach with Promise tracking\n        this.initializingPromise = this.initializeAsyncClientAndReturn(clientName);\n        return this.initializingPromise;\n      }\n    });\n\n    // Provide tool list\n    this.server.setRequestHandler(ListToolsRequestSchema, () => {\n      const tools = this.toolManager.getAllTools();\n\n      // Providing tools to client\n      return { tools };\n    });\n\n    // Handle tool execution\n    this.server.setRequestHandler(CallToolRequestSchema, async (request) => {\n      const { name, arguments: args } = request.params;\n\n      // Tool executed\n\n      try {\n        // Check if it's a dynamic Unity tool\n        if (this.toolManager.hasTool(name)) {\n          const dynamicTool = this.toolManager.getTool(name);\n          if (!dynamicTool) {\n            throw new Error(`Tool ${name} is not available`);\n          }\n          const result: ToolResponse = await dynamicTool.execute(args ?? {});\n          // Convert ToolResponse to MCP-compatible format\n          return {\n            content: result.content,\n            isError: result.isError,\n          };\n        }\n\n        // All tools should be handled by dynamic tools\n        throw new Error(`Unknown tool: ${name}`);\n      } catch (error) {\n        return {\n          content: [\n            {\n              type: 'text',\n              text: `Error executing ${name}: ${error instanceof Error ? error.message : 'Unknown error'}`,\n            },\n          ],\n          isError: true,\n        };\n      }\n    });\n  }\n\n  /**\n   * Start the server\n   */\n  async start(): Promise<void> {\n    // Setup Unity event notification listener (will be used after Unity connection)\n    this.eventHandler.setupUnityEventListener(async () => {\n      await this.toolManager.refreshDynamicToolsSafe(() => {\n        this.eventHandler.sendToolsChangedNotification();\n      });\n    });\n\n    // Initialize connection manager with callback for tool initialization\n    this.connectionManager.initialize(async () => {\n      // If we have a client name, initialize tools immediately\n      const clientName = this.clientCompatibility.getClientName();\n      if (clientName) {\n        this.toolManager.setClientName(clientName);\n        await this.toolManager.initializeDynamicTools();\n\n        // Send immediate tools changed notification for faster recovery\n        this.eventHandler.sendToolsChangedNotification();\n      } else {\n        // Unity connection established, waiting for client name\n      }\n    });\n\n    if (this.isDevelopment) {\n      // Server starting with unified discovery service\n    }\n\n    // Connect to MCP transport last - wait for client name before connecting to Unity\n    const transport = new StdioServerTransport();\n    await this.server.connect(transport);\n  }\n}\n\n// Start server\nconst server = new UnityMcpServer();\n\nserver.start().catch((error) => {\n  VibeLogger.logError(\n    'mcp_server_startup_fatal',\n    'Unity MCP Server startup failed',\n    {\n      error_message: error instanceof Error ? error.message : String(error),\n      stack_trace: error instanceof Error ? error.stack : 'No stack trace available',\n      error_type: error instanceof Error ? error.constructor.name : typeof error,\n    },\n    undefined,\n    'Fatal server startup error - check Unity MCP bridge configuration',\n  );\n  process.exit(1);\n});\n"],
  "mappings": "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",
  "names": ["util", "objectUtil", "path", "errorUtil", "path", "errorMap", "ctx", "result", "issues", "elements", "processed", "result", "r", "ZodFirstPartyTypeKind", "ErrorCode", "_a", "_b", "resolve", "_a", "process", "process", "resolve", "resolve", "resolve", "resolve", "resolve", "server"]
}
